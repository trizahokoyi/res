(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"/90Z":function(e,t,n){var i=n("q1tI");function a({color:e="#333",height:t}){const n=14*t/10;return i.createElement("svg",{width:n,height:t,viewBox:"3 3 18 18",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fill:e,d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z"}))}var r=n("Ye/N"),o=n("nj6m"),s=n("zLLH"),l=n("n6mq");const c=20,d=12,u=1,p="M21,17.6119404 L21,9.15332448 C21,7.0136795 20.7772185,6.23779253 20.3588815,5.45557032 C19.9405445,4.67334809 19.3266519,4.05945552 18.5444297,3.64111848 C17.7622075,3.22278146 16.9863205,3 14.8466755,3 L6.3880595,3 C6.46224202,2.80834445 6.54669936,2.63211874 6.64111848,2.45557032 C7.05945552,1.67334809 7.67334809,1.05945552 8.45557032,0.64111848 C9.23779253,0.222781464 10.0136795,0 12.1533245,0 L17.8466755,0 C19.9863205,0 20.7622075,0.222781464 21.5444297,0.64111848 C22.3266519,1.05945552 22.9405445,1.67334809 23.3588815,2.45557032 C23.7772185,3.23779253 24,4.0136795 24,6.15332448 L24,11.8466755 C24,13.9863205 23.7772185,14.7622075 23.3588815,15.5444297 C22.9405445,16.3266519 22.3266519,16.9405445 21.5444297,17.3588815 C21.3678813,17.4533006 21.1916556,17.5377581 21,17.6119404 Z M6.15332448,6 L11.8466755,6 C13.9863205,6 14.7622075,6.22278146 15.5444297,6.64111848 C16.3266519,7.05945552 16.9405445,7.67334809 17.3588815,8.45557032 C17.7772185,9.23779253 18,10.0136795 18,12.1533245 L18,17.8466755 C18,19.9863204 17.7772185,20.7622075 17.3588815,21.5444297 C16.9405445,22.3266518 16.3266519,22.9405445 15.5444297,23.3588815 C14.7622075,23.7772186 13.9863205,24 11.8466755,24 L6.15332448,24 C4.0136795,24 3.23779253,23.7772186 2.45557032,23.3588815 C1.67334809,22.9405445 1.05945551,22.3266518 0.64111849,21.5444297 C0.222781467,20.7622075 0,19.9863204 0,17.8466755 L0,12.1533245 C0,10.0136795 0.222781467,9.23779253 0.64111849,8.45557032 C1.05945551,7.67334809 1.67334809,7.05945552 2.45557032,6.64111848 C3.23779253,6.22278146 4.0136795,6 6.15332448,6 Z";var h=Object(s.b)({name:"PinResource",key:"detailedPin",options:({pinId:e})=>({id:e,field_set_key:"detailed"})})((function(e){const{data:t}=e.detailedPin,n=t?t.story_pin_data.page_count:null;return i.createElement(l.c,{display:"flex",alignItems:"center",height:c},i.createElement(l.n,{dangerouslySetSvgPath:{__path:p},accessibilityLabel:r.a._("Story Pin Icon","Icon indicating this Pin is a story"),size:d,color:"darkGray"}),n&&i.createElement(l.c,{marginLeft:u},i.createElement(l.K,{inline:!0,size:"xs",weight:"bold"},n)))}));n.d(t,"a",(function(){return y}));const m={__path:"M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},g=e=>{switch(e){case"arrow-up-right":return r.a._("Promoted Pin","Icon indicating this Pin is promoted");case"play":return r.a._("Video Pin","Icon indicating this Pin is a video");case"gif":return r.a._("GIF Pin","Icon indicating this Pin is a GIF");case"tag":return r.a._("Product Pin","Icon indicating this Pin is a product");case"star":return r.a._("Recipe Pin","Icon indicating this Pin is a recipe");case"story-pin":return r.a._("Story Pin","Icon indicating this Pin is a story");case"collage":return r.a._("Collage Pin","Icon indicating this Pin is a collage");default:return""}};function y({max_rating:e,icon:t,text:n,rating:r,pinId:s}){let c;if(t)switch(t){case"star":c=i.createElement(o.a,{rating:r||"",max_rating:e,width:10});break;case"gif":c=i.createElement(a,{height:10,color:"#333"});break;case"story-pin":c=i.createElement(h,{pinId:s});break;default:const n={accessibilityLabel:g(t),color:"darkGray",size:10,inline:!0};c=i.createElement(l.c,{display:"flex",alignItems:"center",marginRight:1},"collage"===t?i.createElement(l.n,{dangerouslySetSvgPath:m,...n}):i.createElement(l.n,{icon:t,...n}))}return i.createElement(l.c,{display:"flex",alignItems:"center"},c,n&&i.createElement(l.c,{marginLeft:1},i.createElement(l.K,{inline:!0,size:"sm"},n.trim().substring(0,25))))}},"1Fta":function(e,t,n){var i=n("kmwA"),a=n("pSsd");const r=e=>e.length>32?`${e.substring(0,32).trim()}...`:e;t.a=({i18n:e,interpolateNamedTemplate:t})=>({getLearnMoreUrl:e=>{switch(e){case 1:return i.a.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return i.a.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return i.a.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:({ad_match_reason:n,board:i,feedbackType:a,makeNavigateLink:o,pinner:s,promoter:l,recommendationReason:c,sourceInterest:d})=>{switch(a){case"pfy":return e._("This Pin was inspired by your recent activity","Pin feedback reason");case"pfyBoard":const{name:a,url:u}=c.board,p=o("navigation",u,a);return t(e._("This Pin was inspired by your board {{ boardLink }}","Pin feedback - inspired by your board"),{boardLink:p});case"topic":const{name:h,url_name:m}=d,g=o("topicUrl",`/topics/${m}`,h);return t(e._("This Pin was inspired by {{ formattedTopic }}","Pin feedback"),{formattedTopic:g});case"followed":const y=`/${s.username}`,f=o("boardUrl",i.url,r(i.name)),b=o("pinnerUrl",y,r(s.full_name));return s.explicitly_followed_by_me?t(e._("This Pin is from {{ formattedPinner }}, a profile you follow","Pin feedback"),{formattedPinner:b}):t(e._("This Pin is from {{ formattedBoard }}, a board you follow","Pin feedback"),{formattedBoard:f});case"promoted":switch(n){case 1:case 2:case 3:return e._("This ad was personalized for you using info from one of our partners","Pin feedback");default:const{full_name:n,username:i}=l,a=o("promotedLink",i?"/"+i+"/":"/",n);return t(e._("{{ promoterLink }} paid to have this Pin show up where\n            you’d be more likely to notice it","Pin feedback"),{promoterLink:a})}default:return null}},getFeedbackType({board:e,feedback:t,viewParameter:n,pin:{promoter:i,is_downstream_promotion:a,recommendation_reason:r},pinner:o}){const s=t&&t.type;return i&&!a?"promoted":s||(r?"FOLLOWED_INTEREST"===r.reason?"topic":r.board?"pfyBoard":"pfy":e&&e.followed_by_me||o&&o.explicitly_followed_by_me?"followed":140===n||144===n||141===n||145===n||139===n||3173===n?"related":92===n?"default":3082===n?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:t,pinId:n,recommendationReasonId:i,pinFeedbackType:a,complaintReason:r,throughId:o})=>{const s="promoted"===t;let l,c;switch(t){case"promoted":l="promotedComplaint";break;case"search":l="unrelatedSearchPin";break;case"related":l="relatedPinHide";break;case"newsHub":l="newsHubPinHide";break;default:l="complaint"}switch(t){case"search":c={query:e.query,pin_id:n};break;case"related":c={pin:n};break;case"newsHub":c={pinId:n,newsId:e.newsId};break;default:c={complaint_reason:r||0,pin_id:n,...i?{recommendation_reason_id:i}:{},feedback_type:a||1,promoted:s,...o?{through_id:o}:{}}}return{action:l,actionOptions:c}},getUnfollowAction:({board:n,feedbackType:i,makeNavigateLink:r,pinner:o,sourceInterest:s})=>{if("topic"===i){if(s){const{id:n,name:i,url_name:o}=s,l=r("topicUrl",`/topics/${o}`,i,!0);return{action:"unfollowTopic",actionOptions:{interest_id:n,interest_list:a.a},title:"",subTitle:t(e._("We’ll show you less Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:l})}}}else if("followed"===i){const{id:i,name:a,url:s}=n||{},{explicitly_followed_by_me:l,full_name:c,username:d}=o,u=`/${d}`;if(n&&o){const n=r("boardUrl",s,a,!0),o=r("pinnerUrl",u,c,!0);let d=l?t(e._("You’ve unfollowed {{ formattedPinner }}’s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedPinner:o,formattedBoard:n}):t(e._("You’ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:n});return{action:"unfollowBoard",actionOptions:{board_id:i},title:"",subTitle:d=l?t(e._("You unfollowed {{ formattedPinner }} and won’t see Pins they save anymore.","Confirmation text after unfollowing a user"),{formattedPinner:o}):t(e._("You unfollowed the board {{ formattedBoard }} and won’t see Pins saved to it anymore.","Confirmation text after unfollowing a board"),{formattedBoard:n})}}}return null}})},"2rEd":function(e,t,n){n.r(t);var i=n("q1tI"),a=n.n(i),r=n("/MKj"),o=n("rSLd"),s=n("/90Z"),l=n("NdXn");const c=e=>e.charAt(0).toUpperCase()+e.slice(1);var d=n("H2go"),u=n("n6mq"),p=n("0nTG");n.d(t,"getEligiblePinTypes",(function(){return h})),n.d(t,"PinType",(function(){return m}));const h=e=>e.reduce((e,t)=>{return{...e,[`is${"story-pin"===t?"StoryPin":function(e){return c(Object(l.a)(e))}(t)}`]:!0}},{isCarousel:!1,isEmbeddedVideo:!1,isGif:!1,isOneTap:!1,isProduct:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1}),m=({pin:e,pinId:t,types:n})=>{const{promoter:i}=e,{isStoryPin:r,isOneTap:l,isCarousel:c,isEmbeddedVideo:m,isRecipe:g,isProduct:y,isGif:f}=h(n);return l?c?a.a.createElement(u.c,{paddingY:1},a.a.createElement(u.c,{position:"relative",marginBottom:2,marginLeft:2,dangerouslySetInlineStyle:{__style:{zIndex:d.a.max}}},a.a.createElement(o.a,{pinId:t,variant:"legacy"})),a.a.createElement(s.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):c?a.a.createElement(o.a,{pinId:t,variant:"legacy"}):f?a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{icon:"gif"})):m?a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{icon:"play"})):y?a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{text:Object(p.b)(e),icon:"tag"})):g?e.rich_summary&&e.rich_summary.aggregate_rating&&e.rich_summary.aggregate_rating.review_count?a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{text:e.rich_summary.aggregate_rating.review_count.toString(),icon:"star",rating:e.rich_summary&&e.rich_summary.aggregate_rating?e.rich_summary.aggregate_rating.rating_value:"",max_rating:e.rich_summary&&e.rich_summary.aggregate_rating?e.rich_summary.aggregate_rating.best_rating:""})):null:r?a.a.createElement(u.c,{paddingY:1},a.a.createElement(s.a,{icon:"story-pin"})):null};t.default=Object(r.connect)(({pins:e},t)=>{const{pinId:n,pin:i}=t;return{pin:e[n]||i}})(m)},"4+TC":function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("TSYQ"),o=n.n(r),s=n("Ye/N"),l=n("3gA6"),c=n("n6mq");const d={color:"white",size:"xl"},u=950;t.a=class extends a.a.Component{constructor(...e){var t,n,i;super(...e),i={showBoardName:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.timer=setTimeout(()=>{this.setState({showBoardName:!0})},u)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{showBoardName:e}=this.state,{isNewlySaved:t,name:n,url:i}=this.props;let r,u;if(t&&!e)r=a.a.createElement(c.K,d,s.a._("Saved!","Indication that a pin has been saved"));else{const e=a.a.createElement(c.K,{...d,truncate:!0,weight:"bold"},n);r=i?a.a.createElement(l.b,{to:i},e):e}return t&&(u=e?"board":"saved"),a.a.createElement("div",{"data-test-id":"savedInfo",className:o()("SavedAnimation",u)},r)}}},"51gp":function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("sEfC"),o=n.n(r),s=n("vYDk");var l=n("BEAQ"),c=n("9pre"),d=n("U4JR"),u=n("n6mq");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return w}));const h=[0,.25,.5,.75,.95,.97],m=[0,.5,.8,1],g={threshold:m},y={rootMargin:"-64px 0px 0px 0px",threshold:c.c},f=1e3,b=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function _(){return(new Date).getTime()}function v(e){return!!e.volume&&e.volume>0}class w extends a.a.Component{constructor(e){super(e),p(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),p(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),p(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),p(this,"handleLoop",()=>{this.videoTime=0}),p(this,"handleTimeChange",e=>{const{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;const i=e.time*f,a=function(e,t,n,i){if(e>t)return null;if(n<=0)return null;for(const a of i){const i=a*n;if(e<=i&&t>i)return a}return null}(this.videoTime,i,this.currentInterval.videoDuration,h);if("number"==typeof a&&this.props.playing&&!t&&n){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)}),p(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=e.duration*f,this.props.onDurationChange&&this.props.onDurationChange(e)}),p(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),p(this,"onEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),p(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const n=e.slice(-1)[0],i=function(e){return function(e,t){for(let n=0;n<t.length;n+=1){const i=t[n],a=t[n+1];if(null==a)return i;if(i<=e&&e<a)return i}return null}(e,m)}(Number.parseFloat(n.intersectionRatio.toFixed(2)));null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:b.PAUSED}):this.startNewInterval({viewability:i}))}),p(this,"onFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),p(this,"handleClose",()=>{this.startNewInterval()}),p(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=_();this.handleWindowResize=o()(this.handleWindowResize,1e3),this.videoWrapperRef=a.a.createRef(),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:v(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const n={};v(e)&&!v(this.props)?n.isAudible=!1:!v(e)&&v(this.props)&&(n.isAudible=!0);const i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?b.PLAYING:b.PAUSED:b.LOADING}getDimensions(){let e,t;if("object"==typeof this.videoWrapperRef&&this.videoWrapperRef.current){const n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:n}=this.props,{height:i,width:a,windowHeight:r,windowWidth:o,viewability:s,...l}=t;if(null!=i&&null!=a&&null!=r&&null!=o&&null!=s){const t={...l,height:i,width:a,windowHeight:r,windowWidth:o,viewability:s};Object(d.a)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:n,endTime:i,videoStartTime:a,videoEndTime:r,isAudible:o,height:s,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:p,windowWidth:h,viewability:m}},...g}=e;return{...g,eventData:{videoEventData:{videoDuration:t,time:n,endTime:i,videoTime:a,endVideoTime:r,isAudible:o,height:s,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:p,windowWidth:h,viewability:m}}}}({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=_();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{contextLogData:e,inAdsDesktopVideoExperiment:t,rootMargin:n,...i}=this.props,{seeking:r}=this.state;i.onDurationChange=this.handleDurationChange,i.onReady=this.handleReady,i.onTimeChange=this.handleTimeChange,i.onEnded=this.onEnded,i.onFullscreenChange=this.onFullscreenChange,i.onPlayheadDown=this.handlePlayheadDown,i.onPlayheadUp=this.handlePlayheadUp,i.onLoop=this.handleLoop,i.playing=!r&&this.props.playing;const o=t?y:g;return void 0!==n&&(o.rootMargin=n),a.a.createElement(s.a,{options:o,onVisibilityChange:this.handleVisibilityChange},a.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu},a.a.createElement(l.a,i)))}}p(w,"defaultProps",u.Q.defaultProps)},"9pre":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}));const i=5,a="V_HLSV3_MOBILE",r=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},BEAQ:function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("q1tI"),a=n.n(i),r=n("PioT"),o=n("aFfM"),s=n("n6mq");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class d extends a.a.PureComponent{constructor(e){super(e),l(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),l(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:n,onEnded:i}=this.props;i&&(i({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),n&&n()))}),l(this,"handleOnReady",({event:e})=>{const{onReady:t}=this.props;let{videoStartTime:n}=this.props;const{useHlsVideo:i}=this.state;null==n&&(n=0),n>0&&this.videoPlayerRef&&this.videoPlayerRef.video&&!i&&(this.videoPlayerRef.video.currentTime=n),t&&t({event:e})});const t=c(e.src);this.state={useHlsVideo:!r.a.isSafari()&&!!t}}render(){const{hlsConfig:e,loop:t,onEnded:n,src:i,videoStartTime:r,onLoop:l,...d}=this.props,{useHlsVideo:u}=this.state,p=c(i),h={...e,startPosition:r||-1},m=!n&&t;return u?a.a.createElement(o.a,{...d,hlsConfig:h,loop:m,onEnded:this.handleOnEnded,setVideoRef:this.setVideoPlayerRef,src:p}):a.a.createElement(s.Q,{...d,loop:m,onEnded:this.handleOnEnded,onReady:this.handleOnReady,ref:this.setVideoPlayerRef,src:p||i})}}},Gx6I:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("eOdZ"),a=n("i9se");const r={[a.a.BOARD_ACTIVITY]:"BoardActivityReactionResource",[a.a.BOARD_ACTIVITY_COMMENT]:"BoardActivityCommentReactionResource"};function o(e,t,n=1){return{type:"ACTIVITY_ITEM_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}function s(e,t,n){return r=>{const o=a.c[t],s={activityId:e,...n};return i.a.create(o,s).callUpdate().then(e=>{const t=e.resource_response.data;return r(function(e){return{type:"ACTIVITY_ITEM_UPDATED",payload:{data:e}}}(t)),t})}}function l(e,t,n,a){return s=>{if(n===a)return;const l=r[t],c={activityId:e,reactionType:a},d=i.a.create(l,c);0===a?d.callDelete({showError:!1}):d.callUpdate({showError:!1}),0!==n&&s(o(e,!1,n)),0!==a&&s(o(e,!0,a))}}function c(e,t,n,a,s=0){return l=>{const c=r[n];if(!a&&s>0){l(o(e,!1,s)),l(o(e,!0,t));const n={activityId:e,reactionType:s},a=i.a.create(c,n),r={activityId:e,reactionType:t},d=i.a.create(c,r);a.callDelete({showError:!1}).then(()=>{d.callCreate({showError:!1})})}else{const n={activityId:e,reactionType:t},r=i.a.create(c,n);a?r.callDelete({showError:!1}):r.callCreate({showError:!1}),l(o(e,!a,t))}}}},H2go:function(e,t,n){t.a={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},"HOY+":function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("/MKj"),o=n("s+7V"),s=n("Ye/N"),l=n("qhFy"),c=n("n6mq");const d={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},u={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},p={overlay:{__style:{backgroundColor:"#000",opacity:.8}}};function h({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:r,pin:o}){const{id:l}=o;return a.a.createElement(c.p,{alt:r||s.a._("pin image","image of a pin"),naturalHeight:t,naturalWidth:n,src:e},a.a.createElement(c.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:p.overlay}),a.a.createElement(c.c,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${l}`},a.a.createElement(c.P,{shape:"rounded"},a.a.createElement(c.c,{display:"flex",justifyContent:"center",padding:2},a.a.createElement(c.n,{accessibilityLabel:s.a._("Visit site","Button when pressed goes to pin's website"),color:"white",dangerouslySetSvgPath:u,size:25}),a.a.createElement(c.c,{margin:1}),a.a.createElement(c.K,{color:"white",size:"lg",truncate:!0,weight:"bold"},s.a._("Visit site","Button when pressed goes to pin's website")))),a.a.createElement(c.c,{margin:3}),a.a.createElement(c.P,{shape:"rounded",onTouch:i},a.a.createElement(c.c,{display:"flex",justifyContent:"center",padding:2},a.a.createElement(c.n,{accessibilityLabel:s.a._("Watch again","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:d,size:25}),a.a.createElement(c.c,{margin:1}),a.a.createElement(c.K,{color:"white",size:"lg",truncate:!0,weight:"bold"},s.a._("Watch again","Button when pressed restarts the video"))))))}var m=n("51gp"),g=n("Y8Sn"),y=n("vZlu");var f=Object(r.connect)(void 0,(e,t)=>({setCurrentVideo:t=>e(Object(y.c)(t))}))((function({inAdsDesktopVideoExperiment:e,isAutoplay:t,currentTime:n,lowResOnly:r,highResOnly:o,onLoad:d,onError:u,saved:p,onTimeChange:y,isExperimentalPinRep:f,pin:b,playing:_,rootMargin:v,setCurrentVideo:w,viewType:E,viewParameter:T}){const[C,P]=Object(i.useState)(!1),[I,S]=Object(i.useState)(!0),O=Object(g.g)(b),x=O&&!b.is_eligible_for_web_closeup,R=f&&O&&b.is_eligible_for_web_closeup,k=!O||x||!f;let A=!_;e&&(A=I,t&&_&&I&&S(!1));const{url:L}=b.images["236x"]||{},{id:D,is_promoted:V}=b,M=Object(i.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),w({pinId:D,isPromoted:V,currentTime:0}),P(!1)},[]),B=Object(i.useCallback)(()=>{P(R)},[R]);if(!b.videos||!b.videos.video_list.V_HLSV4)return null;const{height:H,thumbnail:F,width:N,url:j}=b.videos.video_list.V_HLSV4||{},U=b.videos.id,z=[{type:"video/m3u8",src:j}];return C?a.a.createElement(c.c,null,a.a.createElement(h,{backgroundImage:L,naturalHeight:H,naturalWidth:N,pin:b,onRestartVideo:M})):A?a.a.createElement(c.c,null,a.a.createElement(l.a,{lowResOnly:r,highResOnly:o,onLoad:d,onError:u,pin:b,saved:p})):a.a.createElement(c.c,null,a.a.createElement(m.a,{rootMargin:v,inAdsDesktopVideoExperiment:e,contextLogData:{component:0,view:E,viewParameter:T,objectId:b.id,video_id:U},accessibilityMaximizeLabel:s.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:s.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:s.a._("Mute","Mute button on video"),accessibilityPauseLabel:s.a._("Pause","Pause button on video"),accessibilityPlayLabel:s.a._("Play","Play button on video"),accessibilityUnmuteLabel:s.a._("Unmute","Unmute button on video"),aspectRatio:N/H,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:n||-1},loop:k,onTimeChange:y,playing:_,poster:L||F,src:z,videoStartTime:n,volume:0,onEnded:B}))}));function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=Object(o.a)(f);t.a=Object(r.connect)((e,t)=>({appInFocus:e.ui.app.appInFocus,isAutoplay:e.ui.app.isAutoplay,videosAutoplaying:e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}}}),(e,t)=>({pauseAutoplay:t=>e(Object(y.a)(t)),setCurrentVideo:t=>e(Object(y.c)(t))}))(class extends a.a.Component{constructor(...e){super(...e),b(this,"handleVisibilityChanged",e=>{const{currentTimeFromPinRep:t,pin:n,setCurrentVideo:i,pauseAutoplay:a,videosAutoplaying:r}=this.props,{id:o,is_promoted:s}=n,l=Object(g.c)(o,r),c=Object(g.j)(o,r),d=Object(g.a)(o,r);e?s?i({pinId:o,isPromoted:s,currentTime:l||t||this.currentVideoCurrentTime}):d&&i({pinId:o,isPromoted:s,currentTime:l||t||this.currentVideoCurrentTime}):!e&&c&&a({pinId:o,isPromoted:s,currentTime:t||this.currentVideoCurrentTime})}),b(this,"handleVideoTimeChange",e=>{const{pin:t,onTimeChange:n,videosAutoplaying:i}=this.props,{id:a}=t;Object(g.j)(a,i)&&(this.currentVideoCurrentTime=e.time),n&&n(e)})}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:t}=e,{appInFocus:n,currentTimeFromPinRep:i,pauseAutoplay:a,pin:r,setCurrentVideo:o,videosAutoplaying:s}=this.props,{id:l,is_promoted:c}=r,d=Object(g.j)(l,s),u=Object(g.c)(l,s);n!==t&&!n&&d?(this.pausedDueToBrowserOutOfFocus=!0,a({pinId:l,isPromoted:c,currentTime:i||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,o({pinId:l,isPromoted:c,currentTime:u||i||this.currentVideoCurrentTime}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:t,pin:n,videosAutoplaying:i}=this.props,{id:a,is_promoted:r}=n;Object(g.j)(a,i)&&t({pinId:a,isPromoted:r,currentTime:e||this.currentVideoCurrentTime})}render(){const{isAutoplay:e,pin:t,videosAutoplaying:n,viewParameter:i,viewType:r,highResOnly:o,lowResOnly:s,onError:l,onLoad:c,saved:d,inAdsDesktopVideoExperiment:u,isExperimentalPinRep:p,rootMargin:h}=this.props,{id:m}=t,y=Object(g.c)(m,n),f=Object(g.j)(m,n)&&e;return a.a.createElement(_,{rootMargin:h,currentTime:y,inAdsDesktopVideoExperiment:u,isAutoplay:e,viewParameter:i,viewType:r,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,playing:f,trackFullVisible:!1,highResOnly:o,lowResOnly:s,onError:l,onLoad:c,saved:d,isExperimentalPinRep:p})}})},NhEX:function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("/MKj"),o=n("+tKw"),s=n("n6mq");t.a=Object(r.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(({carousel_data:e,title:t})=>{let n=t;if(e){const{carousel_slots:t=[],index:i}=e;t[i]&&t[i].title&&(n=t[i].title)}const i=e?{height:"40px",overflow:"hidden"}:{};return a.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:i},paddingY:1},a.a.createElement(s.K,{size:"sm",weight:"bold"},a.a.createElement(o.a,{text:n,options:{hashtags:{appendText:`${n}`,source:"hashtag_pinrep"}}})))})},Sci3:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n.n(i),r=n("Ye/N"),o=n("US8k"),s=n("oRao"),l=n("n6mq");class c extends i.Component{constructor(...e){var t,n,i;super(...e),t=this,n="statsList",i=this.props.isVideo?[{iconType:"play",displayText:r.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:r.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:r.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:r.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:r.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:r.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}renderValue(e,t="COUNT"){return Number.isInteger(e)?"TIME"===t?Object(o.a)(e):a.a.createElement(s.a,{value:e,shortform:!0,shortformMaximumFractionDigits:1}):"-"}render(){const{isVideo:e,stats:t,isStoryPin:n,show90Days:i}=this.props;if(!t)return null;const r=i?"90d":"30d",o=(e||n)&&t.all_time?t.all_time:t[r];return o&&0!==Object.keys(o).length?a.a.createElement(l.c,{display:"flex"},this.statsList.map(({align:e,iconType:t,iconSize:n=12,field:i,displayText:r,valueFormat:s},c)=>a.a.createElement(l.c,{key:c,column:4,display:"flex",justifyContent:e,alignItems:"center"},a.a.createElement(l.c,{display:"inlineBlock",marginRight:1},a.a.createElement(l.n,{accessibilityLabel:r,color:"darkGray",icon:t,size:n})),a.a.createElement(l.K,{inline:!0,size:"sm"},this.renderValue(o[i],s))))):null}}},"TxB+":function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("/MKj"),o=n("h4v/"),s=n("TSYQ"),l=n.n(s),c=n("H2go"),d=n("n6mq");function u(e){const{debugImpressionStarted:t,debugImpressionLogged:n,slotIndex:a}=e,r=n||t?{...n&&!t?{opacity:.1}:{},...t?{backgroundColor:"#adebad"}:{},height:"100%",width:"100%"}:null;return i.createElement("div",{style:r},(t||n)&&i.createElement(d.c,{position:"absolute",padding:2,color:"darkGray",dangerouslySetInlineStyle:{__style:{zIndex:c.a.debugPinImpressions}}},i.createElement(d.K,{size:"xl",color:"white"},a)),e.children)}var p=n("k6pS"),h=n("ENn1"),m=n("1Fta"),g=n("Ye/N"),y=n("xOLo"),f=n("3gA6");var b=({pinId:e,sourceUrl:t,domain:n,onClick:a,bgColor:r,size:o,iconColor:s})=>t?i.createElement(f.b,{external:!0,onClick:a,pinId:e,stopPropagation:!0,to:t},i.createElement(d.o,{bgColor:r,icon:"arrow-up-right",accessibilityLabel:n,size:o,iconColor:s})):null,_=n("17x9"),v=n.n(_),w=n("rYoy"),E=n("4cpq"),T=n("yKES"),C=n("i9se"),P=n("PVJQ"),I=n("XCz/"),S=n("/5zs"),O=n("NtFK"),x=n("U4JR"),R=n("Warx");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A=23,L=15;class D extends i.Component{constructor(...e){super(...e),k(this,"state",{hovered:!1,focused:!1,active:!1}),k(this,"handleFocus",()=>{this.setState({focused:!0})}),k(this,"handleMouseDown",()=>{this.setState({active:!0})}),k(this,"handleMouseUp",()=>{this.setState({active:!1})}),k(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),k(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),k(this,"renderRightArrowClickthrough",()=>{const{backgroundColor:e,borderRadius:t,denseViewSelected:n,domain:a,textColor:r,maxHeight:o}=this.props,s=n?L:A,l=Object(R.a)(a,{maxLength:s});return i.createElement(d.c,{padding:2,color:e,display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:t}},maxHeight:o},i.createElement(d.c,{display:"flex",flex:"none"},i.createElement(d.n,{icon:"arrow-up-right",accessibilityLabel:g.a._("link","Website url link"),size:14,color:r})),i.createElement(d.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},i.createElement(d.K,{color:r,size:"sm",truncate:!0,weight:"bold"},l)))})}render(){const{borderRadius:e,bottom:t,hoverStyle:n,isEligibleForWebCloseup:a,onClick:r,pinId:o,position:s,sourceUrl:l,paddingX:c}=this.props;if(!l)return null;const u=this.state.hovered||this.state.focused||this.state.active?n:{};return i.createElement(d.c,{position:s,bottom:t},i.createElement(d.c,{alignItems:"end",display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1,padding:2},i.createElement(d.c,{minWidth:0,paddingX:c},!a&&i.createElement(d.c,{position:"relative",dangerouslySetInlineStyle:{__style:{borderRadius:e,...u}},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp},i.createElement(f.b,{external:!0,onClick:r,pinId:o,stopPropagation:!0,to:l},this.renderRightArrowClickthrough())))))}}k(D,"defaultProps",{textColor:"darkGray",backgroundColor:"lightGray",borderRadius:4,position:"absolute",bottom:!0,hoverStyle:{},paddingX:1});var V=n("pLLR"),M=n("Gx6I"),B=n("fArA"),H=n("Y8Sn");function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=Object(i.lazy)(()=>n.e("NuxOneClickSaveButtonCommon").then(n.bind(null,"ZAQh"))),j=Object(i.lazy)(()=>Promise.all([n.e(15),n.e("PersistentOneClickSaveCommon")]).then(n.bind(null,"f6y4"))),U=Object(i.lazy)(()=>Promise.all([n.e(11),n.e(15),n.e("PinBetterSaveCommon")]).then(n.bind(null,"fEA9"))),z=Object(i.lazy)(()=>n.e("PinPromoteButtonCommon").then(n.bind(null,"ewYc"))),q=Object(i.lazy)(()=>Promise.all([n.e(15),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"jHGc"))),W=Object(i.lazy)(()=>Promise.all([n.e(11),n.e("PinSaveButtonCommon")]).then(n.bind(null,"rO08"))),Y=Object(i.lazy)(()=>n.e("PinRepSendShareFlyoutButtonCommon").then(n.bind(null,"SCF0"))),G=Object(i.lazy)(()=>n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"nGh2"))),K=e=>{const{style:t={}}=e,n={...t,zIndex:c.a.pinActionWrapper};return a.a.createElement(d.c,{...e,dangerouslySetInlineStyle:{__style:n}})};class $ extends a.a.Component{constructor(...e){super(...e),F(this,"state",{isReactionBarShowing:!1}),F(this,"onToggleFlyout",()=>{const{isFlyoutOpen:e,onToggleFlyout:t}=this.props;t(!e)}),F(this,"handleOnSourceImageClick",()=>{const{imageSignature:e,requestContext:t,slotIndex:n}=this.props;Object(O.g)(13),new S.c(t,"smb_pin_stats_from_business_profile").enabled(),this.handleClickLogging(35,{grid_index:n,image_signature:e})}),F(this,"handleToggleHover",e=>{this.props.onToggleFlyout(!1,e)}),F(this,"handleToggleSubmenu",(e,t)=>{this.props.onToggleFlyout(e,t,"save")}),F(this,"handleDropdownClose",()=>{this.props.onToggleFlyout(!1)}),F(this,"handleClickthroughLogging",()=>{const{componentType:e,contextLogData:t,pin:n,slotIndex:i,viewType:a,viewParameter:r}=this.props,{id:o}=n;Object(x.a)(12,{...t,view:a,viewParameter:r,component:e,objectId:o,grid_index:i}),this.handleClickLogging(162)}),F(this,"handleSaveButtonClick",()=>{this.handleClickLogging(0)}),F(this,"handleLikeButtonClick",({event:e})=>{e&&e.stopPropagation&&(e.stopPropagation(),this.toggleReaction())}),F(this,"handleLikeButtonTouch",e=>{e&&e.stopPropagation&&(e.stopPropagation(),this.toggleReaction())}),F(this,"toggleReaction",()=>{const{boardActivity:e,updateReaction:t,reactionByMe:n,pin:i}=this.props;let a=0;0===n&&(a=1),t(e&&e.id||i.id,C.a.BOARD_ACTIVITY,n,a)})}getViewInfo(){const{viewType:e,showEditPinButton:t}=this.props,n=5===e,i=2===e,a=4===e;return{isBoardView:n,isSearchView:i,isProfileView:a,isOwnProfileView:a&&t,isOwnBoardView:(n||164===e)&&t,isOwnPinSearchView:i&&t}}cropImageStyles(){const{imageHeight:e,pin:t,truncatePinHeight:n}=this.props;let i={};const a=t.story_pin_data_id;if(t.image_crop&&n&&!a&&(0!==t.image_crop.min_y||1!==t.image_crop.max_y)){const n=t.image_crop.min_y,a=t.image_crop.max_y;i={marginTop:n>0?-1*n*e+"px":"0px",marginBottom:a<1?Math.round(-1*(1-a)*e)+"px":"0px"}}return i}handleClickLogging(e,t){const{componentType:n,contextLogData:i,viewParameter:a,viewType:r,pin:{id:o}}=this.props;Object(x.a)(101,{...i,...t,component:n,view:r,viewParameter:a,element:e,objectId:o})}renderSendShareButton(e){const{images:t,pin:{id:n},viewType:i}=this.props;return a.a.createElement(E.a,{id:"share-button"},a.a.createElement(w.a,null,a.a.createElement(Y,{imageSrc:t&&t["236x"].url,onClick:()=>this.handleClickLogging(98),onToggleFlyout:this.onToggleFlyout,onFlyoutDismiss:this.handleDropdownClose,pinId:n,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:this.props.isFlyoutOpen,viewType:i,backgroundColor:"transparentDarkGray",iconColor:"white",iconSize:e})))}renderEditButton(e){const{pin:{id:t,carousel_data:n},viewParameter:i,viewType:r}=this.props;return a.a.createElement(E.a,{id:"edit-button"},a.a.createElement(w.a,null,a.a.createElement(q,{component:0,pinId:t,onToggleModal:this.handleToggleHover,view:r,viewParameter:i,carouselSlotCurrentIndex:n&&n.index,style:e})))}renderEditAndSendRow(e,t){const n={bgColor:"transparentDarkGray",iconColor:"white",size:"md"};return a.a.createElement(K,{padding:1,position:"absolute",top:!0,left:!0,display:"flex"},e&&a.a.createElement(d.c,{padding:1},this.renderSendShareButton("md")),t&&a.a.createElement(d.c,{padding:1},this.renderEditButton(n)))}renderPrimaryButtons(){const{hideSaveButton:e,inNewUserOneTapExperiment:t,onSave:n,pin:i,showRepinButton:r,showPromoteButton:o,showCondensedInfo:s,showButtons:l,viewer:c,saveOptions:u,viewParameter:p,showClickthroughButton:h}=this.props,m="controlled"===u.type,g=u&&"persistentOneClickSave"===u.type,y=m&&u.saved&&u.save,f=r||o,b=u&&"none"!==u.type?u.renderPinSaveTooltip:void 0;if(!(y||l&&f||!!b||g))return h?a.a.createElement(d.c,{position:"absolute",bottom:!0,color:"transparentDarkGray",right:!0,marginBottom:2,marginRight:2,shape:"pill"},a.a.createElement(d.c,{paddingX:3,paddingY:1},a.a.createElement(d.K,{color:"white",size:"xs",weight:"bold"},"Open"))):null;if(e)return null;let _=null;const v=a.a.createElement(E.a,{id:"pin-save-button"},a.a.createElement(w.a,null,a.a.createElement(W,{onClickCallback:()=>{this.handleClickLogging(0)},onToggleModal:this.handleToggleHover,oneTapSave:m?u:void 0,pin:i,renderPinSaveTooltip:b})));o?_=a.a.createElement(E.a,{id:"promote-button"},a.a.createElement(w.a,null,a.a.createElement(z,{pin:i}))):"inline"===u.type?_=a.a.createElement(E.a,{id:"better-save"},a.a.createElement(w.a,null,a.a.createElement(U,{initialSelection:u&&u.initialSelection,useMasonryFlyout:!0,onSave:()=>{u&&u.onSave&&u.onSave(),n&&n()},onToggleFlyout:this.handleToggleSubmenu,onToggleModal:this.handleToggleHover,pin:i,renderPinSaveTooltip:b,viewParameter:p,renderSavedStatus:null}))):"persistentOneClickSave"===u.type?_=a.a.createElement(w.a,null,a.a.createElement(j,{onToggleModal:this.handleToggleHover,pin:i,saveOptions:u})):(y||r&&c.isAuth)&&(_=t?a.a.createElement(E.a,{id:"nux-one-click-save"},a.a.createElement(w.a,null,a.a.createElement(N,{onClickCallback:this.handleSaveButtonClick,pin:i}))):v),s&&(_=v);const T="inline"!==u.type||s?"auto":"100%";return a.a.createElement(K,{padding:2,position:"absolute",top:!0,right:!0,width:T},_)}renderGradientOverlay(e){const{showButtons:t}=this.props;return a.a.createElement(d.c,{position:"relative"},e,t&&a.a.createElement(d.c,{bottom:!0,left:!0,height:"100%",position:"absolute",right:!0,top:!0,width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:.3}}}))}renderClickThrough(e){const{denseViewSelected:t,domain:n,isEligibleForWebCloseup:i,pin:{id:r},sourceUrl:o}=this.props;return a.a.createElement(D,{denseViewSelected:t,domain:n,isEligibleForWebCloseup:i,sourceUrl:o,pinId:r,position:e,textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})}renderHolisticHoverOwnPinViewCondensed(){const{pin:{id:e},domain:t,sourceUrl:n,showEditPinButton:i}=this.props,r={size:"md",iconColor:"white",bgColor:"transparentDarkGray"},o={pinId:e,domain:t,sourceUrl:n,bgColor:"transparentDarkGray",...r};return a.a.createElement(K,{padding:1,width:"100%",position:"absolute",bottom:!0,left:!0,display:"flex",alignItems:"center",justifyContent:"around"},a.a.createElement(d.c,{padding:1},a.a.createElement(d.c,{width:40,height:40},a.a.createElement(b,{...o,onClick:this.handleClickthroughLogging}))),a.a.createElement(d.c,{padding:1},i&&this.renderEditButton(r)),a.a.createElement(d.c,{padding:1},this.renderSendShareButton("md")))}renderHolisticHoverOwnPinView(){const{showSendButton:e,showEditPinButton:t,pin:{id:n},domain:i,isEligibleForWebCloseup:r,sourceUrl:o}=this.props,s={iconColor:"white",bgColor:"transparentDarkGray",size:"sm"};return a.a.createElement(K,{padding:1,position:"absolute",bottom:!0,left:!0,display:"flex",width:"100%",alignItems:"center",height:50},a.a.createElement(d.c,{width:"65%"},a.a.createElement(D,{domain:i,isEligibleForWebCloseup:r,sourceUrl:o,pinId:n,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})),a.a.createElement(d.c,{width:"35%",display:"flex",justifyContent:"end"},t&&a.a.createElement(d.c,{padding:1},this.renderEditButton(s)),e&&a.a.createElement(d.c,{padding:1},this.renderSendShareButton("sm"))))}renderReactionButton(e,t){const{denseViewSelected:n}=this.props;return a.a.createElement(E.a,{id:"board-reactions-button"},a.a.createElement(w.a,null,a.a.createElement(I.a,{name:"group_boards_reactions",activate:!1},({anyEnabled:t,customActivate:i})=>a.a.createElement(G,{pin:e,activateReactionsExperiment:i,inReactionsExperiment:t,onShowReactionsBar:()=>{this.setState({isReactionBarShowing:!0})},onHideReactionsBar:()=>{this.setState({isReactionBarShowing:!1})},supportsReactionBar:!n}))))}renderSecondaryButtons(){const{showCondensedInfo:e}=this.props;return e?this.renderHolisticHoverOwnPinViewCondensed():this.renderHolisticHoverOwnPinView()}renderTopButtons(){const{pin:e,showReactions:t,showButtons:n,reactionByMe:r}=this.props,{isReactionBarShowing:o}=this.state;let s=null;if(t){const t=0!==r;if(n){const t=o?"100%":null;s=a.a.createElement(i.Fragment,null,a.a.createElement(K,{width:t,position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(e,r)),this.renderSecondaryButtons())}else t&&(s=a.a.createElement(K,{position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(e,r)))}else s=a.a.createElement(i.Fragment,null,n&&this.renderSecondaryButtons(),this.renderPrimaryButtons());return s}render(){const{currentlyPlayingVideo:e,children:t,isEligibleForAnalyticsCloseup:n,pin:{carousel_data:r,id:o,videos:s},selection:c,showButtons:u,viewParameter:p,viewType:h,componentType:m}=this.props,g=this.cropImageStyles(),b=!!s&&!!s.video_list,{duration:_=0}=s&&s.video_list&&s.video_list[Object.keys(s.video_list)[0]]||{};return a.a.createElement(d.c,{"data-test-id":r?"carousel-pin":"",position:"relative"},u&&r&&a.a.createElement(y.a,{pinId:o,componentType:m,viewParameter:p,viewType:h}),a.a.createElement(f.b,{deeplinkUrls:Object(P.m)(o),onClick:this.handleOnSourceImageClick,forceRefresh:1,extraData:{isReact:!0,reactData:this.props.pin,searchOptions:this.props.searchOptions},style:{cursor:"zoom-in",display:"block",position:"relative"},to:Object(H.b)(o,n||!1)},a.a.createElement(d.u,{shape:"rounded",wash:!0},a.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:g},minHeight:55},this.renderGradientOverlay(t))),a.a.createElement(d.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0})),c!==qe.NO_SELECTION&&a.a.createElement("div",{className:l()("pinSelectionBorder",{selected:c===qe.SELECTED})}),a.a.createElement(i.Fragment,null,this.renderTopButtons(),u||!b||e?null:a.a.createElement(K,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},a.a.createElement(T.a,{duration:_}))))}}F($,"propTypes",{buyableProduct:v.a.shape({id:v.a.string}),componentType:v.a.number.isRequired,contextLogData:v.a.shape({}),description:v.a.string.isRequired,domain:v.a.string,dominantColor:v.a.string,doneCount:v.a.number,imageHeight:v.a.number.isRequired,imageWidth:v.a.number.isRequired,inNewUserOneTapExperiment:v.a.bool,isEligibleForWebCloseup:v.a.bool,onSave:v.a.func,onToggleFlyout:v.a.func.isRequired,pin:v.a.shape({attribution:v.a.shape({author_name:v.a.string,provider_favicon_url:v.a.string}),buyable_product:v.a.shape({}),description:v.a.string,id:v.a.string.isRequired,image_url:v.a.string,image_crop:v.a.shape({max_y:v.a.number,min_y:v.a.number}),images:v.a.shape({"236x":v.a.shape({width:v.a.number,height:v.a.number,url:v.a.string}).isRequired,"474x":v.a.shape({width:v.a.number,height:v.a.number,url:v.a.string}),"736x":v.a.shape({width:v.a.number,height:v.a.number,url:v.a.string}),orig:v.a.shape({width:v.a.number,height:v.a.number,url:v.a.string})}),is_promoted:v.a.bool,link:v.a.string,place_summary:v.a.shape({name:v.a.string}),rich_summary:v.a.shape({display_name:v.a.string,favicon_link:v.a.string,site_name:v.a.string})}),pinsBoardEditableByViewer:v.a.bool.isRequired,pinTitle:v.a.string,requestContext:V.b,saveOptions:v.a.shape({type:v.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}).isRequired,searchOptions:v.a.shape({query:v.a.string.isRequired,scope:v.a.string.isRequired}),selection:v.a.oneOf(["NO_SELECTION","SELECTED","UNSELECTED"]).isRequired,showOnPinAnalyticsNUX:v.a.bool,showButtons:v.a.bool.isRequired,showCondensedInfo:v.a.bool,showEditPinButton:v.a.bool.isRequired,showPromoteButton:v.a.bool,showRepinButton:v.a.bool.isRequired,showSendButton:v.a.bool.isRequired,slotIndex:v.a.number,sourceUrl:v.a.string,truncatePinHeight:v.a.bool,viewer:v.a.shape({isAuth:v.a.bool,username:v.a.string,id:v.a.string}).isRequired,viewParameter:v.a.number,viewType:v.a.number,isFlyoutOpen:v.a.bool.isRequired,showClickthroughButton:v.a.bool}),F($,"defaultProps",{onToggleFlyout:()=>{},pinsBoardEditableByViewer:!1,showCondensedInfo:!1,showOnPinAnalyticsNUX:!1,showPromoteButton:!1});var X=Object(r.connect)((e,t)=>{const{pin:{id:n},boardActivity:i}=t,a=e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},r=Object(H.j)(n,a),o=i&&i.id||n,s=e.activityItems[o];let l=0;return s&&null!==s.reaction_by_me&&void 0!==s.reaction_by_me&&(l=s.reaction_by_me),{currentlyPlayingVideo:r,reactionByMe:l}},(e,t)=>({updateReaction:Object(B.bindActionCreators)(M.c,e)}))($),Z=n("q7Wf");function Q(e){const{feedbackType:t,topic:n}=e,i=e.pinner||{},r=i.full_name,o="topic"===t,s=!o&&"followed"===t,l=`/${i.username}/`,c=Object(Z.g)(n),u=`/search/pins/?q=${encodeURIComponent(c)}&rs=image_only_attribution`,p=o?u:l,h={topic:g.a._("From {topic}","attribution on pin rep"),followed:g.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:g.a._("Picked for you","attribution on pin rep"),pfy:g.a._("Picked for you","attribution on pin rep")}[t];if(!h)return null;if(s||o){const e=0===h.indexOf("{"),t=o?n:r,i=e?h.slice(h.indexOf("}")+1):h.slice(0,h.indexOf("{"));return e?a.a.createElement(d.c,{display:"inlineBlock",marginTop:1},a.a.createElement(f.b,{to:p},a.a.createElement(d.K,{inline:!0,size:"xs",truncate:!0,weight:"bold"},t)),a.a.createElement(d.K,{inline:!0,size:"xs"},i)):a.a.createElement(d.c,{display:"inlineBlock",marginTop:1},a.a.createElement(d.K,{inline:!0,size:"xs"},i),a.a.createElement(f.b,{to:p},a.a.createElement(d.K,{inline:!0,size:"xs",truncate:!0,weight:"bold"},t)))}return a.a.createElement(d.c,{display:"inlineBlock",marginTop:1},a.a.createElement(d.K,{inline:!0,size:"xs"},h))}var J=n("vvax");function ee({pin:e,feedbackType:t,imageOnlyAttribution:n,isHovering:i,isVideo:r,onClickThrough:o,sourceUrl:s}){const l=Object(P.m)(e.id),c=e.attribution||{},u=c.author_url||c.provider_url,p=c.author_name,h=c.rich_site_name||c.provider_name,m=p?Object(J.b)(g.a._("by {{ authorName }}","attribution on pin rep"),{authorName:p}):h,y=!m&&e.has_required_attribution_provider?e.domain:m,b=u||s,_=b&&y,v=i&&!_&&n&&!r&&!e.is_native&&"followed"!==t,w=(e.source_interest||{}).name,E="io-topic-attr-"+w;return a.a.createElement(a.a.Fragment,null,_&&a.a.createElement(d.c,{paddingY:1},a.a.createElement(d.K,{size:"sm",weight:"bold"},a.a.createElement(f.b,{deeplinkUrls:l,external:!0,onClick:o,pinId:e.id,stopPropagation:!0,style:{color:"#898989"},to:b},y))),n&&t&&a.a.createElement(d.c,{"data-test-id":E}),v&&t&&a.a.createElement(Q,{feedbackType:t,pinner:e.pinner,topic:w}))}var te=n("b9Z9");function ne({avatarUrl:e,creditNameLink:t,name:n=""}){return t?a.a.createElement(f.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.a,{name:n,src:e,size:"sm"})):a.a.createElement(d.a,{name:n,src:e,size:"sm"})}function ie({name:e,creditNameLink:t}){return a.a.createElement(d.c,null,t?a.a.createElement(f.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.K,{size:"xs",truncate:!0,weight:"bold"},e)):a.a.createElement(d.K,{size:"xs",truncate:!0,weight:"bold"},e))}function ae({title:e,link:t}){return e?a.a.createElement(d.c,null,t?a.a.createElement(f.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.K,{truncate:!0,size:"xs"},e)):a.a.createElement(d.K,{truncate:!0,size:"xs"},e)):null}var re=n("fc1g");const oe=32,se=e=>!!e.promoter&&!e.is_downstream_promotion;var le=Object(r.connect)(null,e=>({setMostRecentPin:t=>e(Object(re.b)(t))}))((function({hideTitle:e,pin:t,viewType:n,viewParameter:i,setMostRecentPin:r}){const{board:o,promoter:s}=t,l=t.pinner||{},c=se(t),u=t.promoter||l,p=()=>{r(t.id),Object(x.a)(101,{view:n,viewParameter:i,element:c?283:27,objectId:t.id})};let h,m,y,b,_,v;c&&s?(h=`/${s.username}/`,m=g.a._("Promoted by"),b=s.full_name,v=s.image_small_url):(h=o&&o.url,m=l.full_name,b=o&&o.name&&"protected"!==o.privacy?o.name:"",v=l.image_small_url,y=`/${l.username}/`,_=o?o.url:"");const w=!c&&!!s,E=a.a.createElement(d.c,{display:"flex",direction:"row",alignItems:"center",marginLeft:-1,marginRight:-1},a.a.createElement(d.c,{paddingX:1},a.a.createElement(te.a,{user:u,username:u&&u.username,avatarSize:oe,isDarkPromoter:w,pinId:t.id,viewParameter:i},a.a.createElement(ne,{avatarUrl:v,creditNameLink:y,name:m}))),a.a.createElement(d.c,{paddingX:1,overflow:"hidden"},a.a.createElement(ie,{creditNameLink:y,name:m}),!e&&a.a.createElement(ae,{link:_,title:b})));return!h||y||_?E:a.a.createElement(f.b,{className:"underlineLink",stopPropagation:!0,onClick:p,to:h},E)}));const ce=Object(i.lazy)(()=>n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"TbX8"))),de=e=>e&&e.board_activity&&e.board_activity.id||e.id;var ue=function({pin:e,feedbackType:t,hideAttribution:n,imageOnlyAttribution:i,isHovering:r,imageOnly:o,isVideo:s,onClickThrough:l,onReactionReplyClick:u,showCredits:p,showPinReactionsReply:h,sourceUrl:m,viewParameter:g,viewType:y}){const f=e.promoter||!o&&(p||"followed"===t),b=e.board&&e.board.should_show_board_activity;let _=f&&!n;("promoted"===t||e.promoter&&!e.is_downstream_promotion)&&(_=!0);const v=de(e);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ee,{pin:e,feedbackType:t,imageOnlyAttribution:i,isHovering:r,isVideo:s,onClickThrough:l,sourceUrl:m}),(f||b)&&a.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{zIndex:c.a.max,position:"relative"}},paddingY:1},!b&&_&&a.a.createElement(le,{hideTitle:!!b,pin:e,viewParameter:g,viewType:y}),b&&a.a.createElement(d.c,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},a.a.createElement(w.a,null,a.a.createElement(ce,{pinId:e.id,board:e.board,activityId:v,showReply:h})))))},pe=n("+tKw");var he=Object(r.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(({carousel_data:e,description:t})=>{let n=t;if(e){const{carousel_slots:t=[],index:i}=e;t[i]&&t[i].details&&(n=t[i].details)}const i=e?{height:"39px",overflow:"hidden"}:{};return a.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:i},paddingY:1},a.a.createElement(d.K,{size:"sm",weight:"bold"},a.a.createElement(pe.a,{text:n,options:{hashtags:{appendText:`${n}`,source:"hashtag_pinrep"}}})))}),me=n("qhFy");var ge=Object(r.connect)(({pins:e},{pinId:t})=>({carouselData:e[t]&&e[t].carousel_data}),()=>({}))(({carouselData:e,handleOneTapLogging:t,pinDeeplinkUrls:n,pinId:i,sourceUrl:r})=>{let o,s="one-tap-desktop",l=r;if(e){const{carousel_slots:t=[],id:n,index:i}=e;t[i]&&t[i].link&&(l=t[i].link),o={carousel_slot_id:t[i]&&t[i].id,carousel_data_id:n,carousel_slot_index:i},s+="-carousel"}return a.a.createElement(I.a,{name:"ads_desktop_whitespace_gaps"},({anyEnabled:e})=>a.a.createElement("div",{"data-test-id":e?"oneTapPromotedPin":"otpp"},a.a.createElement(E.a,{id:s},a.a.createElement(f.b,{auxData:o&&o,className:"oneTapNavigateLink",deeplinkUrls:n,external:!0,onClick:t,pinId:i,stopPropagation:!0,to:l}))))});function ye({buyableProduct:e,showProductInfo:t,richSummary:n}){if(!t)return null;let i,r;if(e){const{display_active_min_price:t,display_active_max_price:n,is_available:a}=e;r=a,i=t===n?t:`${t} - ${n}`}else if(n&&(n.products||[]).length>0){const e=n.products[0].offer_summary||{},{availability:t,price:a}=e;i=a,1===t?r=!0:2===t&&(r=!1)}return i?a.a.createElement(d.c,{display:"flex",paddingY:1},a.a.createElement(d.c,{marginRight:2},a.a.createElement(d.K,{size:"sm"},i)),void 0!==r&&a.a.createElement(d.K,{size:"sm",color:r?"darkGray":"gray"},r?g.a._("In stock","A product Pin that is available"):g.a._("Out of stock","A product Pin that is out of stock"))):null}const fe=76;var be=function({chips:e}){return a.a.createElement(d.c,{display:"flex",direction:"row",justifyContent:"between"},e.map(e=>{const t=e.images["750x"]||{};return a.a.createElement(d.c,{marginTop:1,key:e.id},a.a.createElement(f.b,{stopPropagation:!0,to:`/pin/${e.id}/`},a.a.createElement(d.u,{shape:"rounded",width:fe,height:fe,wash:!0},a.a.createElement(d.p,{alt:"",naturalHeight:t.height,naturalWidth:t.width,src:t.url,fit:"cover"}))))}))},_e=n("4+TC"),ve=n("wIXi"),we=n("Sci3"),Ee=n("NhEX"),Te=n("/90Z"),Ce=n("HOY+"),Pe=n("bZS0"),Ie=n("Pezf");function Se({richSummary:e}){return a.a.createElement(d.c,{display:"flex"},!!e.display_cook_time&&a.a.createElement(d.c,{alignItems:"center",display:"flex"},a.a.createElement(d.n,{icon:"clock",accessibilityLabel:g.a._("cooking time","time it takes to cook a recipe"),color:"darkGray",size:10,inline:!0}),a.a.createElement(d.c,{paddingX:1},a.a.createElement(d.K,{inline:!0,size:"sm"},!!e.display_cook_time&&Object(Pe.a)(Object(Ie.b)(e.display_cook_time))))))}var Oe=n("tXBB"),xe=n("Zxas"),Re=n("zwad"),ke=n("2qKt"),Ae=n("0nTG"),Le=n("2rEd"),De=n("YxyV"),Ve=n("vZlu"),Me=n("dtw8"),Be=n("joD6"),He=n("0S8y");function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return qe})),n.d(t,"a",(function(){return Ye}));const Ne=Object(i.lazy)(()=>n.e("PinFeedbackButtonCommon").then(n.bind(null,"ktVW"))),je=Object(i.lazy)(()=>n.e("PinFeedbackConfirmationCommon").then(n.bind(null,"ZM4i"))),Ue=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"2rEd"))),ze=228,qe={NO_SELECTION:"NO_SELECTION",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"},We=e=>{const{aggregated_pin_data:{creator_analytics:t},creator_analytics:n,story_pin_data_id:i}=e;return!n||!!!i&&t?t:n},Ye={boardCount:v.a.number,carouselIndex:v.a.number,componentType:v.a.number,contextLogData:v.a.shape({}),createdAt:v.a.string,debugImpressionStarted:v.a.bool,debugImpressionLogged:v.a.bool,dispatch:v.a.func,feedbackText:v.a.shape({title:v.a.oneOfType([v.a.string,v.a.arrayOf(v.a.node)]),subTitle:v.a.oneOfType([v.a.string,v.a.arrayOf(v.a.node)])}),hideFeedbackButton:v.a.bool,hideHover:v.a.bool,showImageOnly:v.a.bool,isShareable:v.a.bool,showCondensedInfo:v.a.bool,feedback:v.a.shape({type:v.a.oneOf(["promoted","followed","topic","pfyBoard","pfy","search","newsHub","default"]).isRequired,data:v.a.shape({})}),lowResOnly:v.a.bool,highResOnly:v.a.bool,onError:v.a.func,onLoad:v.a.func,pin:ve.a.isRequired,pinsBoardEditableByViewer:v.a.bool,router:v.a.shape({push:v.a.func.isRequired}),saveOptions:v.a.shape({type:v.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}),savedInfo:v.a.shape({boardId:v.a.string,localPinId:v.a.string,sectionId:v.a.string,title:v.a.string,url:v.a.string}),searchOptions:v.a.shape({query:v.a.string.isRequired,scope:v.a.string.isRequired}),selection:v.a.oneOf([qe.NO_SELECTION,qe.SELECTED,qe.UNSELECTED]),requestContext:V.b,showCredits:v.a.bool,showFeedback:v.a.bool,showPinReactionsReply:v.a.bool,showProductInfo:v.a.bool,slotIndex:v.a.number.isRequired,truncatePinHeight:v.a.bool,viewer:v.a.shape({id:v.a.string,isAuth:v.a.bool,isPartner:v.a.bool,username:v.a.string}),viewParameter:v.a.number,viewType:v.a.number};class Ge extends a.a.Component{constructor(...e){super(...e),Fe(this,"state",{isHovering:!1,flyoutShown:!1,flyoutSource:"send",isNewlySaved:!1,savedInfo:this.props.savedInfo}),Fe(this,"onPinRepClick",e=>{const{pin:{id:t,is_promoted:n},requestContext:i,router:a,viewer:r,setCurrentVideo:o,videosAutoplaying:s}=this.props,l=Object(H.b)(t,this.isEligibleForAnalyticsCloseup());Object(H.j)(t,s)&&(0===this.currentVideoCurrentTime||this.currentVideoCurrentTime)&&o({pinId:t,isPromoted:n,currentTime:this.currentVideoCurrentTime});const c=e.target;if(!c||!c.nodeName||!c.parentElement)return;const d=new p.b(this.context.userAgent.raw,this.context.userAgent.platform);if(d.shouldDeepLink(document.referrer,this.context.userAgent,r.isAuth))return e.preventDefault(),void d.navigateToDeepLink(this.context.unauthId,Object(P.m)(t));const u=c.parentElement,h=c.nodeName,m=u.nodeName,g=u.parentElement&&u.parentElement.nodeName;"A"!==h&&"A"!==m&&"BUTTON"!==h&&"BUTTON"!==m&&"A"!==g&&"BUTTON"!==g&&(new S.c(i,"smb_pin_stats_from_business_profile").enabled(),e.metaKey||e.ctrlKey?(e.preventDefault(),window.open(l)):a.push(l))}),Fe(this,"getComponentType",()=>this.props.componentType||0),Fe(this,"getSourceURL",()=>{const{pin:e}=this.props,{link:t,tracked_link:n}=e;return n||t}),Fe(this,"getPinTypes",()=>{const{pin:e}=this.props,{attribution:t,buyable_product:n,carousel_data:i,embed:a,is_collage_pin:r,is_eligible_for_web_closeup:o,rich_summary:s,videos:l}=e,c=[];i&&c.push("carousel"),o&&c.push("oneTap"),Object(H.i)(l)&&c.push("video");const d=a||t&&t.embed||null;return d&&"gif"===d.type&&c.push("gif"),d&&d.src&&!d.type&&c.push("embeddedVideo"),(n||s&&"product"===s.type_name)&&c.push("product"),s&&"recipe"===s.type_name&&c.push("recipe"),r&&c.push("collage"),c}),Fe(this,"feedbackHelpers",Object(m.a)({i18n:g.a,interpolateNamedTemplate:J.b})),Fe(this,"handleSave",()=>{this.setState({isHovering:!0})}),Fe(this,"handleOneTapLogging",()=>{const{contextLogData:e,pin:t}=this.props,{id:n}=t,i=o.a.getInstance(),a=i.getViewFromContext();this.handleClickthroughLogging(!0),Object(x.a)(13,{...e,closeup_navigation_type:"web_closeup",objectId:n,component:0,view:3}),i.addViewToContext(a)}),Fe(this,"_getPrefetchCompletionPercent",e=>{if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:t,totalAssets:n}=window.prefetchCompletion[e];return n?(t/n*100).toFixed(3).toString():"-1"}),Fe(this,"handleClickthroughLogging",e=>{const{contextLogData:t,pin:{id:n,link:i},slotIndex:a,viewType:r,viewParameter:o}=this.props;Object(x.a)(12,{...t,view:r,viewParameter:o,component:this.getComponentType(),objectId:n,grid_index:a,pin_id:n,prefetch_percentage_complete:e?this._getPrefetchCompletionPercent(i):null})}),Fe(this,"handleReactionReplyClick",e=>()=>this.props.router.push(e)),Fe(this,"handleToggleFlyout",(e,t=!1,n)=>{const i=!(!e&&!t);this.setState({flyoutShown:e,isHovering:i,flyoutSource:n})}),Fe(this,"handleMouseOver",()=>{this.state.isHovering||this.setState(()=>({isHovering:!0}))}),Fe(this,"handleMouseLeave",()=>{this.state.isHovering&&this.setState(()=>({isHovering:!1}))}),Fe(this,"handleCurrentVideoCurrentTimeChanged",e=>{const{pin:t,videosAutoplaying:n}=this.props,{id:i}=t;Object(H.j)(i,n)&&(this.currentVideoCurrentTime=e.time)})}static getDerivedStateFromProps(e,t){return e.savedInfo&&t.savedInfo!==e.savedInfo?{isNewlySaved:!0,savedInfo:e.savedInfo}:null}get canDelete(){const{access:e}=this.props.pin;return(e||[]).includes("delete")}get isOwnPin(){const{access:e}=this.props.pin;return(e||[]).includes("write")}getTruncatedString(e){const{pin:{is_promoted:t}}=this.props,n=t?60:50;return e&&Object(xe.a)(e.trim(),n)||""}getPinTitle(){const{pin:{carousel_data:e,title:t,buyable_product:n,rich_summary:i}}=this.props,a=i&&"mobile application"!==i.type_name;if(this.isOwnPin&&!e)return"";if(e){const{carousel_slots:t=[],index:n}=e;if(t[n]&&t[n].title)return t[n].title.trim()}return this.getTruncatedString(t||a&&i.display_name||n&&n.title)}getFeedbackType(){const{feedback:e,viewParameter:t,pin:n}=this.props;return this.feedbackHelpers.getFeedbackType({board:n.board,feedback:e,viewParameter:t,pin:n,pinner:n.pinner})}isEligibleForAnalyticsCloseup(){const{requestContext:e,viewParameter:t,viewer:n}=this.props,i=92===t,a=43===t;let r=!1;return this.isOwnPin&&n.isPartner&&!i&&!a&&(r=new S.c(e,"smb_pin_stats_from_business_profile").enabledWithNoActivation()),r}render(){const{boardCount:e,carouselIndex:t,contextLogData:n,createdAt:i,debugImpressionLogged:r,debugImpressionStarted:o,denseViewSelected:s,experience:p,feedback:m,feedbackText:y,isHomefeedContextualMenuTooltipExperience:f,isNewOrResurrectedNonPartner:b,isSocialSeasonalBoard:_,hideAttribution:v,hideFeedbackButton:T,showCondensedInfo:C,showFeedbackOverlay:O,isShareable:x,hideHover:R,hideSaveButton:k,lowResOnly:A,highResOnly:L,onError:D,onLoad:V,pin:M,pinsBoardEditableByViewer:B,saveOptions:F,savedInfo:N,searchOptions:j,selection:U=qe.NO_SELECTION,showImageOnly:z,slotIndex:q,truncatePinHeight:W,viewer:Y,viewParameter:G,viewType:K,showCredits:$,showFeedback:Z,showProductInfo:Q,showPinReactionsReply:J,showPinStats:ee,showSavedInfo:te,undoAction:ne,undoText:ie,requestContext:ae}=this.props,re="boolean"==typeof z?z:b,oe=b,{ad_match_reason:se,aggregated_pin_data:ce,board:de,board_activity:fe,buyable_product:ve,carousel_data:Pe,creator_analytics:Ie,debug_info_html:xe,description:ke="",domain:Ve,dominant_color:Me,grid_title:Be,id:Fe,image_signature:Ye,images:Ge,is_quick_promotable:Ke,is_eligible_for_web_closeup:$e,pinner:Xe={},promoted_is_removable:Ze,promoter:Qe,recommendation_reason:Je,rich_summary:et,source_interest:tt,category:nt}=M,{flyoutShown:it,flyoutSource:at,isHovering:rt,isNewlySaved:ot}=this.state,st=this.getSourceURL(),lt=((p||{}).display_data||{}).lite,ct=(this.isOwnPin||this.canDelete)&&!lt,dt=!lt&&x,ut={...n,...Object(Ae.a)(M,n)},{done:pt}=(ce||{}).aggregated_stats||{},{pin_tags_chips:ht}=ce||{},mt=Ge&&Ge["236x"].height,gt=Ge&&Ge["236x"].width,yt=this.getPinTypes(),ft=Object(H.g)(M),{isCarousel:bt,isOneTap:_t,isRecipe:vt,isStoryPin:wt,isVideo:Et}=Object(Le.getEligiblePinTypes)(yt),Tt=wt?"":this.getTruncatedString(Be),Ct=this.getPinTitle(),Pt=this.getTruncatedString(ke),It=re,St=!It&&"string"==typeof Be&&!Pe,Ot=!It&&!Ct&&!St,xt=!(It||!Ct||St||_),Rt=l()("PinRep","Module","Pin","hasAttribution","summary","fullWidth",{flyoutShown:it}),kt=Object(De.h)(M),At=yt.length>0,Lt=!_t&&!bt&&Et||vt&&!bt&&(!M.rich_summary||!M.rich_summary.aggregate_rating||!M.rich_summary.aggregate_rating.review_count),Dt=!_&&xt&&Ct.length>0,Vt=!_&&Ot&&Pt.length>0,Mt=!Dt&&!Vt&&_,Bt=_&&yt.includes("gif"),Ht=Y.isAuth&&Y.isEmployee&&xe,Ft=0!==Object.keys(Ie||{}).length||0!==Object.keys(ce||{}).length&&0!==Object.keys(ce.creator_analytics||{}).length,Nt=F||(!ct&&void 0!==e&&e>1?{type:"inline"}:{type:"classic"}),jt=Y.isAuth&&dt&&x&&!Mt,Ut="persistentOneClickSave"===Nt.type,zt=Nt&&Nt.savedInfo&&Nt.savedInfo.title||"",qt=this.getFeedbackType();let Wt=Ve;if(Pe){const e=t||Pe.index||0,{carousel_slots:n=[]}=Pe,i=n[e]&&n[e].link||"";Wt=(Wt=i&&Re.a.parse(i).hostname)&&Wt.replace("www.","")||Ve}const Yt=M.is_native||M.promoter||!It&&($||"followed"===qt),Gt=M.board&&M.board.should_show_board_activity,Kt=Gt&&Yt&&!v,$t=1===q&&!!f,Xt=new S.c(ae,"px_pinstats_90_day_default_on_grid").enabled();return a.a.createElement(d.c,{position:"relative"},a.a.createElement("div",{className:Rt,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"data-test-id":"pin","data-test-pin-id":M.id},N&&te&&a.a.createElement(E.a,{id:"savedInfo"},a.a.createElement(d.c,{width:"172px",marginTop:Ut?3:2,paddingY:3,paddingX:3,position:"absolute",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{zIndex:c.a.saved}}},a.a.createElement(_e.a,{isNewlySaved:ot,name:Ut?zt:N.title,url:Ut?Nt&&Nt.savedInfo&&Nt.savedInfo.url:N.url}))),a.a.createElement(u,{debugImpressionLogged:r,debugImpressionStarted:o,slotIndex:this.props.slotIndex},a.a.createElement("div",{className:l()("pinWrapper",Z&&"disableHover"),"data-test-id":"pinWrapper",onClick:this.onPinRepClick},Kt&&Gt&&a.a.createElement(d.c,{marginBottom:2},a.a.createElement(le,{hideTitle:!!Gt,pin:M,viewParameter:G,viewType:K})),$e&&a.a.createElement(ge,{pinDeeplinkUrls:Object(P.m)(Fe),handleOneTapLogging:this.handleOneTapLogging,pinId:Fe,sourceUrl:st}),a.a.createElement(I.a,{name:"web_nux_one_tap_save",isEligible:Y.isAuth&&Object(He.c)({user:Y,days:7})},({anyEnabled:e})=>a.a.createElement(X,{boardActivity:fe,buyableProduct:ve,componentType:this.getComponentType(),contextLogData:ut,denseViewSelected:s,description:ke,domain:Wt,dominantColor:Me,doneCount:pt,hideSaveButton:k,imageHeight:mt,imageSignature:Ye,images:Ge,imageWidth:gt,showReactions:Gt,isEligibleForWebCloseup:$e,isEligibleForAnalyticsCloseup:this.isEligibleForAnalyticsCloseup(),inNewUserOneTapExperiment:e,onSave:this.handleSave,onToggleFlyout:this.handleToggleFlyout,pin:M,pinsBoardEditableByViewer:B,pinTitle:Ct,requestContext:ae,saveOptions:Nt,searchOptions:j,selection:U,showButtons:!!(rt&&!R||it),showCondensedInfo:C,showEditPinButton:ct,showPromoteButton:Ke,showRepinButton:!Ke&&!Ze,showSendButton:jt,slotIndex:q,sourceUrl:st,truncatePinHeight:W,viewer:Y,viewParameter:G,viewType:K,isFlyoutOpen:it&&"save"!==at},a.a.createElement(I.a,{name:"ads_desktop_video_ads",isEligible:Et,activate:!1},({anyEnabled:e})=>!Et||!e&&ft?a.a.createElement(me.a,{lowResOnly:A,highResOnly:L,onLoad:V,onError:D,pin:M,saved:!!N,animateGif:Bt}):a.a.createElement(Ce.a,{inAdsDesktopVideoExperiment:e,isExperimentalPinRep:!1,lowResOnly:A,highResOnly:L,onLoad:V,onError:D,pin:M,saved:!!N,onTimeChange:this.handleCurrentVideoCurrentTimeChanged,viewType:K,viewParameter:G,currentTimeFromPinRep:this.currentVideoCurrentTime})))),!!ht&&!C&&ht.length>=3&&a.a.createElement(be,{chips:ht.slice(0,3)}),Mt&&a.a.createElement(d.c,{marginTop:2,marginBottom:3,width:"100%"},a.a.createElement(d.c,{width:ze,margin:"auto"},a.a.createElement(Oe.a,{onFlyoutDismiss:()=>this.handleToggleFlyout(!it&&"save"!==at),onToggleFlyout:()=>this.handleToggleFlyout(!it&&"save"!==at),pinId:M.id,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:it&&"save"!==at,viewType:K}))),(!It||qt)&&!C&&!Mt&&(At||ee||Dt||Vt||Q||i||St||Ht||qt)&&a.a.createElement(d.c,{display:"flex",direction:"row",marginTop:1},a.a.createElement(d.c,{paddingX:2,flex:"grow",width:"100%"},ee&&Ft&&a.a.createElement(we.a,{stats:We(M),isVideo:Et,isStoryPin:!!M.story_pin_data_id,show90Days:Xt}),i&&!ft&&a.a.createElement(d.c,{paddingY:1},a.a.createElement(d.K,{color:"darkGray",size:"xs"},g.a.getHumanizedTimesince(i))),At&&!Lt&&a.a.createElement(d.c,{"data-test-id":"pin-type",minHeight:bt&&_t?40:24},a.a.createElement(w.a,null,a.a.createElement(Ue,{componentType:0,viewParameter:G,viewType:K,pinId:Fe,pin:M,types:yt}))),a.a.createElement(d.c,{display:"flex",justifyContent:"between"},a.a.createElement(d.c,{column:12},!!M.story_pin_data_id&&a.a.createElement(d.c,{paddingY:1},a.a.createElement(Te.a,{icon:"story-pin",pinId:Fe})),a.a.createElement(ye,{buyableProduct:ve,richSummary:et,showProductInfo:Q}),St&&Tt.length>0&&a.a.createElement(d.c,{paddingY:1},a.a.createElement(d.K,{size:"sm",weight:"bold"},a.a.createElement(pe.a,{text:Tt,options:{hashtags:{appendText:Tt,source:"hashtag_pinrep"}}}))),xt&&Ct.length>0&&a.a.createElement(Ee.a,{title:Ct,pinId:Fe}),Ot&&Pt.length>0&&a.a.createElement(he,{description:Pt,pinId:Fe}),vt&&a.a.createElement(Se,{richSummary:et}),a.a.createElement(ue,{feedbackType:qt,hideAttribution:v,imageOnly:It,imageOnlyAttribution:oe,isHovering:rt,isVideo:Et,onClickThrough:this.handleClickthroughLogging,onReactionReplyClick:this.handleReactionReplyClick,pin:M,showCredits:$,showPinReactionsReply:J,sourceUrl:st,viewParameter:G,viewType:K}))),Ht&&a.a.createElement(d.c,{paddingY:1},a.a.createElement("pre",null,xe))),a.a.createElement(d.c,{display:"flex",direction:"column",alignItems:"center"},!T&&qt&&a.a.createElement(d.c,{"data-test-id":"feedback-button",display:"flex",justifyContent:"end",position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:c.a.max}},width:24,height:24},a.a.createElement(w.a,null,a.a.createElement(Ne,{ad_match_reason:se,bestPinImgSrc:kt,board:de,feedbackData:m&&m.data||{},feedbackType:qt,hideDownload:Et,isHomefeedContextualMenuTooltip:$t,pinDescription:Pt,pinTitle:Ct,pinId:Fe,pinCategory:nt,pinImage:Ge&&Ge["236x"].url,pinner:Xe,promoter:Qe,recommendationReason:Je,reportPin:Object(h.a)({pin:M,viewParameter:G,viewType:K}),sourceInterest:tt,viewParameter:G,viewType:K})))))))),a.a.createElement(I.a,{name:"web_homefeed_control_panel_nag",activate:!1},({anyEnabled:e})=>a.a.createElement(I.a,{name:"web_homefeed_control_panel_pin_feedback"},({anyEnabled:t})=>!!Z&&a.a.createElement(w.a,null,a.a.createElement(je,{feedbackText:y,feedbackType:qt,pinId:Fe,pinImage:Ge&&Ge["236x"].url,undoAction:ne,undoText:ie,isHomefeedControlPanelExp:e||t,showFeedbackOverlay:O})))))}}Fe(Ge,"propTypes",Ye),Fe(Ge,"contextTypes",{unauthId:v.a.string.isRequired,userAgent:v.a.shape({platform:v.a.string.isRequired,platformVersion:v.a.arrayOf(v.a.number),raw:v.a.string.isRequired})}),Fe(Ge,"defaultProps",{pinsBoardEditableByViewer:!1,showCondensedInfo:!1,truncatePinHeight:!0,showSavedInfo:!0});t.c=Object(B.compose)(Me.withRouter,Be.a,Object(ke.a)(12),V.e,Object(r.connect)(({boards:e,experiences:t,pins:n,ui:i,viewer:a},{pin:{id:r,board:o}})=>{const s=n[r],l=a.isAuth?a.boardCount:void 0,c=o&&o.id,d=e.content[c],u=d&&(d.access||[]).includes("write"),{isSocialSeasonalBoard:p=!1}=e,h=a.isAuth&&(Object(He.c)({user:a})||Object(He.d)({user:a}))&&!a.isPartner;let m;if(s){const{carousel_data:e}=s;m=e&&e.index}const g=t&&t.eligibleExperiences&&t.eligibleExperiences[1000116]&&501093===t.eligibleExperiences[1000116].experience_id,y=i.app?i.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}};return{isSocialSeasonalBoard:p,boardCount:l,carouselIndex:m,isHomefeedContextualMenuTooltipExperience:g,feedbackText:s&&s.feedbackText,hideSaveButton:s&&s.pinner&&s.pinner.blocked_by_me,isNewOrResurrectedNonPartner:h,isShareable:!d||"secret"!==d.privacy,pinsBoardEditableByViewer:u,savedInfo:s&&s.savedInfo,showFeedback:s&&s.showFeedback,showFeedbackOverlay:s&&s.showFeedbackOverlay,undoAction:s&&s.undoAction,undoText:s&&s.undoText,videosAutoplaying:y}},(e,t)=>({setCurrentVideo:t=>e(Object(Ve.c)(t))})))(Ge)},US8k:function(e,t,n){function i(e){const t=Math.round(e/1e3),n=t%60;return Math.floor(t/60)+":"+(n<10?"0":"")+n}n.d(t,"a",(function(){return i}))},Warx:function(e,t,n){n.d(t,"a",(function(){return r}));const i=80,a="…";function r(e,t={}){const{maxLength:n=i,suffix:r=a}=t;return e.length<=n?e:e.substring(0,n-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+r}},ZVOf:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("eOdZ"),a=n("/X16");function r(e,t){return i.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function o(e,t){return{type:a.a.USER_FOLLOW,payload:{id:e,value:t}}}function s(e,t=null){return n=>{r(e,t).callCreate().catch(()=>n(o(e,!1))),n(o(e,!0))}}function l(e,t=null){return n=>{r(e,t).callDelete().catch(()=>n(o(e,!0))),n(o(e,!1))}}},Zxas:function(e,t,n){n.d(t,"a",(function(){return r}));const i=80,a="…";function r(e,t=i,n=a){let r;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t])r=e.substring(0,t);else{const n=e.lastIndexOf(" ",t);r=e.substring(0,n)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+n}},aFfM:function(e,t,n){n.d(t,"a",(function(){return y}));var i=n("q1tI"),a=n.n(i),r=n("ulZh"),o=n.n(r),s=n("U4JR"),l=n("n6mq");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=1e3,u=300,p=1e3,h=250,m=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,n)=>!Array.isArray(e)||t.type!==e[n].type||t.src!==e[n].src):t!==e);function g(){return(new Date).getTime()}class y extends a.a.PureComponent{constructor(...e){super(...e),c(this,"state",{canPlayVideo:!1,isManifestParsed:!1}),c(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;this.videoPlayerRef=e,t&&t(e),this.videoPlayerRef&&this.videoPlayerRef.video&&this.videoPlayerRef.video.addEventListener("canplay",()=>{this.setState({canPlayVideo:!0})})}),c(this,"currentVideoTime",0),c(this,"hls",null),c(this,"playbackPerformance",{fatalErrorMsg:"",firstLevelFetchTime:0,firstFragmentParsedTime:0,hasFatalError:!1,levelWatchDurationsMs:[],numStalls:0,rebufferingDurationMs:0,videoCreatedTime:0}),c(this,"initializeHls",()=>{this.destroyHls();const{src:e,hlsConfig:t}=this.props,n=new o.a(t);n.loadSource(e),this.videoPlayerRef&&n.attachMedia(this.videoPlayerRef.video),n.on(o.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0}),this.startVideoWatchTimings()}),n.on(o.a.Events.FRAG_PARSED,(e,t)=>{this.playbackPerformance.firstFragmentParsedTime||(this.playbackPerformance.firstFragmentParsedTime=g())}),n.on(o.a.Events.LEVEL_LOADING,(e,t)=>{this.playbackPerformance.firstLevelFetchTime||(this.playbackPerformance.firstLevelFetchTime=g())}),n.on(o.a.Events.ERROR,(e,t)=>{t.fatal&&(this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.fatalErrorMsg=t.details),t.details===o.a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.playbackPerformance.numStalls+=1,t.buffer&&(this.playbackPerformance.rebufferingDurationMs+=t.buffer*p))}),this.hls=n}),c(this,"destroyHls",()=>{const{hls:e}=this;e&&e.destroy(),window.clearInterval(this.videoTimeIntervalId)}),c(this,"startVideoWatchTimings",()=>{window.clearInterval(this.videoTimeIntervalId),this.videoTimeIntervalId=window.setInterval(()=>{if(!this.hls||this.hls.currentLevel<=0||!this.videoPlayerRef||!this.videoPlayerRef.video)return;const e=this.videoPlayerRef.video.currentTime*p,{levelWatchDurationsMs:t}=this.playbackPerformance;if(t.length){if(this.hls.currentLevel!==t[t.length-1].level){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0})}else if(e<this.currentVideoTime||e-this.currentVideoTime>u){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t[n].lastStartSegmentTime=e}}else t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0});this.currentVideoTime=e},h)})}componentDidMount(){this.playbackPerformance.videoCreatedTime=g(),this.initializeHls()}componentDidUpdate(e){const{src:t}=this.props;m(e.src,t)&&this.initializeHls()}componentWillUnmount(){const{firstLevelFetchTime:e,firstFragmentParsedTime:t,hasFatalError:n,levelWatchDurationsMs:i,numStalls:a,rebufferingDurationMs:r,videoCreatedTime:o}=this.playbackPerformance,l=this.videoPlayerRef&&this.videoPlayerRef.video;if(this.hls&&l&&i.length>0){const c=this.hls.levels,u=c[i[0].level],h=l.currentTime*p;i[i.length-1].duration+=h-i[i.length-1].lastStartSegmentTime;const m=i.reduce((e,t)=>{return e+t.level*c[t.level].bitrate*(t.duration||0)/p},0),g=i.reduce((e,t)=>e+(t.duration||0),0);Object(s.a)(3606,{eventData:{videoPerformanceData:{startupTimeMs:t-e,startupLatencyMs:t-o,nativeVideoDurationMs:l.duration*p,startupVariantKbps:u.bitrate/d,startupPlayerWidth:l.clientWidth,startupPlayerHeight:l.clientHeight,startupVariantWatchedDurationMs:i[0].duration,startupVariantWidth:u.width,isCellular:!1,fatalError:n,averageVideoKbps:m/(g/p),overallWatchedDurationMs:g,numberOfStalls:a,rebufferRate:r/g}}})}this.destroyHls()}render(){const{playing:e,hlsConfig:t,setVideoRef:n,src:i,...r}=this.props,{canPlayVideo:o,isManifestParsed:s}=this.state;return a.a.createElement(l.Q,{...r,ref:this.setVideoPlayerRef,playing:s&&o&&e,src:i})}}},b9Z9:function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("n6mq");const o=136,s={__style:{opacity:.5}};function l({isHorizontalDesign:e}){return e?a.a.createElement(r.c,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"midnight",height:"100%",width:"100%",flex:"grow"}),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"olive",width:"100%",flex:"grow"}),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"maroon",width:"100%",flex:"grow"})):a.a.createElement(r.c,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"midnight",height:"100%",flex:"grow"}),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{display:"flex",height:o,direction:"column",flex:"grow"},a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"olive",width:"100%",flex:"grow"}),a.a.createElement(r.c,{color:"white",height:"2px",flex:"none"}),a.a.createElement(r.c,{dangerouslySetInlineStyle:s,color:"maroon",width:"100%",flex:"grow"})))}var c=n("Ye/N");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=136,p={__style:{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.43) 0%, rgba(0,0,0,0) 60%)"}};class h extends i.PureComponent{constructor(...e){super(...e),d(this,"state",{isLoaded:[!1,!1,!1],isMounted:!1}),d(this,"getImageArray",()=>{const{userPins:e,showcase:t}=this.props;let n=[];return e&&0!==e.length?(t&&0!==t.length?t&&1===t.length?n=t.filter(e=>"board"===e.type)[0].images["550x"].map(e=>e.url):t&&(n=t.filter(e=>"board"===e.type).map(e=>e.image_cover_url)):n=e.map(e=>(e.images["136x136"]||e.images["236x"]||e.images["736x"]).url),n):n}),d(this,"getImage",(e,t)=>{const{isLoaded:n}=this.state,i={transition:"opacity 500ms",opacity:n[t]?1:0};return a.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:i},color:"white",height:"100%",width:"100%"},!!e&&a.a.createElement(r.p,{naturalHeight:1,src:e,fit:"cover",alt:c.a._("user's pin","image of one of a user's pins"),naturalWidth:1,color:"lightGray",onLoad:()=>this.handleLoad(t)}))}),d(this,"handleLoad",e=>{const{isLoaded:t,isMounted:n}=this.state,i=[...t];i[e]=!0,n&&this.setState({isLoaded:i})})}componentDidMount(){this.setState({isMounted:!0}),this.getImageArray()}render(){const{isHorizontalDesign:e}=this.props,t=this.getImageArray();let n=null;return n=1===t.length?a.a.createElement(r.c,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0)):2===t.length?a.a.createElement(r.c,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0),a.a.createElement(r.c,{color:"white",width:"1px",flex:"none"}),this.getImage(t[1],1)):e?a.a.createElement(r.c,{height:"100%",width:"100%",display:"flex",direction:"row"},a.a.createElement(r.c,{height:"100%",width:"100%"},this.getImage(t[0],0)),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{height:"100%",width:"100%"},this.getImage(t[1],1)),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{height:"100%",width:"100%"},this.getImage(t[2],2))):a.a.createElement(r.c,{height:"100%",width:"100%",display:"flex",direction:"row"},a.a.createElement(r.c,{height:"100%",flex:"grow"},this.getImage(t[0],0)),a.a.createElement(r.c,{color:"white",width:"2px",flex:"none"}),a.a.createElement(r.c,{display:"flex",height:u,direction:"column",flex:"grow"},a.a.createElement(r.c,{width:"100%",flex:"grow"},this.getImage(t[1],1)),a.a.createElement(r.c,{color:"white",height:"2px",flex:"none"}),a.a.createElement(r.c,{width:"100%",flex:"grow"},this.getImage(t[2],2)))),a.a.createElement(r.c,{height:u,display:"flex",direction:"column"},a.a.createElement(r.c,{width:"100%",position:"relative",flex:"grow"},a.a.createElement(l,{isHorizontalDesign:e}),n,a.a.createElement(r.c,{dangerouslySetInlineStyle:p,height:"100%",width:"100%",position:"absolute",top:!0,left:!0})))}}var m=n("3gA6"),g=n("U4JR");function y(e,t){Object(g.a)(101,{view:e,viewParameter:t,component:13406,element:11373})}var f=e=>{const{avatarUrl:t,isVerified:n,isHorizontalDesign:i,url:o,userFullName:s,viewParameter:l,viewType:c}=e,d=i?80:86;return a.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:{border:"2px white solid",marginTop:i?-58:-64,marginLeft:i?-6:0,zIndex:1}},display:"flex",flex:"none",shape:"circle"},a.a.createElement(r.c,{flex:"none",height:d,width:d},a.a.createElement(m.b,{onClick:y(c,l),to:o,stopPropagation:!0},a.a.createElement(r.a,{name:s,src:t,verified:n}))))},b=n("Zxas");function _({text:e,singleLineMaxCharacters:t,isBold:n,isHorizontalDesign:i,numLines:o}){const s=o*t,l=Object(b.a)(e,s);return n?a.a.createElement(r.K,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"bold"},l):a.a.createElement(r.K,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"normal",color:i?"darkGray":"gray"},l)}const v=18;function w({description:e,domainUrl:t,isHorizontalDesign:n,userFullName:i}){const o=e||t,s={placeholder:{__style:{transition:"opacity 200ms",opacity:o?0:1}},subtitle:{__style:{transition:"opacity 200ms",opacity:o?1:0}}};return a.a.createElement(r.c,{position:"relative",width:"100%",marginTop:n?4:3,marginBottom:3,alignItems:n?"start":"center",display:"flex",direction:"column"},a.a.createElement(r.c,{height:v,width:"100%"},a.a.createElement(r.K,{align:n?"left":"center",truncate:!0,size:n?"lg":"md",weight:"bold"},i)),a.a.createElement(r.c,{marginTop:2,overflow:"hidden",position:"relative",width:"100%"},a.a.createElement(r.c,{alignItems:"center",dangerouslySetInlineStyle:s.placeholder,direction:"column",display:"flex",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},a.a.createElement(r.c,{color:"lightGray",shape:"pill",width:180,flex:"grow"}),a.a.createElement(r.c,{height:6,flex:"none"}),a.a.createElement(r.c,{color:"lightGray",shape:"pill",width:140,flex:"grow"})),n&&!!t&&a.a.createElement(r.c,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:-1},a.a.createElement(_,{numLines:2,isBold:!0,isHorizontalDesign:n,singleLineMaxCharacters:36,text:t})),n&&!!e&&a.a.createElement(r.c,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:2},a.a.createElement(_,{isHorizontalDesign:n,numLines:2,singleLineMaxCharacters:36,text:e})),!n&&!!o&&a.a.createElement(r.c,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%"},a.a.createElement(_,{isHorizontalDesign:n,numLines:2,singleLineMaxCharacters:27,text:o}))))}var E=n("/MKj"),T=n("oRao"),C=n("vvax");function P({followText:e,followerCount:t,isHorizontalDesign:n,showFollowers:i,userFollowed:o}){return i?Object(C.b)(c.a._("{{ followCount }} {{ followText }}"),{followCount:a.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:o?null:{opacity:.75}},"data-test-id":"followCount",display:"inlineBlock",key:"followCount",marginRight:1},a.a.createElement(r.K,{color:o?"gray":"white",size:n?"sm":"md",align:"center",weight:"bold"},a.a.createElement(T.a,{value:t||0,shortform:!0,shortformMaximumFractionDigits:0}))),followText:a.a.createElement(r.c,{"data-test-id":"followText",display:"inlineBlock",key:"followText"},a.a.createElement(r.K,{weight:"bold",color:o?"darkGray":"white",size:n?"sm":"md",overflow:"normal",align:"center"},e))}):a.a.createElement(r.c,{"data-test-id":"followText",key:"followText"},a.a.createElement(r.K,{weight:"bold",color:o?"darkGray":"white",size:n?"sm":"md",overflow:"normal",align:"center"},e))}var I=n("CvCA"),S=n("nGHF"),O=n("ZVOf");var x=Object(E.connect)((e,{id:t})=>{const n=(e.users||{})[t];return{userFollowed:!!n&&n.explicitly_followed_by_me}},e=>({follow:t=>e(Object(O.a)(t)),unfollow:t=>e(Object(O.b)(t))}))((function({followerCount:e,isHorizontalDesign:t,showFollowerCount:n,userFollowed:i,follow:o,id:s,viewParameter:l,viewType:d,fullName:u,imageUrl:p,profileUrl:h}){const{showOneToast:m}=Object(S.b)(),y=i?c.a._("Following","User follow button"):c.a._("Follow","User follow button"),f=e=>Object(g.a)(e,{view:d,viewParameter:l,component:13406,element:11372});return a.a.createElement(r.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:t?"-22px":0}},display:"flex",justifyContent:"center",position:"relative"},a.a.createElement(r.P,{onTouch:()=>{i?(Object(O.b)(s),f(46)):(o(s),f(45),m(({onHide:e})=>a.a.createElement(I.a,{onHide:e,text:[c.a._("Now following","text that comes before a board/user name in toast"),u],href:h,imageUrl:p})))},shape:"pill"},a.a.createElement(r.c,{alignItems:"center",color:i?"lightGray":"red",direction:"row",display:"flex",justifyContent:"center",paddingX:t?5:6,paddingY:t?3:4,shape:"pill"},a.a.createElement(P,{followerCount:e,followText:y,isHorizontalDesign:t,showFollowers:n&&0!==e,userFollowed:i}))))}));function R({avatarUrl:e,description:t,domainUrl:n,followerCount:i,id:o,isCreator:s,isHorizontalDesign:l,isVerified:c,userFullName:d,username:u,viewParameter:p,viewType:h}){const m=function(e){return`/${e}`}(u);return a.a.createElement(r.c,{alignItems:l?"start":"center",display:"flex",direction:"column",paddingX:l?5:6,paddingY:l?3:4,marginTop:2,width:"100%"},a.a.createElement(f,{avatarUrl:e,isHorizontalDesign:l,isVerified:c,url:m,userFullName:d,viewType:h,viewParameter:p}),l&&a.a.createElement(r.c,{position:"relative",width:"100%"},a.a.createElement(r.c,{display:"flex",marginTop:-2,marginRight:-2,position:"absolute",right:!0,top:!0},a.a.createElement(x,{fullName:d,followerCount:i,id:o,imageUrl:e,isHorizontalDesign:l,profileUrl:m,showFollowerCount:s})),a.a.createElement(r.c,{width:"100%",display:"flex",left:!0,marginTop:1},a.a.createElement(w,{description:t,domainUrl:n,isHorizontalDesign:l,userFullName:d}))),!l&&a.a.createElement(r.c,{width:"100%"},a.a.createElement(w,{userFullName:d,domainUrl:n,description:t,isHorizontalDesign:l}),a.a.createElement(r.c,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(x,{followerCount:i,fullName:d,id:o,imageUrl:e,isHorizontalDesign:l,profileUrl:m,showFollowerCount:s}))))}var k=n("TiQD");const A=24;function L({anchor:e,children:t,isHorizontalDesign:n}){if(!e)return null;const i=n?320:236,{left:o,top:s,width:l,height:c}=e.getBoundingClientRect(),d=o+window.pageXOffset,u=s+window.pageYOffset,p=d+l+i+A/2>window.innerWidth,h={left:p?d:d+l,top:u+c/2,zIndex:k.a},m={borderRadius:21,boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)",left:p?-A/2-i:A/2,top:-i/2-44},g={top:-A/2,left:-A/2,fill:"white"},y=p?"M0 0 L12 12 L0 24":"M24 0 L12 12 L24 24";return a.a.createElement(r.c,{position:"absolute",dangerouslySetInlineStyle:{__style:h}},a.a.createElement(r.c,{position:"absolute",color:"white",dangerouslySetInlineStyle:{__style:m},width:i,overflow:"hidden"},t),a.a.createElement(r.c,{position:"absolute",dangerouslySetInlineStyle:{__style:g}},a.a.createElement("svg",{width:A,height:A},a.a.createElement("path",{d:y}))))}var D=n("eOdZ"),V=n("LT60"),M=n("joD6"),B=n("fArA"),H=n("/5zs"),F=n("pLLR");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=300,U=150;t.a=Object(B.compose)(F.e,M.a)(class extends i.PureComponent{constructor(e){super(e),N(this,"anchorRef",a.a.createRef()),N(this,"loadUser",()=>{const{username:e}=this.props,{isMounted:t}=this.state;e&&(D.a.create("UserResource",{username:e,field_set_key:"profile"}).callGet().then(e=>{t&&this.setState({detailedUser:e.resource_response.data})}),D.a.create("UserPinsResource",{username:e,page_size:3,field_set_key:"grid_item",isPrefetch:!1}).callGet().then(e=>{t&&this.setState({userPins:e.resource_response.data})}),D.a.create("ShowcaseResource",{username:e,page_size:2,isPrefetch:!1}).callGet().then(e=>{t&&this.setState({showcase:e.resource_response.data})}),t&&this.setState({isLoaded:!0}))}),N(this,"handleScroll",()=>{clearTimeout(this.openTimeout),this.state.isMounted&&(this.setState({isVisible:!1}),this.forceUpdate())}),N(this,"timeoutDismiss",()=>{this.dismissTimeout=setTimeout(()=>{this.state.isMounted&&(this.setState({isHovering:!1,isVisible:!1}),clearTimeout(this.openTimeout))},U)}),N(this,"handleDisplayCard",()=>{const{isDarkPromoter:e,pinId:t,requestContext:n,viewParameter:i}=this.props,{currentPinId:a,isLoaded:r,isMounted:o}=this.state;clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),t&&a!==t&&this.forceUpdate(),t&&this.setState({isHovering:!0,currentPinId:t});const s=new H.b(n,"web_avatar_hover_cards_v2");156!==i&&0!==i||e||!(s.check("enabled")||s.check("enabled2_vertical")||s.check("enabled2_horizontal"))?o&&this.setState({isVisible:!1}):(r||this.loadUser(),this.openTimeout=setTimeout(()=>{o&&this.setState({isVisible:!0})},j))}),N(this,"handleHideCard",()=>{this.timeoutDismiss()}),this.state={currentPinId:e.pinId,detailedUser:null,isHovering:!1,isMounted:!1,isLoaded:!1,isVisible:!1,showcase:null,user:null,userPins:null}}componentDidMount(){this.setState({isMounted:!0}),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.setState({isMounted:!1}),clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),window.removeEventListener("scroll",this.handleScroll)}static getDerivedStateFromProps(e,t){const{user:n}=e,{detailedUser:i}=t;return{user:{...Boolean(n)?n:{},...Boolean(i)?i:{}}}}render(){const{avatarSize:e,children:t,requestContext:n,username:i,viewer:o,viewParameter:s,viewType:l}=this.props,{isVisible:c,showcase:d,user:u,userPins:p}=this.state,{about:m,domain_url:g,follower_count:y,full_name:f,id:b,image_medium_url:_,show_creator_profile:v,verified_identity:w}=u||{},E=o.id===b,T=!!w&&w.verified,C=new H.b(n,"web_avatar_hover_cards_v2").checkWithNoActivation("enabled2_horizontal");return a.a.createElement(r.c,{onMouseOver:this.handleDisplayCard,onFocus:this.handleDisplayCard,onMouseLeave:this.handleHideCard},a.a.createElement(r.c,{marginLeft:-2,marginRight:-2,paddingX:2,position:"relative"},a.a.createElement(r.c,{height:e,left:!0,marginLeft:2,position:"absolute",ref:this.anchorRef,top:!0,width:e}),t),!E&&!!u&&!!i&&c&&a.a.createElement(r.c,null,a.a.createElement(V.a,null,a.a.createElement(r.r,null,a.a.createElement(L,{anchor:this.anchorRef.current,isHorizontalDesign:C},a.a.createElement(r.c,{color:"white",dangerouslySetInlineStyle:{__style:{zIndex:k.a}},onFocus:this.handleDisplayCard,onMouseOver:this.handleDisplayCard,onMouseLeave:this.handleHideCard,position:"relative",width:"100%"},a.a.createElement(r.c,{width:"100%"},a.a.createElement(h,{isHorizontalDesign:C,userPins:p,showcase:d}),a.a.createElement(R,{avatarUrl:_,description:m,domainUrl:g,followerCount:y,id:b,isCreator:v,isHorizontalDesign:C,isVerified:T,userFullName:f,username:i,viewParameter:s,viewType:l}))))))))}})},fc1g:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r}));const i=e=>({type:"MOST_RECENT_PIN",payload:{id:e}}),a=e=>({type:"MOST_RECENT_PLP",payload:{plpPinId:e}}),r=e=>({type:"MOST_RECENT_PIN_IMAGE",payload:{image_signature:e}})},i9se:function(e,t,n){n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("Y+p1"),a=n.n(i),r=n("QkVN"),o=n.n(r),s=n("KFEb");const l={boardactivity:"BoardActivityResource",boardactivitycomment:"BoardActivityCommentResource"},c={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment"},d={[c.BOARD]:s.a.BOARD_ACTIVITYITEMS,[c.BOARD_ACTIVITY]:s.a.BOARD_ACTIVITYCOMMENTS,[c.BOARD_ACTIVITY_COMMENT]:s.a.BOARD_ACTIVITYCOMMENTS},u={},p=(e,t)=>{const n={...o()({},e,t),...t.content?{content:t.content}:{},...t.reaction_counts?{reaction_counts:t.reaction_counts}:{}};return a()(e,n)?e:n},h=e=>e.reduce((e,t)=>{if(11===t.activity_type&&t.comment&&t.ref_board_activity){const n=t.comment,i=t.ref_board_activity;n&&i&&(e.push({...n,user:t.user}),e.push(i),e.push({...t,comment:{id:n.id},ref_board_activity:{id:i.id}}))}else e.push(t);return e},[]);t.d=(e=u,t)=>{if("RESOURCE_FETCH_COMPLETE"===t.type||"RESOURCE_FETCH_MORE_COMPLETE"===t.type){const{payload:{data:n,name:i,options:a}}=t;if("BoardActivityCommentFeedResource"===i){const t=(n||[]).reduce((t,n)=>(t[n.id]=p(e[n.id],n),t),{});return{...e,...t}}if("BoardActivityFeedResource"===i){const t=h(n||[]).reduce((t,n)=>(t[n.id]=p(e[n.id],n),t),{});return{...e,...t}}if("BoardActivityResource"===i&&n){const t=n;return{...e,[t.id]:p(e[t.id],t)}}if("BoardActivityPinsGridCommentsResource"===i){const t=Object.values(n||{}).reduce((e,t)=>e.concat(t||[]),[]).reduce((t,n)=>Object.prototype.hasOwnProperty.call(n,"id")?{...t,[n.id]:p(e[n.id],n)}:t,{});return{...e,...t}}if("BoardActivityCommentResource"===i&&n){const t=n,i={[t.id]:p(e[t.id],t)};if(t.root_board_activity){const n=t.root_board_activity.id;i[n]=p(e[n],t.root_board_activity)}return{...e,...i}}if("NewsHubDetailsResource"===i&&n&&n.length>0&&n[0].content_items){const t={};return n.forEach(e=>{e.content_items.forEach(e=>{const n=e.content_object&&e.content_object.type;if(n===c.BOARD_ACTIVITY_COMMENT||n===c.BOARD_ACTIVITY){const n=e.content_object;h([n]).forEach(e=>t[e.id]=e)}})}),{...e,...t}}if(["PinResource","PinPageResource"].includes(i)&&n&&n.board_activity){const t=n.board_activity;return t.board=n.board,{...e,[t.id]:p(e[t.id],t)}}if(("BoardFeedResource"===i||"BoardSectionPinsResource"===i)&&("react_grid_pin_with_board_activity"===a.field_set_key||"partner_react_grid_pin_with_board_activity"===a.field_set_key)||"BoardActivityPinsFeedResource"===i){const t=(n||[]).reduce((t,n)=>{const i=n.board_activity;return i&&i.id&&(t[i.id]=p(e[i.id],i)),t},{});return{...e,...t}}}else{if("ACTIVITY_ITEM_CREATED"===t.type){const{payload:{activityItem:n}}=t;return{...e,[n.id]:n}}if("ACTIVITY_ITEM_DELETED"===t.type){const{payload:{activityId:n,activityType:i}}=t;if(i===c.BOARD_ACTIVITY_COMMENT||i===c.BOARD_ACTIVITY){const t={...e};return delete t[n],t}}else{if("ACTIVITY_ITEM_UPDATED"===t.type){const{payload:{data:n}}=t;return{...e,[n.id]:p(e[n.id],n)}}if("UPDATE_ACTIVITY_ITEM_COMMENT_COUNT"===t.type){const{payload:{increment:n,id:i}}=t,a=e[i];if(a&&[c.BOARD_ACTIVITY_COMMENT,c.BOARD_ACTIVITY].includes(a.type)){const t={...a,comment_count:n?a.comment_count+1:a.comment_count-1};return{...e,[i]:t}}}else if("ACTIVITY_ITEM_UPDATE_REACTION_COUNT"===t.type){const{payload:{increment:n,id:i,reactionType:a}}=t,r=e[i]||{},{reaction_counts:o={}}=r,s=o[a]||0,l=n?s+1:Math.max(s-1,0),c=n?a:0,d={...r,reaction_counts:{...o,[a]:l},reaction_by_me:c};return{...e,[i]:d}}}}return e}},pSsd:function(e,t,n){n.d(t,"a",(function(){return i}));const i="favorited"},q7Wf:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p}));var i=n("JW66"),a=n("zwad");const r={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function o(e){return(e||"").trim().replace(/\s+/g," ")}function s({type:e,term:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case r.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case r.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case r.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case r.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function l({queryStates:e}){return 0===e.length?"":"&"+a.a.getQueryStringFromObject({term_meta:e.map(e=>s(e))})}function c(e){if(e){const t=e.trim().split(/\s+/);return t.find(e=>i.a.SEARCH_FILTER_CONJUNCTIONS.includes(e.toLowerCase()))?[e]:t}return[]}function d({type:e,query:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return c(t).map(t=>({index:n,term:t,type:e}));case r.AUTO_COMPLETE_RECENT_SEARCH:case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:case r.AUTO_COMPLETE_TRENDING:case r.AUTO_COMPLETE_DEFAULT:return c(t).map(t=>({term:t,type:e,index:n}));default:return[]}}function u(e){const{query:t,rs:n,scope:i,guideAdded:r,filters:o,termMeta:s,user:l}=e;if(!t)return"/";const c={q:t,rs:n,term_meta:s};if(o&&(c.filters=o),l&&(c.user=l),r&&r.term&&(c.add_refine=`${r.term}|guide|word|${r.index}`),window.location.pathname.startsWith("/explore"))return`/search/pins/?${a.a.getQueryStringFromObject(c)}`;let d=i;return["pins","buyable_pins","my_pins","boards","users"].includes(d)||(d="pins"),d?`/search/${d}/?${a.a.getQueryStringFromObject(c)}`:`${window.location.pathname}?${a.a.getQueryStringFromObject(c)}`}function p(e,t,n,i){const r=a.a.getQueryStringParams();r.add_refine&&(r["term_meta[]"]?r["term_meta[]"].push(r.add_refine):r["term_meta[]"]=[r.add_refine]);const o=r["term_meta[]"];return u({query:e,rs:i,termMeta:"string"==typeof o?[o]:o,guideAdded:{term:t,index:n}})}},qhFy:function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("VJm5"),o=n("TSYQ"),s=n.n(o),l=n("H2go"),c=n("n6mq");function d({onError:e,onLoad:t,pin:n}){const{title:i="",dominant_color:r,images:o={}}=n,s=`${16/9*100}%`,d=o["236x"].width>o["236x"].height?o["736x"]:o["236x"];return a.a.createElement(c.c,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:s}}},a.a.createElement(c.c,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:l.a.storyPinImage}}},a.a.createElement(c.p,{alt:i,color:r,naturalHeight:d.height,naturalWidth:d.width,onError:e,onLoad:t,src:d.url,fit:"cover"})))}var u=n("XCz/");t.a=({cropHeight:e,cropWidth:t,highResOnly:n,lowResOnly:i,onError:o,onLoad:l,pin:p,saved:h=!1,animateGif:m})=>{const{carousel_data:g,description:y="",dominant_color:f,id:b,images:_}=p;if(g)return a.a.createElement(r.a,{onError:o,onLoad:l,highResOnly:n,lowResOnly:i,pinId:b});let v,w,E,T;if(_){const e=n&&(_["736x"]||_.orig||_["474x"])||_["236x"];E=e.height,T=e.width,v=e.url,w=i||n?`${e.url} 1x`:[`${_["236x"].url} 1x`,_["474x"]&&`${_["474x"].url} 2x`,_["736x"]&&`${_["736x"].url} 3x`,_.orig&&`${_.orig.url} 4x`].filter(Boolean).join(", ")}if(m){const e=Math.max(p.embed&&p.embed.width||0,236),t=Math.max(p.embed&&p.embed.height||0,236),n=p.embed?p.embed.src:"";n&&(E=t,T=e,v=n,w="")}return a.a.createElement(c.c,{minHeight:120,display:"flex",alignItems:"center"},a.a.createElement(c.c,{flex:"grow"},a.a.createElement("div",{className:s()({savedGradient:h})},p.story_pin_data_id?a.a.createElement(d,{pin:p,onError:o,onLoad:l}):a.a.createElement(u.a,{name:"web_closeup_related_products_entry"},({group:n})=>a.a.createElement(c.c,t?{height:e,width:t}:{},a.a.createElement(u.a,{name:"web_image_loading_optimization"},({group:e})=>a.a.createElement(c.p,{alt:y,color:f,fit:t?"cover":"none",naturalHeight:E,naturalWidth:T,onError:o,onLoad:l,src:v,srcSet:w,loading:e.includes("lazy")?"lazy":"auto",importance:e.includes("low")?"low":"auto"})))))))}},tXBB:function(e,t,n){var i=n("q1tI"),a=n.n(i),r=n("qWlA"),o=n("Ye/N"),s=n("CgR/"),l=n("n6mq");t.a=s.a.makeSendShareButton(({handleSendShareFlyoutButtonClick:e,viewType:t})=>a.a.createElement("div",{className:"pinRepSendShareFlyoutButton"},a.a.createElement(l.d,{onClick:({event:t})=>{t&&t.stopPropagation&&t.stopPropagation(),Object(r.a)(e)()},text:o.a._("Send","Send a pin"),color:"gray",accessibilityLabel:o.a._("Send","Accessible label to send a pin")})))},vZlu:function(e,t,n){n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));const i=e=>({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}});function a(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"SET_CURRENT_VIDEO",payload:{pinId:i,isPromoted:n,currentTime:t}}}function r(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function o(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:i,isPromoted:n}}}function s(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}},wIXi:function(e,t,n){var i=n("17x9"),a=n.n(i);t.a=a.a.shape({access:a.a.arrayOf(a.a.string),ad_match_reason:a.a.number,aggregated_pin_data:a.a.shape({aggregated_stats:a.a.shape({done:a.a.number,likes:a.a.number,saves:a.a.number}),pin_tags:a.a.arrayOf(a.a.shape({pin_tag_key:a.a.string.isRequired,x_percent:a.a.number.isRequired,y_percent:a.a.number.isRequired}))}),attribution:a.a.shape({embed:a.a.shape({src:a.a.string})}),board:a.a.shape({followed_by_me:a.a.bool,id:a.a.string,url:a.a.string,name:a.a.string}),buyable_product:a.a.shape({display_active_max_price:a.a.string,display_active_min_price:a.a.string,short_description:a.a.string,title:a.a.string}),debug_info_html:a.a.string,description:a.a.string,domain:a.a.string,dominant_color:a.a.string,done_by_me:a.a.bool,embed:a.a.shape({src:a.a.string,type:a.a.string}),id:a.a.string,images:a.a.shape({"236x":a.a.shape({url:a.a.string,height:a.a.number}),"474x":a.a.shape({url:a.a.string,height:a.a.number})}),image_signature:a.a.string,is_quick_promotable:a.a.bool,is_eligible_for_web_closeup:a.a.bool,is_native:a.a.bool,link:a.a.string,native_creator:a.a.shape({username:a.a.string,full_name:a.a.string,id:a.a.string,image_small_url:a.a.string}),per_pin_analytics:a.a.shape({clickthrough:a.a.number,closeup:a.a.number,id:a.a.string,impression:a.a.number,repin:a.a.number,total_engagement:a.a.number,type:a.a.string}),pinner:a.a.shape({explicitly_followed_by_me:a.a.bool,full_name:a.a.string,id:a.a.string,image_small_url:a.a.string}),promoter:a.a.shape({username:a.a.string,full_name:a.a.string,image_small_url:a.a.string}),recommendationReason:a.a.shape({reason:a.a.string,board:a.a.shape({id:a.a.string,name:a.a.string,url:a.a.string}),interest:a.a.shape({id:a.a.string}),pin:a.a.shape({id:a.a.string})}),repin_count:a.a.number,rich_summary:a.a.shape({display_name:a.a.string}),source_interest:a.a.shape({name:a.a.string,url_name:a.a.string,id:a.a.string}),tracked_link:a.a.string,title:a.a.string,type:a.a.string,videos:a.a.shape({}),saved:a.a.bool})},yKES:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n.n(i),r=n("Ye/N"),o=n("US8k"),s=n("n6mq");const l=24;function c({duration:e}){return a.a.createElement(s.c,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:l,justifyContent:"center",paddingX:2,shape:"pill"},a.a.createElement(s.n,{accessibilityLabel:r.a._("Video camera icon","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),a.a.createElement(s.c,{marginLeft:1},a.a.createElement(s.K,{color:"white",size:"xs",truncate:!0},Object(o.a)(e))))}}}]);
//# sourceMappingURL=pjs-5-16825784f069982ea202.mjs.map
