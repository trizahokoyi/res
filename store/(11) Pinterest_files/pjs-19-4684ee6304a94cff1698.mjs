(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[19,"AuthHandshakeCommon","BackgroundPinImages"],{"0Bqi":function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("q23S"),r=n("Ye/N"),i=n("KNE1"),l=n("17x9"),c=n.n(l),u=n("BlMG"),d=n("n6mq");const h={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}},m=e=>{const t=e=>{Object(u.a)(`unauth.account_switcher_modal.${e}`)},{renderContent:n}=e;return o.a.createElement("div",{style:h.mask},o.a.createElement(i.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:h.scroller},o.a.createElement("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:h.modalContainer},n(),o.a.createElement("button",{"aria-label":r.a._("close","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:h.closeButton},o.a.createElement(d.n,{accessibilityLabel:r.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))};m.propTypes={onCloseClick:c.a.func,renderContent:c.a.func.isRequired};var p=m,g=n("3fKP");function _(e){return a.createElement(p,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>a.createElement(d.c,{display:"flex",justifyContent:"center",flex:"grow"},a.createElement(s.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:g.b.login,signupSource:g.b.login,customLoginTagline:e.customTaglineText||r.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account")}))})}n.d(t,"a",(function(){return _}))},"1yPP":function(e,t,n){},"3fKP":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return r}));var a=n("17x9");const o={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},s={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},r={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",visualSearch:"unauthVisualSearch",giftWrap:"giftWrap",loginMfa:"loginMfa"};n.n(a).a.oneOf([r.boardPage,r.boardInvite,r.defaultSource,r.giftWrap,r.homePage,r.invite,r.login,r.mwebDefaultSource,r.navigateBoard,r.navigatePin,r.navigateInterest,r.saveButton,r.signupButton,r.unauthBanner,r.unauthHeader,r.userFollow,r.userProfilePage])},"6MIl":function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/web_nux_location_upsell-19d94840.png"},ADkM:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("n6mq");t.a=e=>{if(e.viewerId===e.account.id)return null;{const t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return o.a.createElement(s.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(s.c,{paddingX:1},o.a.createElement(s.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),o.a.createElement(s.c,{marginLeft:3,flex:"grow"},o.a.createElement(s.K,{color:"darkGray",size:"md",truncate:!0,weight:"bold"},e.account.fullName||e.account.username),e.account.email&&o.a.createElement(s.K,{color:"darkGray",size:"md",truncate:!0},e.account.email)))}}},CzMn:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var a=n("pDoi");function o(e){const t={};return e.forEach(e=>{const n=a.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}function s(){return o(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function r(){return o(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},Iucu:function(e,t,n){},L2Gz:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));n("Ye/N");var a=n("pDoi");n("vvax"),n("5239");function o(e,t){return e.some(e=>e.id===t.id)}function s(e){const t=[];if(e){const n=72e5,a=Date.now()-n;for(const o of e)o.ts>=a&&("string"==typeof o.image_signature&&t.push(o.image_signature),"string"==typeof o.first_pin_image_signature&&t.push(o.first_pin_image_signature))}return t}function r(){return{plpImages:s(a.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")),blpImages:s(a.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin"))}}function i(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function l(e){const t=e.log_data;return t&&JSON.parse(t).source||""}},QbJe:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("/MKj"),r=(n("Iucu"),n("xdpg")),i=n("L2Gz"),l=n("Ye/N"),c=(n("1yPP"),n("n6mq"));const u=3,d=10,h=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"];var m=o.a.memo((function(){const e=function(){const e=[];let t=0;for(let n=0;n<d;n+=1){e.push([]);for(let a=0;a<u;a+=1){const s=h[t];e[n].push(o.a.createElement("div",{key:n+a,className:`NuxEducationLoaderGrid__column${a}`},o.a.createElement(c.c,{color:s,height:155,width:105,dangerouslySetInlineStyle:{__style:{borderRadius:8}}}))),(t+=1)>=h.length&&(t=0)}}return e}();return o.a.createElement("div",{className:"NuxEducationLoaderGrid"},e)}));var p=o.a.memo((function({selectedInterest:e}){const t={label:l.a._("Food and Drink","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},n={},{label:a,name:s,images:r}=e||t,{"400x":{url:i,height:u,width:d}}=r;n.domain=(a||s||"").trim().toLowerCase().replace(/\s/g,"").concat(".com"),n.imageHeight=u,n.imageWidth=d,n.imageUrl=i;const{domain:h,imageUrl:m,imageHeight:p,imageWidth:g}=n;return o.a.createElement("div",{className:"NuxEducationLoaderPin","data-test-id":"nux-loader-pin"},o.a.createElement(c.c,{position:"relative"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinImage"},o.a.createElement(c.u,{shape:"rounded",height:310,width:210},o.a.createElement(c.p,{alt:l.a._("Pin image","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:p,naturalWidth:g,src:m})),o.a.createElement(c.c,{position:"absolute",top:!0,right:!0,marginTop:1,marginRight:1},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinSaveButton"},o.a.createElement(c.d,{accessibilityLabel:l.a._("Save button"),color:"red",text:l.a._("Save","save button for nux loading step"),size:"md"}))),o.a.createElement(c.c,{position:"absolute",bottom:!0,left:!0,margin:2,maxWidth:"90%"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinLinkButton"},o.a.createElement(c.c,{padding:2,color:"lightGray",display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:4}}},o.a.createElement(c.c,null,o.a.createElement(c.n,{icon:"arrow-up-right",accessibilityLabel:l.a._("link","Pin website url link for nux loading step"),size:14,color:"darkGray"})),o.a.createElement(c.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},o.a.createElement(c.K,{size:"sm",truncate:!0,weight:"bold"},h))))))))}));const g={backgroundColor:"#efefef"},_={transition:"width .4s ease-out"};function f(e,t){return Object.assign({},g,{height:e+"px",borderRadius:t})}function b(e,t,n){return Object.assign({},_,{backgroundColor:e,width:t+"%",borderRadius:n})}var S=({color:e="#333",height:t=8,progress:n=0,outerBorderRadius:a="10px",innerBorderRadius:s="inherit"})=>o.a.createElement(c.c,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:f(t,a)}},o.a.createElement(c.c,{height:"inherit",dangerouslySetInlineStyle:{__style:b(e,n,s)}})),x=n("eOdZ"),w=n("joD6"),E=n("U4JR"),y=n("vVbV"),I=n("5239"),N=n("fArA");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=300,k=5100,v=1e3;var T=Object(N.compose)(Object(s.connect)(null,e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))})),w.a)(class extends a.PureComponent{constructor(...e){super(...e),C(this,"state",{progressPercent:0}),C(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(e(),!t){x.a.create("UserStateResource",{state:I.q,value:I.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){x.a.create("UserStateResource",{state:I.q,value:I.v}).callCreate()}e("loader"),Object(E.a)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/(k/O),100)})),O)}componentDidUpdate(e,t){this.state.progressPercent>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,v))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:a}=this.state;return o.a.createElement("div",{className:"NuxEducationLoader","data-test-id":"nux-complete-loader"},o.a.createElement(c.c,{alignItems:"center",display:"flex",direction:"row",height:"100%",justifyContent:"center",overflow:"hidden",width:"100%"},o.a.createElement(c.c,{position:"relative",marginLeft:10,marginRight:4},o.a.createElement("div",{className:"NuxEducationLoader__loadingCopyContainer"},o.a.createElement(c.m,{size:"sm"},l.a._("All set!","Title for nux loading step")),o.a.createElement(c.c,{marginTop:4},e?l.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step"):l.a._("We're building your home feed with lots of Pins...","Details for nux loading step"))),o.a.createElement("div",{className:"NuxEducationLoader__pinEducationCopyContainer"},o.a.createElement(c.m,{size:"sm"},l.a._("Pins are ideas.","Pin education on NUX loading step")),o.a.createElement(c.c,{marginTop:5},l.a._("They are links saved from around the web","Pin education on NUX loading step")))),o.a.createElement(c.c,{marginRight:5,marginLeft:5,width:344},o.a.createElement(m,null)),o.a.createElement(c.c,null,o.a.createElement(p,{selectedInterest:t[0]}))),n?null:o.a.createElement(c.c,{position:"absolute",top:!0,width:"100%"},o.a.createElement(S,{height:8,color:"#e60023",progress:a})))}}),R=n("IZzd"),L=n("028R"),P=n("0/lc");function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=Object(s.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(P.a)(I.n,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))}))(class extends a.Component{constructor(...e){super(...e),A(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;R.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(E.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),A(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(E.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),A(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(I.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(I.v),e("extension"),Object(E.a)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return o.a.createElement(L.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}),j=(n("SPMB"),n("/5zs")),B=n("pLLR");function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M=({isChecked:e,label:t,selectGender:n,value:s})=>o.a.createElement(a.Fragment,null,o.a.createElement(c.c,{"data-test-id":`nux-gender-${t}-label`},o.a.createElement(c.q,{htmlFor:t},o.a.createElement("div",{className:"NuxGenderSelector"},o.a.createElement(c.c,{alignItems:"center",display:"flex",flex:"none",paddingX:8,paddingY:6},o.a.createElement(c.B,{checked:e,id:t,name:"genderOptions",onChange:n,size:"md",value:t}),o.a.createElement(c.c,{display:"flex",flex:"grow",marginStart:10},s))))),o.a.createElement(c.j,null));var D=Object(N.compose)(Object(s.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),setNuxGenderProgress:t=>e(Object(P.a)(I.p,t)),updateGenderInfo:t=>e(Object(P.f)({updateUserData:t}))})),B.e)(class extends a.PureComponent{constructor(...e){super(...e),G(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===I.A&&this.props.customGender.length>0,showNextButton:[I.j,I.f].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===I.A&&this.props.customGender.length>0}),G(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({showCustomGenderDoneButton:!1})}),G(this,"updateCustomGender",({value:e})=>this.setState({customGender:e,showCustomGenderDoneButton:e.length>0}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(I.v),Object(E.a)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{requestContext:t}=this.props,{showCustomGenderTextfield:n,showNextButton:a}=this.state;a?this.setState({gender:e,showCustomGenderTextfield:e===I.A}):e===I.A&&new j.c(t,"web_hide_custom_gender_field").enabled()?this.setState({gender:I.A,showCustomGenderTextfield:!1},this.updateGenderCompleteStep):e===I.A||n?this.setState({gender:I.A,customGender:"",showCustomGenderTextfield:!n,showCustomGenderDoneButton:!1}):this.setState({gender:e},this.updateGenderCompleteStep)}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(I.a)}updateGenderCompleteStep(){const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:a,gender:o,showCustomGenderTextfield:s}=this.state;n(s?{gender:I.A,custom_gender:a.slice(0,30)}:{gender:o}).then(()=>{this.setUserStateCompletedGenderStep(),Object(E.a)(101,{component:17,element:241,view:t?213:24,viewParameter:3120}),e()})}submitHandler(e){e.preventDefault()}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:s,showCustomGenderDoneButton:r,showCustomGenderTextfield:i,showNextButton:u}=this.state,d=i?o.a.createElement(a.Fragment,null,o.a.createElement(c.c,{marginEnd:5},o.a.createElement("input",{className:"NuxGenderSelector","data-test-id":"nux-gender-unspecified-input",id:"customGender",onChange:this.setCustomGender,placeholder:s||l.a._("Enter custom gender","placeholder text for custom gender text field"),style:r?I.i:I.h,type:"text"})),!u&&r&&o.a.createElement("div",{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(c.d,{color:"red",inline:!0,onClick:()=>this.updateGenderCompleteStep(),text:l.a._("Done","button text for entering a custom gender type")}))):o.a.createElement(c.m,{size:"sm"},l.a._("Non-binary","Non-binary label for custom gender"));return o.a.createElement(c.c,{display:"flex",direction:"column",height:"100%",justifyContent:"around",paddingY:8,width:"100%"},o.a.createElement(c.c,{direction:"column",display:"flex",paddingX:8,dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(c.m,{size:e?"xs":"sm"},t),e&&o.a.createElement(c.K,{align:"center",size:"xl"},n)),o.a.createElement(c.c,null,o.a.createElement(c.j,null),o.a.createElement(M,{isChecked:!i&&this.state.gender.toLowerCase()===I.f,label:I.f,selectGender:()=>this.onSelectGender(I.f),value:o.a.createElement(c.m,{size:"sm"},l.a._("Female"))}),o.a.createElement(M,{isChecked:!i&&this.state.gender.toLowerCase()===I.j,label:I.j,selectGender:()=>this.onSelectGender(I.j),value:o.a.createElement(c.m,{size:"sm"},l.a._("Male"))}),o.a.createElement(M,{isChecked:i,label:I.A,selectGender:()=>this.onSelectGender(I.A),value:d})),u&&o.a.createElement(c.c,{"data-test-id":"nux_gender_next_btn",marginTop:8,marginStart:8,marginEnd:8},o.a.createElement(c.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:i&&0===this.state.customGender.length,onClick:()=>this.updateGenderCompleteStep(),text:l.a._("Next","next nux step button"),type:"button"})))}}),F=n("xAAE"),z=n("6MIl"),H=n.n(z);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $="Country";class q extends a.Component{constructor(...e){super(...e),W(this,"state",{focused:!1,errorIsOpen:!1}),W(this,"handleOnChange",e=>{this.props.onChange({event:e,value:e.target.value})}),W(this,"handleBlur",()=>{this.props.errorMessage&&this.setState({errorIsOpen:!1})}),W(this,"handleFocus",()=>{this.props.errorMessage&&this.setState({errorIsOpen:!0})})}static getDerivedStateFromProps(e,t){return e.errorMessage!==t.errorMessage?{errorIsOpen:!!e.errorMessage,errorMessage:e.errorMessage}:null}render(){const{id:e,name:t,options:n,value:o}=this.props;let s={backgroundColor:"white",border:"1px solid #979797",borderRadius:8,cursor:"pointer",height:68,fontSize:20,paddingLeft:32,width:"100%",WebkitAppearance:"none",MozAppearance:"none"};return o===$&&(n.unshift({label:$,value:$}),s={...s,color:"lightGray"}),a.createElement(c.c,{alignItems:"center",display:"flex",position:"relative"},a.createElement(c.c,{alignItems:"center",bottom:!0,color:"white",display:"flex",position:"absolute",dangerouslySetInlineStyle:{__style:{margin:"1px",paddingRight:"31px",paddingLeft:"15px",pointerEvents:"none"}},right:!0,shape:"rounded",top:!0},a.createElement(c.n,{icon:"arrow-down",size:24,color:"darkGray",accessibilityLabel:""})),a.createElement("select",{id:e,name:t,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleOnChange,ref:e=>{this.select=e},value:o,style:s},n.map(e=>a.createElement("option",{key:e.value,value:e.value,disabled:e.value===$},e.label))))}}W(q,"defaultProps",{options:[]});var V=e=>{const{defaultOptions:t,id:n,items:a,name:s,onChange:r,value:i}=e,l=(a.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return o.a.createElement(q,{id:n,name:s,onChange:r,options:l,value:i})},X=n("zLLH"),Y=Object(X.b)({name:"CountriesResource",key:"items"})(V),K=Object(X.b)({name:"LocalesResource",key:"items"})(V),Q=n("17x9"),J=n.n(Q),Z=n("pDoi"),ee=n("XCz/");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne="Country";class ae extends a.PureComponent{constructor(...e){super(...e),te(this,"state",{locale:this.props.reduxLocale||(this.context||{}).locale||I.c,country:this.props.reduxCountry||(this.context||{}).country||I.b,swappingLanguage:!1,swappingCountry:!1}),te(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:a}=this.props,{country:o,locale:s}=this.state;n({updateUserData:{country:o,locale:s}}).then(()=>{t||a(I.a),Object(E.a)(101,{component:17,element:10374,view:24,viewParameter:3139}),e()})}),te(this,"onLocationButtonOnMount",()=>{if(!navigator.geolocation)return;navigator.geolocation.getCurrentPosition(e=>{this.setState({country:this.props.reduxCountry||(this.context||{}).country||I.b}),Object(E.a)(7438)},()=>{Object(E.a)(7436)})}),te(this,"updateLocale",({value:e})=>this.setState({locale:e})),te(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,requestContext:n,setNuxLocaleProgress:a}=this.props;t||a(I.v),e("country"),new j.c(n,"web_nux_us_location_upsell").enabled()&&(this.inNuxUsLocationUpsellExp=!0,this.setState({country:ne}),this.onLocationButtonOnMount()),Z.b.localStorage.getItem("signupUserLocale")||Z.b.localStorage.getItem("signupUserCountry")||Object(E.a)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:a,updateUserInfo:o}=this.props,{country:s,locale:r}=t,{country:i,locale:l}=this.state,c=s!==i,u=r!==l;(c||u)&&o({updateUserData:{country:i,locale:l}}).then(()=>{c&&(Z.b.localStorage.setItem("signupUserCountry",i),this.setState({swappingCountry:!0})),u&&(Z.b.localStorage.setItem("signupUserLocale",l),a?this.setState({swappingLanguage:!0}):n(!0),Object(F.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:a,swappingCountry:s}=this.state;let r=t;return this.inNuxUsLocationUpsellExp&&!s&&(r=ne),o.a.createElement(c.c,{display:"flex",direction:"column",height:"100%",padding:8,width:"100%"},o.a.createElement(c.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{textAlign:"center"}},display:"flex",direction:"column",flex:"grow",justifyContent:"around",marginBottom:8},o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.m,{size:"sm"},e)),o.a.createElement(ee.a,{name:"web_nux_us_location_upsell",activate:!1},({group:e})=>{let t=-12,n=-12;return e.includes("enabled_image")&&(t=7,n=6),e.includes("enabled")?o.a.createElement(c.c,{marginBottom:t,marginTop:n},o.a.createElement(c.K,null,l.a._("We'll use this to personalize the Pins and ads you see","location upsell supporting text"))):null}),o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.c,{"data-test-id":"nux-locale-select"},o.a.createElement(K,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})),o.a.createElement(c.c,{marginTop:4,"data-test-id":"nux-country-select"},o.a.createElement(Y,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:r})))),o.a.createElement(c.c,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(c.d,{size:"lg",color:"red",text:l.a._("Next","go to next step"),onClick:this.onNextButtonClick,type:"submit",disabled:a||r===ne})),o.a.createElement(ee.a,{name:"web_nux_us_location_upsell",activate:!1},({group:e})=>e.includes("image")?o.a.createElement(c.c,{marginTop:5,marginBottom:-8,marginLeft:-8,marginRight:-8,overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:8}}},o.a.createElement(c.p,{alt:l.a._("Web Desktop Location Upsell","location upsell image"),src:H.a,naturalHeight:170,naturalWidth:622})):null))}}ae.contextTypes={country:J.a.string,locale:J.a.string};var oe=Object(N.compose)(B.e,Object(s.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(P.f)(t)),setNuxLocaleProgress:t=>e(Object(P.a)(I.o,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))})))(ae),se=n("D2p8"),re=n("shJ5");var ie=({nuxStepIndex:e,showCounter:t,numSteps:n})=>t&&n>1?o.a.createElement(c.c,null,o.a.createElement(c.K,{size:"md"},Object(r.i)(l.a._("Step {{current}} of {{total}}"),{current:`${e+1}`,total:`${n}`}))):null;const le=40,ce="10px",ue="15px",de="30px",he="45px",me="85px",pe=(e,t,n,a,s)=>o.a.createElement(c.c,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:2,width:t},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{marginTop:n===ce?"3px":"0px"}},"data-test-id":"nux-toc-dot",color:e,height:n,shape:"circle",width:n}),a&&o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{whiteSpace:s?"nowrap":"",marginTop:n===ce?"6px":"4px"}},"data-test-id":"nux-toc-text",display:"flex",wrap:!0},o.a.createElement(c.K,{align:"center",color:e,size:"sm",weight:"bold"},a))),ge="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var _e=o.a.memo((function({renderType:e,currentNuxStep:t,steps:n,onPrevStepClick:a}){const s=n.map(e=>e.moduleName),r=s.indexOf(t.moduleName),i=r>1&&o.a.createElement(c.c,{display:"flex",alignItems:"center"},o.a.createElement(c.o,{accessibilityLabel:l.a._("Go back to previous step","Accessibility label on NUX back button"),dangerouslySetSvgPath:{__path:ge},iconColor:"gray",size:"sm",onClick:a}));if(n.length>1)return o.a.createElement(c.c,{"data-test-id":"nux-toc-container",display:"flex",justifyContent:"between",padding:4},o.a.createElement(c.c,{width:le},i),o.a.createElement(c.c,{display:"flex",justifyContent:"center"},n.map((n,a)=>o.a.createElement("div",{key:a},function(n){const a=s.indexOf(n.moduleName)>r,o=a?"darkGray":"red",i=a?ce:ue;let c="",u=de,d=!1;if("single"===e){u=he,d=!0;const e=n.moduleName===t.moduleName,a={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents"),NuxLocaleCountryStep:l.a._("Your Language","Label for NUX language/locale step in a table of contents"),NuxPicker:l.a._("Your Interests","Label for NUX topic picker in a table of contents"),NuxExtensionUpsell:l.a._("Your Browser","Label for NUX Browser Extension in a table of contents")};c=e?a[n.moduleName]:""}if("all"===e){u=me,c={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents, where text should be short since there is not much space to show it"),NuxLocaleCountryStep:l.a._("Language","Label for NUX language/locale step in a table of contents, where text should be short since there is not much space to show it"),NuxPicker:l.a._("Interests","Label for NUX topic picker in a table of contents, where text should be short since there is not much space to show it"),NuxExtensionUpsell:l.a._("Extension","Label for NUX Browser Extension in a table of contents, where text should be short since there is not much space to show it")}[n.moduleName]||""}return pe(o,u,i,c,d)}(n)))),o.a.createElement(c.c,{width:le}))}));const fe=640,be=360,Se=544,xe=800,we=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"];var Ee=class extends a.PureComponent{componentDidMount(){const{isRenux:e,isSimpleRenux:t,requestContext:n}=this.props;document.body&&(document.body.style.overflow="hidden");const a=new j.c(n,"web_renux_moving_bg_pins");e&&!t&&a.enabled()&&(this.windowScrollInterval=window.setInterval(()=>{window.scrollBy(0,1)},50),this.windowScrollTimer=window.setTimeout(()=>{window.clearInterval(this.windowScrollInterval)},12e4)),se.c.pause()}componentWillUnmount(){this.windowScrollInterval&&window.clearInterval(this.windowScrollInterval),this.windowScrollTimer&&window.clearTimeout(this.windowScrollTimer),document.body&&(document.body.style.overflow=""),se.c.resume()}render(){const{children:e,displayHide:t,onHide:n,onPrevStepClick:s,nuxStep:r,steps:i,isLoading:u,showCounter:d,showTableContents:h,showShortRenuxPicker:m}=this.props,p=i.map(e=>e.moduleName).indexOf(r.moduleName);return o.a.createElement(c.r,null,o.a.createElement(c.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",width:"100vw",top:!0},o.a.createElement(c.c,{color:"white",dangerouslySetInlineStyle:{__style:{transition:we.includes(r.moduleName)?"":"width 0.5s"}},direction:"column",display:"flex",height:"NuxPicker"===r.moduleName&&m?be:fe,position:"relative",shape:"rounded",width:we.includes(r.moduleName)?Se:xe},u&&o.a.createElement(re.a,null),h&&o.a.createElement(a.Fragment,null,o.a.createElement(_e,{currentNuxStep:r,onPrevStepClick:s,renderType:"dots",steps:i}),o.a.createElement(c.j,null)),o.a.createElement(c.c,{flex:"grow",height:"100%",width:"100%"},e),o.a.createElement(c.c,{position:"absolute",marginEnd:8,marginTop:8,right:!0,top:!0},o.a.createElement(ie,{nuxStepIndex:p,showCounter:d,numSteps:i.length}),t&&n&&o.a.createElement(c.o,{accessibilityLabel:l.a._("cancel","close nux modal"),icon:"cancel",onClick:n,size:"sm"})))))}},ye=n("CzMn"),Ie=n("1inl"),Ne=n("rh3l"),Ce=n("N0Eu");var Oe=e=>{const{interests:t,InterestComponentToRender:n,gridContainerRef:a}=e,s=t&&t.length<1,r=I.k.DESKTOP;return o.a.createElement("div",{style:r.STYLES},o.a.createElement(c.v,{columnWidth:r.COLUMN_WIDTH,comp:n,loadItems:()=>{},gutterWidth:r.GUTTER_WIDTH,items:t,minCols:r.COLUMNS,scrollContainer:()=>a||window}),o.a.createElement(c.G,{accessibilityLabel:l.a._("Loading topics"),show:s}))};var ke=e=>{const{inMasonryRefactor:t,interests:n,handleInterestClickFn:a,isRenux:s}=e;return o.a.createElement(Oe,{...e,InterestComponentToRender:({itemIdx:e,data:r})=>{const i={clickHandler:a(r),interest:r,key:r.id,inMasonryRefactor:t,isRenux:s,isSelected:r.is_followed,size:"lg_136"};return n.length>0&&Z.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(Ce.c,i)}})},ve=n("sEfC"),Te=n.n(ve),Re=n("E+oP"),Le=n.n(Re);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ae={input:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:n("a0jO").b,fontSize:16,fontWeight:600,height:"100%",outline:"none",padding:"0",width:"100%"}},Ue=8,je=450,Be=40,Ge=5,Me=10;var De=class extends o.a.PureComponent{constructor(...e){super(...e),Pe(this,"state",{userSearchQuery:"",cachedSearchResults:{},loading:!1}),Pe(this,"resultsContainerRef",o.a.createRef()),Pe(this,"onCancelButtonClick",()=>{const{isRenux:e}=this.props;Object(E.a)(101,{view:e?213:24,viewParameter:172,component:17,element:114}),this.setState({userSearchQuery:""}),this.handleSearchAndLoading("")}),Pe(this,"onQueryChange",e=>{const{isRenux:t}=this.props,{cachedSearchResults:n}=this.state;if(e.target instanceof HTMLInputElement){const a=e.target.value;Le()(n)&&this.getNormalizedQuery(a).length>0&&Object(E.a)(7472,{view:t?213:24,viewParameter:172,component:17,element:227}),this.setState({userSearchQuery:a}),this.handleSearchAndLoading(a)}}),Pe(this,"onQueryInputFocus",e=>{const{isRenux:t}=this.props;Object(E.a)(101,{view:t?213:24,viewParameter:172,component:17,element:227})}),Pe(this,"callDebouncedSearchApi",Te()(()=>{const{cachedSearchResults:e,userSearchQuery:t}=this.state;x.a.create("NuxInterestsSearchResource",{query:t}).callGet({showError:!1},{retries:1}).then(n=>{if(n.resource_response&&n.resource_response.data){const a=n.resource_response.data,o={...e,[t]:a};this.setState({cachedSearchResults:o,loading:!1})}}).catch(n=>{const a={...e,[t]:[]};this.setState({cachedSearchResults:a,loading:!1})}).finally(()=>{this.scrollSearchResultsIntoView()})},Me))}scrollSearchResultsIntoView(){this.resultsContainerRef.current&&this.resultsContainerRef.current.scrollIntoView({behavior:"smooth",block:"start"})}handleSearchAndLoading(e){const{cachedSearchResults:t}=this.state,n=this.getNormalizedQuery(e);n.length>0&&!t[n]?(this.setState({loading:!0},this.scrollSearchResultsIntoView),this.callDebouncedSearchApi()):this.setState({loading:!1},this.scrollSearchResultsIntoView)}mapInterestsFollowingState(e){const{selectedInterests:t}=this.props;return e.map(e=>(e.is_followed=Object(i.b)(t,e),e))}getNormalizedQuery(e){return e.trim().toLowerCase()}getSearchResults(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=this.getNormalizedQuery(t);return 0===n.length?[]:e[n]?e[n].slice(0,Ge):[]}renderSearchBar(){const{userSearchQuery:e}=this.state;return o.a.createElement(c.c,{color:"lightGray",display:"flex",height:Be,width:je,shape:"rounded"},o.a.createElement(c.c,{alignItems:"center",display:"flex",flex:"grow",height:"100%",paddingX:4,position:"relative"},o.a.createElement(c.c,{marginRight:3,flex:"none"},o.a.createElement(c.n,{accessibilityLabel:l.a._("Search icon","Search icon in search box"),icon:"search",size:20})),o.a.createElement("input",{"data-test-id":"search-box-input",name:"topicSearchBoxInput",onChange:this.onQueryChange,onFocus:this.onQueryInputFocus,placeholder:l.a._("Search for a topic","Placeholder for Search for when user hasn't typed in Search bar"),style:Ae.input,type:"text",value:e}),e.length>0&&o.a.createElement(c.c,{marginLeft:3,flex:"none"},o.a.createElement(c.o,{accessibilityLabel:l.a._("Cancel Search icon","Cancel Search icon in search box"),icon:"cancel",size:"sm",onClick:this.onCancelButtonClick}))))}renderResults(){const{handleInterestClickFn:e,inMasonryRefactor:t,isRenux:n,renderInterestGrid:a,suggestedSearchQuery:s}=this.props,{loading:i,userSearchQuery:u}=this.state,d=this.mapInterestsFollowingState(this.getSearchResults()),h=t?a(d,!0):o.a.createElement(ke,{gridContainerRef:this.resultsContainerRef.current,handleInterestClickFn:e,inMasonryRefactor:!1,interests:d,isRenux:n,showTableOfContents:!1}),m=Ce.a.imageSize+(t?Ue:0);return o.a.createElement(c.c,{overflow:"hidden",width:"100%",height:m,ref:this.resultsContainerRef},i&&o.a.createElement(c.G,{accessibilityLabel:l.a._("Loading search results","Label for a spinner that shows when waiting for a Search result"),show:!0}),!i&&d.length>0&&h,!i&&0===d.length&&o.a.createElement(c.c,{height:"100%",display:"flex",alignItems:"center",justifyContent:"around",direction:"column"},o.a.createElement(c.n,{accessibilityLabel:l.a._("Search icon","Search icon used as placeholder in Search results"),icon:"search",color:"lightGray",size:45}),o.a.createElement(c.K,{size:"xl",color:"gray",weight:"bold"},0===u.length?r.c(l.a._('Try searching for a topic like "{{ suggestedSearchQuery }}"',"Placeholder for Search for when user hasn't typed in Search bar"),{suggestedSearchQuery:s}):r.c(l.a._("We couldn't find {{ userSearchQuery }}. Try another word or phrase!","Shown when we don't have results for a user's search query"),{userSearchQuery:u}))))}render(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=0===t.length&&Le()(e);return o.a.createElement(c.c,{display:"flex",direction:"column",justifyContent:"between",alignItems:"center",height:n?100:190},n&&o.a.createElement(c.K,{size:"xl"},l.a._("Still can't find what you're looking for?","Introduces a search bar, which is shown underneath this text.")),this.renderSearchBar(),!n&&this.renderResults())}},Fe=n("HZII");function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const He=n.n(Fe)()(()=>{Z.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});var We=class extends o.a.PureComponent{constructor(...e){super(...e),ze(this,"state",{showSearch:!1}),ze(this,"gridContainer",o.a.createRef()),ze(this,"handleScroll",()=>{const e=this.gridContainer.current;if(e){const t=e.scrollTop===e.scrollHeight-e.offsetHeight;He(),this.props.handleBottomScroll(t),t&&this.setState({showSearch:!0})}}),ze(this,"renderInterestGrid",(e,t)=>{const{handleInterestClickFn:n,isRenux:a}=this.props;return e.length>0&&!t&&Z.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(c.c,{display:"flex",marginTop:-2,paddingX:5,wrap:!0},e.map((e,t)=>o.a.createElement("div",{key:t},o.a.createElement(c.c,{padding:2},o.a.createElement(Ce.c,{clickHandler:n(e),interest:e,key:e.id,inMasonryRefactor:!0,isRenux:a,isSelected:e.is_followed,size:"lg_136"})))))})}render(){const{disableScroll:e,handleInterestClickFn:t,interests:n,isRenux:s,showTableOfContents:r,selectedInterests:i}=this.props,{showSearch:u}=this.state;return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{paddingBottom:"40px"}},height:r?"280px":"368px",flex:"grow",overflow:e?"visible":"scrollY",width:"800px",ref:this.gridContainer},o.a.createElement("div",{onScroll:this.handleScroll,onWheel:this.handleScroll},n.length>0?o.a.createElement(ee.a,{name:"web_topic_picker_remove_masonry_refactor"},({anyEnabled:e})=>o.a.createElement(a.Fragment,null,e?this.renderInterestGrid(n):o.a.createElement(ke,{gridContainerRef:this.gridContainer.current,handleInterestClickFn:t,inMasonryRefactor:!1,interests:n,isRenux:s,showTableOfContents:r}),u&&o.a.createElement(ee.a,{name:"web_renux_topic_search",isEligible:s},({anyEnabled:a})=>o.a.createElement(ee.a,{name:"web_nux_topic_search",isEligible:!s},({anyEnabled:r})=>(r||a)&&o.a.createElement(c.c,{width:"100%",paddingY:7,marginBottom:-10},o.a.createElement(De,{handleInterestClickFn:t,inMasonryRefactor:e,isRenux:s,renderInterestGrid:this.renderInterestGrid,selectedInterests:i,suggestedSearchQuery:n[0].name})))))):o.a.createElement(c.G,{accessibilityLabel:l.a._("Loading default interests"),show:!0})))}},$e=n("zwad"),qe=n("573u");function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xe extends a.PureComponent{constructor(...e){super(...e),Ve(this,"state",{defaultInterests:[],defaultInterestsSet:new Set,contextualMap:{},addedContextualTopics:new Set,numTopicsToShow:null}),Ve(this,"setShortenedRenuxExp",e=>{const{inShortenedEnabled:t,activateShortenedExpFn:n,setShortenedRenuxContainer:a}=this.props;e.length>0&&"viewed_recs"===Object(i.d)(e[0])&&n&&(n(),t&&(a(),this.setState({numTopicsToShow:5})))}),Ve(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,a=!Object(i.b)(t,e);n([e],a),this.logInterestClick(a),this.contextualUpdateInterests(new Set([e.id]))}),Ve(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(E.a)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),Ve(this,"componentName",I.r),Ve(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),Ne.default.logToServer(Ne.default.SERVER_LOG_TYPE.RENDER_TIME,Ne.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),Ve(this,"renderTimers",[])}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(i.a)(),{mostRecentPinImages:n}=this.props,a=e.concat(t);return n.concat(a)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,selectedInterests:n,keepFollowingEnabledGroup:a}=this.props;x.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:I.r,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,defaultNuxInterestsOnly:a,urlParams:$e.a.getQueryStringParams()}).callGet({showError:!1},{retries:1}).then(e=>{if(e.resource_response&&e.resource_response.data){this.logSignupTiming();const t=this.mapInterestsForDisplay(n,e.resource_response.data);this.setShortenedRenuxExp(t);const a=this.state.defaultInterests;this.setState({defaultInterests:t},()=>{a!==t&&this.renderTimers.unshift((new qe.a).start())});const o=new Set;t.forEach(e=>{!0===e.is_followed&&o.add(e.id)}),Object.keys(o).length>0&&this.contextualUpdateInterests(o)}}).catch(e=>{Ie.a&&Ie.a.showError(e.message||l.a._("Unable to load topics","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(i.b)(e,t),t)),a=[...e.filter(e=>"type_ahead_search"===Object(i.d)(e))];return n.concat(...a)}logSignupTiming(){const e=Z.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<I.w&&Ne.default.logToServer(Ne.default.SERVER_LOG_TYPE.SIGNUP_LOAD,Ne.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),Z.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:!this.props.keepFollowingEnabledGroup&&e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const a=new Set(e.map(e=>e.id)),o=n.filter(e=>!a.has(e.id));return e.concat(o)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,a=e||I.e;t(n.slice(0,a),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:a}=this.state,o=[],s=[];let r=!1;t.forEach(t=>{if(o.push(t),n.add(t.id),e.has(t.id)&&!a.has(t.id)){const e=t.contextual_interests.filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?o.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&s.push(...e),e.forEach(e=>{n.add(e.id)}),r=!0)}}),s.length>0&&o.push(...s),r&&this.setState({addedContextualTopics:new Set([...a,...e]),defaultInterests:o})}render(){const{handleBottomScroll:e,isRenux:t,selectedInterests:n,showTableOfContents:a}=this.props,{numTopicsToShow:s}=this.state,r=this.getInterestsWithUpdatedIsFollowed();return o.a.createElement(We,{disableScroll:!!s&&s<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:s?r.slice(0,s):r,isRenux:!!t,selectedInterests:n,showTableOfContents:a})}}var Ye=Object(s.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(e=>o.a.createElement(ee.a,{name:"web_renux_keep_following",isEligible:e.isRenux},({anyEnabled:t})=>o.a.createElement(ee.a,{name:"web_renux_short",isEligible:e.isRenux&&!e.isSimpleRenux,activate:!1},({anyEnabled:n,customActivate:a})=>o.a.createElement(Xe,{...e,keepFollowingEnabledGroup:t,inShortenedEnabled:n,activateShortenedExpFn:a})))),Ke=n("DzJC"),Qe=n.n(Ke),Je=n("vvax");function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const et=o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))"}},height:40,left:!0,marginTop:-10,position:"absolute",right:!0,top:!0});class tt extends a.Component{constructor(e){super(e),Ze(this,"getButtonState",(e,t,n,a,o=!1)=>{const{hideFollowedInterests:s,isRenux:i,pickButtonTextGenerator:c}=this.props,u=e.length,d=o&&u>=I.l?0:Math.max(0,t-u),{nextButtonText:h,completionNextButtonText:m}=a,p=c(d),g={done:{buttonText:m||l.a._("Done"),isDisabled:!1,allowSkip:!1},more:{buttonText:i&&s?l.a._("Next","go to next step"):r.i(h||p,{numberLeftToFollow:`${d}`}),isDisabled:!0,allowSkip:!1},skip:{buttonText:l.a._("Skip (pick topics for me)"),isDisabled:!1,allowSkip:!0}};return 0===d?g.done:n?g.skip:g.more}),Ze(this,"setShortenedRenux",()=>{const{setShortenedRenuxModal:e}=this.props;e(),this.setState({showShortRenux:!0})}),Ze(this,"handleBottomScroll",e=>{const{numberToFollow:t,selectedInterests:n,skipButton:a,nextButtonText:o,nextButtonTextSingleTopic:s,completionNextButtonText:r}=this.props,i={nextButtonText:o,nextButtonTextSingleTopic:s,completionNextButtonText:r},l=this.getButtonState(n,t||I.d,a,i,e);this.setState({...this.state,...l})}),Ze(this,"handleBottomScrollThrottled",Qe()(this.handleBottomScroll,50)),Ze(this,"handleNextClick",()=>{const{customProcessFollowedInterests:e,isRenux:t,selectedInterests:n,followedInterests:a,incrementNuxStep:o,setNuxPickerProgress:s,dispatchUpdateFollows:r,dispatchSubmitOrientationContext:i}=this.props;if(e)return t||s(I.a),e(),void o();let l;if(t){const e=a.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});l=Promise.resolve(r(e))}else{const e=[],t=[];n.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)});const a={interests:e.join(),log_data:JSON.stringify(t),referrer:"nux",user_behavior_data:Object(ye.a)()};l=Promise.resolve(i(a))}l.then(()=>{t||s(I.a),Object(E.a)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),o()})});const{nextButtonText:t,nextButtonTextSingleTopic:n,completionNextButtonText:a,isRenux:o,selectedInterests:s}=e,i={nextButtonText:t,nextButtonTextSingleTopic:n,completionNextButtonText:a},c=this.getButtonState(s,e.numberToFollow||I.d,e.skipButton,i);this.state={...c,showShortRenux:!1},this.viewType=o?213:24}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxPickerProgress:n}=this.props;t||n(I.v),e("topic"),Object(E.a)(13,{view:this.viewType,viewParameter:172})}componentDidUpdate(e){const{numberToFollow:t,selectedInterests:n,skipButton:a,nextButtonText:o,nextButtonTextSingleTopic:s,completionNextButtonText:r}=this.props;if(n.length!==e.selectedInterests.length){const e={nextButtonText:o,nextButtonTextSingleTopic:s,completionNextButtonText:r},i=this.getButtonState(n,t||I.d,a,e);this.setButtonState(i)}}setButtonState(e){this.setState({...e})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:a,personalizationCopy:{headerText:s,subHeaderText:r},preselect:i,selectedInterests:u,showTableOfContents:d,numberToFollow:h}=this.props,{isDisabled:m,buttonText:p,showShortRenux:g}=this.state;return o.a.createElement(c.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(c.c,{display:"visuallyHidden",role:"alert"},Object(Je.b)(l.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected"),{selectedTopicsCount:u.length})),o.a.createElement(c.c,{paddingX:8,marginTop:8,marginBottom:8,wrap:!0},o.a.createElement(c.m,{size:"xs"},s),t&&o.a.createElement(c.K,{size:"xl"},r)),o.a.createElement(Ye,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:h,onSelectedInterestsChange:a,preselect:i,selectedInterests:u,setShortenedRenuxContainer:this.setShortenedRenux,showTableOfContents:d}),o.a.createElement(c.c,{position:"relative"},!g&&et,o.a.createElement(c.c,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:4,paddingX:8},o.a.createElement(c.d,{size:"lg",color:"red",text:p,disabled:m,onClick:this.handleNextClick,type:"submit"}))))}}Ze(tt,"defaultProps",{skipButton:!1,pickButtonTextGenerator:e=>l.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",e,"number of interests left to pick")});var nt=Object(s.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),dispatchUpdateFollows:t=>e(Object(P.e)(t)),dispatchSubmitOrientationContext:t=>e(Object(P.b)(t)),setNuxPickerProgress:t=>e(Object(P.a)(I.s,t))}}))(tt),at=n("ozRy");const ot=(e,t)=>{return((e,t,n)=>({x:Math.floor(e*Math.cos(n)),y:Math.floor(t*Math.sin(n))}))(t/2,e/2,2*Math.random()*Math.PI)},st=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;const rt={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},it="DelightfulBubbles__",lt=[`${it}fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n`,`${it}growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n`,`${it}swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n`,...Object.keys(rt).map(e=>{const t=((e,t)=>{const n=e.length,a=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[a]})(Object.keys(rt),e);return`${it}colorChange_${e} {\n      0% {\n        background-color: ${rt[e]};\n      }\n      50% {\n        background-color: ${rt[t]};\n      }\n    }\n    `})],ct=(ut=lt,["@-webkit-keyframes","@keyframes"].map(e=>ut.map(t=>e+" "+t).join("\n")).join("\n"));var ut;function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ht=e=>{const{delay:t,diameter:n,height:a,initialColor:s,width:r,xOffset:i,yOffset:l}=e,u=((e,t,n,a,o,s,r,i)=>({bubblePositionStyles:{position:"absolute",marginLeft:`${s/2-o}px`,marginTop:`${n/2-o}px`,left:`${r}px`,top:`${i}px`},bubbleSwirlStyles:{animation:`${it}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${it}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${it}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${it}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:`${t}px`,width:`${t}px`,borderRadius:"50%",backgroundColor:rt[a],opacity:0,animation:`${it}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${it}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${it}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${it}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,a,s,Math.floor(n/2),r,i,l);return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubblePositionStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleSwirlStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleGrowShrinkStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleShapeStyles}}))))};class mt extends a.Component{constructor(...e){super(...e),dt(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){return void 0!==this.props.width&&void 0!==this.props.height?{height:this.props.height,width:this.props.width}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{}}createBubbles(e,t){const{bubbleSize:n,delayFactor:a,delayOffset:s,numBubbles:r,xRadiusAdjustment:i,yRadiusAdjustment:l}=this.props,c=e+2*l,u=t+2*i,d=[],h=Object.keys(rt);for(let m=0;m<r;m+=1){const r=n+st(-4,4),i=h[m%h.length],{x:l,y:p}=ot(c,u);d.push(o.a.createElement(ht,{delay:m*a+s,diameter:r,initialColor:i,xOffset:l,yOffset:p,height:e,width:t,key:m}))}return d}render(){const e=this.getSize();return o.a.createElement(c.c,{...e,position:"relative"},o.a.createElement("style",{dangerouslySetInnerHTML:{__html:ct}}),o.a.createElement("div",{ref:e=>this.containerElement=e},this.state.isInitialized&&this.createBubbles(e.height||0,e.width||0),o.a.createElement(c.c,{position:"relative"},this.props.children)))}}dt(mt,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var pt=mt,gt=n("BlMG"),_t=n("0S8y");function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bt=250;var St=Object(s.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),updateNameInfo:t=>e(Object(P.f)({updateUserData:t})),setNuxNameProgress:()=>e(Object(P.a)(I.t,I.a))}))(class extends a.PureComponent{constructor(...e){super(...e),ft(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),ft(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||r.h(e),showNameLengthError:!!e&&e.length>30})}),ft(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(E.a)(101,{element:136,view:24,viewParameter:259})}),ft(this,"continueAndSave",()=>{const{incrementNuxStep:e,setNuxNameProgress:t,updateNameInfo:n}=this.props,{name:a}=this.state;n(Object(_t.a)(a)).then(()=>{t(),Object(E.a)(101,{element:96,view:24,viewParameter:259}),e()})}),ft(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=l.a._("And your name is...?","Error flyout when user doesn't input name"):e&&(n=l.a._("Hmm, that's a few characters too long. Try a nickname instead?","Name exceeds 30 character maximum error")),n}),ft(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),ft(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(gt.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(E.a)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:s,showAccountSwitchModal:i,showNameInput:u}=this.state,d=r.c(l.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name."),{titleText:e,name:s}),h=e,m=l.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account"),p=this.getError(),g=o.a.createElement(c.c,{"data-test-id":"nux-edit-name-btn",marginStart:1},o.a.createElement(c.o,{accessibilityLabel:"editName",bgColor:"transparent",icon:u?"check":"edit",onClick:this.toggleNameInput,size:"sm"}));return o.a.createElement(a.Fragment,null,i&&o.a.createElement(at.a,{onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0,hideAccountSwitchValueProp:!0,customTaglineText:l.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account")}),o.a.createElement(c.c,{direction:"column",display:"flex",height:"100%",padding:10,minWidth:"100%"},o.a.createElement(c.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"around",marginBottom:10,width:"100%"},o.a.createElement(pt,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(c.c,{alignItems:"center",color:"lightWash",direction:"column",display:"flex",height:100,justifyContent:"end",overflow:"hidden",shape:"circle",width:100},o.a.createElement(c.n,{accessibilityLabel:l.a._("Loading state for any sign up registration"),color:"gray",icon:"person",size:70}))),o.a.createElement(c.c,{alignItems:"center",marginTop:5},o.a.createElement(c.K,{align:"center",size:"lg",truncate:!0},n)),o.a.createElement(c.c,{alignItems:"end",display:"flex",width:"100%"},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",marginStart:9,maxHeight:170,overflow:"hidden",width:"100%"},o.a.createElement(c.q,{htmlFor:"name"},o.a.createElement(c.m,{size:"sm"},u?h:d)),u&&o.a.createElement(c.c,{alignItems:"center","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",padding:1},o.a.createElement(c.c,{width:bt},o.a.createElement(c.M,{id:"name",errorMessage:p,onChange:this.onNameChange,placeholder:l.a._("name"),type:"text",value:s})),g)),!u&&g),o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.K,{align:"center",size:"xl"},t))),o.a.createElement(c.c,{"data-test-id":"nux_name_done_btn"},o.a.createElement(c.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:!!p,onClick:this.continueAndSave,text:l.a._("Next","next nux step button"),type:"button"})),o.a.createElement(c.c,{marginTop:4},o.a.createElement(c.P,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(c.K,{size:"lg",align:"center"},m),o.a.createElement(c.K,{align:"center",size:"lg",weight:"bold"},o.a.createElement(c.t,{href:"#"},l.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}});const xt=[{moduleName:"NuxPicker"},{moduleName:"NuxExtensionUpsell"},{moduleName:"NuxEducationLoader"}];function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Et=n("dtw8");function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class It extends a.Component{constructor(...e){super(...e),yt(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedInterests:[],userClickedBack:!1,showShortRenuxModal:!1}),yt(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:a}=this.props;Object(E.a)(4105,{view:n?213:24,viewParameter:171}),n||a(!0),e(),t&&this.handleNavigate("/")}),yt(this,"mounted",!1),yt(this,"handleNavigate",e=>{const{router:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),yt(this,"handleSelectedInterestsChange",(e,t)=>{this.setState((n,a)=>{const o=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),s=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:r}=a;return r(o.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:o,followedInterests:s}})}),yt(this,"nuxSteps",{NuxGenderStep:D,NuxLocaleCountryStep:oe,NuxPicker:nt,NuxExtensionUpsell:U,NuxEducationLoader:T,NuxWelcomeNameStep:St}),yt(this,"setShortenedRenuxModal",()=>this.setState({showShortRenuxModal:!0})),yt(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,a=t[e].moduleName;return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[a];t&&Object(E.a)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e}=this.props;this.mounted=!0,Object(E.a)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let a=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let o=!1;a=a.map(e=>e.id===t.id?(o=!0,t):e),o||a.push(t)}),a}getUpdatedSelectedInterests(e,t,n){let a=[...e];return t.forEach(t=>{const o=Object(i.b)(a,t);n&&!o?a.push({...t,is_followed:n}):!n&&o&&(a=e.filter(e=>e.id!==t.id))}),a}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:a,requestContext:o,steps:s}=this.props;let i,c;const u=e.moduleName,d=s.map(e=>e.moduleName).indexOf(u)===s.length-2;switch(u){case"NuxWelcomeNameStep":return{headerText:l.a._("Welcome to Pinterest","greeting on welcome name step"),subHeaderText:l.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step")};case"NuxGenderStep":return i=l.a._("How do you identify?","Header in NUX gender step."),c="",n&&(i=l.a._("It’s time to refresh your feed!","Title on the modal asking user's gender"),c=l.a._("How would you describe yourself?","Subtitle on the modal asking user's gender")),{headerText:i,subHeaderText:c};case"NuxLocaleCountryStep":return new j.c(o,"web_nux_us_location_upsell").enabledWithNoActivation()?{headerText:l.a._("Share your location to find ideas where you are","Experiment header in NUX locale/country step")}:{headerText:l.a._("Pick your language and country/region","Header in NUX locale/country step")};case"NuxPicker":n&&t?(i=l.a._("What are you into these days?","Header in ReNUX topic picker step."),c=l.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.")):(i=d?l.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step."):l.a._("Tell us what you're interested in","Header in NUX topic picker step."),c=r.c(l.a._("Pick {{ numberToFollow }} (or more!) to start discovering new ideas","Subheader in NUX topic picker step with required number of topics to follow"),{numberToFollow:String(I.d)}));const e=new j.b(o,"web_nux_picker_header_subheader_remove");return n||a||(e.check("enabled_subheader")?i=c:e.check("enabled_remove")&&(i=l.a._("Tell us what you're interested in","Nux topic picker header without last step"))),{headerText:i,subHeaderText:c};case"NuxExtensionUpsell":return{headerText:i=d?l.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step."):l.a._("Get our handy browser button","Header in NUX browser extension upsell step."),subHeaderText:l.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{followedInterests:n,selectedInterests:a}=this.state,{hideFollowedInterests:s,isRenux:r,isSimpleRenux:i,requestContext:l}=this.props,c=e.moduleName,u=this.nuxSteps[c],d=this.hasNuxStep("NuxGenderStep");return o.a.createElement(u,{...e.options,experiments:l.experiments,followedInterests:n,hasGenderStep:d,hideFollowedInterests:s,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isSimpleRenux:i,isRenux:r,numberToFollow:r&&s?I.u:I.d,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),requestContext:l,selectedInterests:a,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e}),setShortenedRenuxModal:this.setShortenedRenuxModal})}getNextStepIndex(e,t,n){const{isRenux:a}=this.props;let o=e+1;if(n)return o;if(!a)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}incrementNuxStep(e){const{steps:t,dispatchSubmitOrientationContextFollow:n}=this.props,{userClickedBack:a}=this.state,o=this.getNextStepIndex(e,t,a);return o>=t.length?this.onComplete:()=>{const a=t=>{if(e!==t)return this.setState({nuxStep:t})};if(t.length>o&&t[o].options&&t[o].options.onStartApi){t[o].options.onStartApi===I.g?n().finally(a):a(o)}else a(o)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{isLoading:e,nuxStep:t,showShortRenuxModal:n}=this.state,{handleDismiss:a,isLandingPage:s,isPartner:r,isRenux:i,isSimpleRenux:l,requestContext:c,steps:u}=this.props,d=e=>["NuxEducationLoader"].includes(e),h=u.filter(e=>!d(e.moduleName)),m=!d(u[t].moduleName)&&!s&&!i,p=m&&h.length>1&&!r,g=m&&!p,_=!(!i||d(u[t].moduleName));return o.a.createElement(Ee,{displayHide:_,isLoading:e,isRenux:i,isSimpleRenux:l,nuxStep:u[t],onHide:a,onPrevStepClick:this.onPrevStepClickFn(t),requestContext:c,showCounter:g,showShortRenuxPicker:n,showTableContents:p,steps:h},this.nuxStepToRender(u[t],p))}}yt(It,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(N.compose)(B.e,Object(s.connect)(({viewer:e})=>({isPartner:e.isAuth&&e.isPartner}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchSubmitOrientationContextFollow:()=>e(Object(P.c)()),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(P.d)(t))})),w.a,(function(e){class t extends a.PureComponent{constructor(...e){super(...e),wt(this,"state",{skipExtStep:!1})}componentDidMount(){const{steps:e}=this.props;R.a.extensionReady(I.m).then(t=>{e.some(e=>"NuxExtensionUpsell"===e.moduleName)&&t&&this.setState({skipExtStep:!0})})}render(){let{steps:t}=this.props;const{skipExtStep:n}=this.state;return n&&(t=t.filter(e=>"NuxExtensionUpsell"!==e.moduleName)),o.a.createElement(e,{...this.props,steps:t})}}return wt(t,"propTypes",{steps:J.a.arrayOf(J.a.shape({moduleName:J.a.string.isRequired,options:J.a.shape({})})).isRequired}),t}),(function(e){const t=function(t,n){return o.a.createElement(e,{...t,steps:t.steps||xt})};return t.propTypes={steps:J.a.arrayOf(J.a.shape({moduleName:J.a.string.isRequired,options:J.a.shape({})}))},t}),Et.withRouter)(It)},SPMB:function(e,t,n){},UPfj:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return p}));var a=n("gxu6"),o=n("pDoi"),s=n("oZBM");function r(e,t=!1,n="",a,o){return t?s.a.tier1:n&&n.includes("yahoo.co.jp")&&"JP"===e?s.a.tier1:e?(e=e||"",s.g.has(e)?s.a.tier1:s.i.has(e)?s.a.tier2:s.a.tier3):s.a.tier1}function i(){a.b("hasBeenShownLoginModalInOpen","true",s.e)}function l(e){o.b.sessionStorage.setItem("uimb",!!e)}function c(){return o.b.sessionStorage.getItem("uimb")||!1}function u(e){return void 0!==e&&o.b.sessionStorage.setItem("mdfu",e),o.b.sessionStorage.getItem("mdfu")||0}function d(e){o.b.localStorage.setItem("uoiou",!!e)}function h(){return o.b.localStorage.getItem("uoiou")||!1}function m(){o.b.sessionStorage.setItem(s.d,s.c)}function p(e=!1){return h()||o.b.sessionStorage.getItem(s.d)===s.c||!e&&c()}},VL22:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u}));var a=n("17x9"),o=n.n(a),s=n("kmwA");const r={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},i=e=>e.facebook_id?r.FACEBOOK:e.google_open_id_token?r.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?r.GOOGLE:e.email?r.EMAIL:r.OTHER,l=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(r))}),e=>e in s.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),c=e=>s.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e),u=e=>s.a.settings.AGE_COLLECTION_MARKETS.has(e)},a0jO:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),o=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue Bold"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},dg5e:function(e,t,n){n.r(t);n("bZMm");var a=n("JW66"),o=n("+NLT"),s=n("7LcF"),r=n("eOdZ"),i=n("kmwA"),l=n("BlMG"),c=n("zwad");const u=s.a.getLogger("AuthHandshake"),d={_parseJson:function(e){return e.json()},_throwError:function(e){const t=new Error(e.statusText);throw t.response=e,d._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(d._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});const s={credentials:"include",mode:"cors"};return"POST"===n&&(s.method="POST",s.body=t,s.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":o.a.instance.unauth_id},o.a.instance.unauth_id||Object(l.a)(`unauth.auth_handshake.cross_domain.no_unauth_id.${n}`)),fetch(e,s).then(d._checkStatus).then(d._parseJson).then(e=>"success"===e.status?Promise.resolve(e):e.code===a.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(d._throwError(e),{})).catch(e=>{throw e})},_reconstructError:e=>{!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_verifyAndGetToken:function(){const e=i.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return d._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e,t=!1){return r.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate()},verifyLoggedInStatus:function(){d._verifyAndGetToken().then(e=>{if(e&&e.data){const t=e.data;d.exchangeTokenAndSetSession(t).then(e=>{window.location.reload()},e=>{u.error("Failed to set session for current user; "+e.message)})}else u.error("No custom access token in cross domain verify response")},e=>{})},_setUpRegisterParameters:function(e){const t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=o.a.instance.locale,t.referrer=o.a.instance.referrer,e.age){const n=new Date;n.setFullYear(n.getFullYear()-e.age);const a=parseInt(n/1e3,10);t.birthday=a.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),o.a.instance.invite_code&&(t.invite_code=o.a.instance.invite_code),e.facebook_id){const n=o.a.instance.facebook_token||e.facebook_token||"";n||u.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=n,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return c.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e){const t={};if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=o.a.instance.referrer),e.facebook_id){const n=o.a.instance.facebook_token||e.facebook_token||"";n||u.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=n,t.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(t.mfa_token=e.mfa_token),c.a.getQueryStringFromObject(t)},_getRegisterRequestUrl:function(e){let t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),i.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){let t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),i.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){const t=d._getRegisterRequestUrl(e),n=d._setUpRegisterParameters(e);return d._crossDomainRequest(t,n,"POST")},loginUser:function(e){const t=d._getLoginRequestUrl(e),n=d._setUpLoginParameters(e);return d._crossDomainRequest(t,n,"POST")}};t.default=d},iFas:function(e,t,n){t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",FLASHLIGHT_GRID:"flashlight_grid",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},kw3W:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("ADkM"),r=n("0Bqi"),i=n("vlP9"),l=n("iFas"),c=n("h4v/"),u=n("Ye/N"),d=n("shJ5"),h=n("x/Ro"),m=n("3gA6"),p=n("eOdZ"),g=n("kmwA"),_=n("NdXn"),f=n("fArA"),b=n("gC5q"),S=n("XCz/"),x=n("/5zs"),w=n("NtFK"),E=n("U4JR"),y=n("zLLH"),I=n("liz/"),N=n("pLLR"),C=n("n6mq");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(f.compose)(N.e,Object(y.b)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(class extends a.Component{constructor(...e){super(...e),O(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),O(this,"handleAddAccount",()=>{Object(I.k)("add_account_click",null,this.props.container),this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),O(this,"trackProfileNavigateClick",e=>{Object(w.g)(14),Object(I.k)(`current_profile_${e}_click`,null,this.props.container)}),O(this,"handleSwitch",e=>{const{container:t,requestContext:n}=this.props,a=e.partner&&e.partner.is_create;this.setState({isLoading:!0}),Object(E.a)(101,{component:13369,element:11196}),Object(I.k)("switch_account_click",{destination_user_id:e.id},t);const o={get_user:!0,switch_account:e.id};c.a.getInstance().pauseImpressionsAndFlush(),Object(h.a)(o,{container:"account_switcher"},null,!0).then((o={})=>{if(o.resource_response&&o.resource_response.data&&o.resource_response.data.success){const o=new x.b(n,"web_pro_mode_header"),s=o.check("enabled_full_width")||o.check("enabled_full_width_employees");let r=a?"/":`/${e.username}`;s&&(r=`${g.a.settings.CANONICAL_MAIN_URL}/${e.username}/`,a&&(r=g.a.settings.CANONICAL_MAIN_URL)),Object(I.g)(r,e.id,t)}else Object(I.f)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(I.f)(e.id,t),this.setState({isLoading:!1}),n})}),O(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(E.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),c.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(h.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{Object(I.g)("/",e.id,t)},n=>{throw Object(I.f)(e.id,t),this.setState({isLoading:!1}),n})}else p.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(I.j)(n.id),Object(I.g)(`/${e.username}`,n.id,t)},e=>{throw Object(I.f)(n.id,t),this.setState({isLoading:!1}),e})}),O(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),O(this,"handleReauthAccount",()=>{Object(I.k)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),O(this,"handleRemoveUnauthAccount",e=>{Object(I.k)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(I.j)(e),this.setState({failedAccount:null})}),O(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;return e.data?(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(b.a)(_.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{}):null}),O(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>o.a.createElement("li",{key:n},o.a.createElement(C.P,{onTouch:()=>{this.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(s.a,{large:!0,account:e[t],viewerId:this.props.viewer.id}))),n!==I.a-2&&o.a.createElement(C.j,null)))),O(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(C.d,{text:u.a._("View profile","Visit a user profile from account switcher"),accessibilityLabel:u.a._("Go to current profile","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}),O(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t,enterProMode:n,viewer:{partner:a}}=this.props;return o.a.createElement(C.c,{display:"flex"},o.a.createElement(C.c,{marginEnd:2},o.a.createElement(S.a,{activate:!1,name:"web_pro_mode_header"},({group:e})=>{const s=e.startsWith("enabled_full_width");return o.a.createElement(m.b,{to:s&&a&&!a.is_convert?"/":"/business/hub/",onClick:()=>{Object(E.a)(101,{element:11236}),n&&n(),t&&t()}},o.a.createElement(C.d,{key:"biz-hub-button",text:u.a._("Business hub","Link to Business hub from account switcher"),accessibilityLabel:u.a._("Go to Business hub","Visit the Business hub for the current business user"),size:"sm",color:"red"}))})),o.a.createElement(S.a,{activate:!1,name:"web_pro_mode_header"},({group:n})=>{const a=n.startsWith("enabled_full_width");return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:a?`${g.a.settings.CANONICAL_MAIN_URL}/${e}/`:`/${e}/`},o.a.createElement(C.d,{text:u.a._("Profile","Visit a user profile from account switcher"),accessibilityLabel:u.a._("Go to current user profile","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}))})}componentDidMount(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(I.k)("modal.shown")}componentWillUnmount(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(I.k)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(d.a,null):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:a}=this.state,l=Object(I.e)(),c=this.getBusinessAccounts(),d=Object.keys(l).length,h=l[this.props.viewer.id];delete l[h.id];const p=h.imageLargeUrl&&!h.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(C.c,{flex:"grow"},a&&o.a.createElement(r.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?o.a.createElement(C.c,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(C.c,{marginBottom:3},o.a.createElement(C.K,null,u.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(s.a,{viewerId:h.id,account:t}),o.a.createElement(C.c,{marginTop:4},o.a.createElement(C.d,{text:u.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(C.c,{marginTop:3},o.a.createElement(C.d,{text:u.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)}))):o.a.createElement(C.c,null,n&&this.renderLoadingIndicator(),o.a.createElement(C.c,null,o.a.createElement(C.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(C.c,{marginRight:4},o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${h.username}/`},o.a.createElement(C.P,{onTouch:()=>this.trackProfileNavigateClick("avatar")},o.a.createElement(C.a,{name:h.fullName||h.username,size:"lg",src:p?h.imageLargeUrl:""})))),o.a.createElement(C.c,{flex:"grow"},o.a.createElement(C.c,{marginBottom:2},o.a.createElement(C.K,{color:"darkGray",size:"md",truncate:!0,weight:"bold"},h.fullName||h.username),h.email&&o.a.createElement(C.K,{color:"darkGray",size:"md",truncate:!0},h.email)),e?this.renderBusinessButtons(h.username):this.renderPinnerButtons(h.username))),c?o.a.createElement(i.a,{accounts:c,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(C.j,null),e&&e.is_linked_business?null:o.a.createElement(C.c,null,o.a.createElement("ul",null,this.renderAccounts(l)))),d<I.a&&!(e&&e.is_linked_business)&&o.a.createElement(C.c,{paddingX:4,paddingY:3},o.a.createElement(C.d,{text:u.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()}))))}})},"liz/":function(e,t,n){var a=n("xAAE"),o=n("JW66"),s=n("iFas");const r=e=>"undefined"!=typeof window?window.localStorage.getItem(e):null,i=(e,t)=>{"undefined"!=typeof window&&window.localStorage.setItem(e,t)},l={getAccounts:()=>r(o.a.MULTIPLE_ACCOUNTS),getAccountsJSON:()=>l.getAccounts()?JSON.parse(l.getAccounts()):{},getGroupId:()=>{const e=r(o.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:e=>i(o.a.MULTIPLE_ACCOUNTS,e),setGroupId:e=>i(o.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))};var c=l,u=n("xk4V"),d=n.n(u),h=n("D2p8"),m=n("BlMG");n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return x})),n.d(t,"i",(function(){return w})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return I}));const p=4,g=()=>c.getAccountsJSON(),_=()=>Object.keys(g()).length,f=()=>({[o.a.MULTIPLE_ACCOUNTS]:c.getAccountsJSON(),[o.a.MULTIPLE_ACCOUNTS_GROUP]:c.getGroupId()}),b=(e,t,n)=>{let a=c.getGroupId();a||(a=(()=>{const e=d()();return Object(m.c)("web_account_switcher.utils.group_created",{group_id:e,group_count:_()}),e})(),c.setGroupId(a));const o={group_id:a,group_count:_()};let r="";n&&(r=n===s.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(m.c)(`web_account_switcher.${r}${e}`,Object.assign({},t,o))},S=(e,t,n)=>{const a=c.getAccountsJSON();a[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||b("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),c.setAccounts(JSON.stringify(a)),t&&n&&b("new_account_add_success",{method:t,user_added:e.id},n)},x=e=>{const t=c.getAccountsJSON();delete t[e],c.setAccounts(JSON.stringify(t))},w=(e,t)=>{if(!(()=>!!c.getAccounts())()||e&&!(e.id in g())){if(e.partner&&e.partner.is_linked_business&&t)return void S({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});S(e)}},E=(e,t,n)=>{b("switch_account_success",{destination_user_id:t},n),Object(a.a)(e)},y=(e,t)=>{h.c.resume(h.a),b("switch_account_failure",{destination_user_id:e},t)},I=e=>{h.c.resume(h.b),Object(m.a)(`web.dismiss_account_switcher.${e}`)}},ozRy:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("kw3W"),r=n("0Bqi"),i=n("iFas"),l=n("Ye/N"),c=n("TiQD"),u=n("joD6"),d=n("n6mq"),h=n("fArA"),m=n("liz/"),p=n("zLLH");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(h.compose)(u.a,Object(p.b)({name:"UserResource",key:"businessUser",options:({viewer:e})=>({username:e.username,field_set_key:"linked_partner"})}))(class extends a.Component{constructor(e){super(e),g(this,"componentDidMount",()=>{Object(m.i)(this.props.viewer,this.props.businessUser.data)}),g(this,"showLogin",()=>this.setState({showLoginModal:!0})),g(this,"hideLogin",()=>this.setState({showLoginModal:!1}));const{showAddAccount:t}=this.props;this.state={showLoginModal:!!t}}render(){const{customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:a,viewer:u,enterProMode:h}=this.props;return this.state.showLoginModal?o.a.createElement(r.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onClose:a?n:this.hideLogin,customTaglineText:e,hideAccountSwitchValueProp:t}):o.a.createElement(d.c,{position:"relative"},o.a.createElement(c.b,{accessibilityModalLabel:l.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts"),size:"sm",heading:l.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),accessibilityCloseLabel:l.a._("Dismiss selection","Label for dismissing the modal"),onDismiss:n},o.a.createElement(s.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:()=>n(),showLogin:this.showLogin,viewer:u,enterProMode:h})))}})},q23S:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),o=n.n(a),s=n("Ye/N"),r=n("MKeS"),i=n("n6mq");const l=Object(r.a)({chunkName:()=>"FullPageSignup",isReady(e){return!!n.m[this.resolve(e)]},requireAsync:()=>Promise.all([n.e(1),n.e(6),n.e(7),n.e("FullPageSignup")]).then(n.bind(null,"pXxl")),requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"pXxl"}});function c(e){return o.a.createElement(l,{...e,fallback:o.a.createElement(i.c,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(i.G,{accessibilityLabel:s.a._("Loading signup form"),show:!0}))})}},shJ5:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("Ye/N"),r=n("n6mq");const i={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};t.a=e=>o.a.createElement("div",null,o.a.createElement("div",{style:i.spinner},o.a.createElement(r.G,{accessibilityLabel:s.a._("Loading"),show:!0})),o.a.createElement("div",{style:i.loadingIndicatorMask}))},vVbV:function(e,t,n){function a(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return a}))},vlP9:function(e,t,n){var a=n("q1tI"),o=n.n(a),s=n("ADkM"),r=n("n6mq");t.a=e=>{const t=Object.keys(e.accounts).length;return o.a.createElement(r.c,{position:"relative"},o.a.createElement(r.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(r.P,{onTouch:()=>e.onClick(n)},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(s.a,{account:n}))))})))}},"x/Ro":function(e,t,n){var a=n("dg5e"),o=n("+NLT"),s=n("7LcF"),r=n("eOdZ"),i=n("pDoi"),l=n("kmwA"),c=n("JW66"),u=n("BlMG");const d=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function h(e,t,n="unknown_source",a=!1){if(e){const o=e.http_status===c.a.RESPONSE_CODE_TOO_MANY_REQUESTS?c.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;let s=o;d.has(o)&&(s=d.get(o));const{container:r}=t;a?Object(u.a)(`unauth_web_client_cctld_login_api_error.${String(s)}.${r||"unknow_container"}.${n}`):Object(u.a)(`unauth_web_client_login_api_error.${String(s)}.${r||"unknow_container"}.${n}`)}}var m=n("UPfj"),p=n("VL22"),g=n("53sj");const _=s.a.getLogger("UserLogin"),f=s.a.getLogger("AuthHandshake"),b=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?p.a.FACEBOOK:e.google_open_id_token?p.a.GOOGLE_ONE_TAP:e.gplus_id_token?p.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?p.a.EMAIL:p.a.OTHER},S=function(e,t){let n="referrer_unknown";try{const e=document.referrer;n=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const a=b(e),o=t===Object(t)?t.hybridTier:"tier_unknown",s=t===Object(t)?t.container:"container_unknown";Object(u.a)("login.referrer."+n+"."+a),Object(u.a)("login.container."+s+"."+a),Object(u.a)("login.type."+a);const r=b(e)||"method_unknown",i=t.page||"page_unknown";e.gplus_autologin?Object(u.a)("web_autologin_google"):e.facebook_autologin?Object(u.a)("web_autologin_facebook"):Object(u.a)(`web_login.${r}.success.${i}.${s}.${n}.${o}`)},x=(e,t)=>{Object(u.a)(`web_cross_domain_login.${e}.${b(t)}`)};t.a=function(e,t={},n=null,s=!1,c,u){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==l.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(o.a.instance.origin))return function(e,t){return x("attempt",e),a.default.loginUser(e).then(n=>{if(n&&n.data){x("success_with_token",e);const o=n.data;return a.default.exchangeTokenAndSetSession(o).then(n=>(x("success_token_exchanged",e),S(e,t),f.debug("Cross domain login successful"),Promise.resolve()),t=>{throw x("success_token_not_exchanged",e),f.error("Failed to set session for current user; "+t.message),t})}throw x("success_without_token",e),f.error("No custom access token in cross domain login response"),new Error},n=>{throw x("failure",e),h(n,t,b(e),!0),f.error("Failed to login user; "+n.message),n})}(e,t)}e.switch_account&&(e.get_user=!!s||e.get_user);const d=s?null:i.b.localStorage.getItem("visitedPagesBeforeLogin"),p={...e,app_type_from_client:5,visited_pages_before_login:d?JSON.stringify(d):null,recaptchaToken:c,tokenV3:u};return r.a.create("UserSessionResource",p).callCreate({showError:!1,async:!0}).then(n=>(_.debug("Login, successful",n),S(e,t),Object(m.g)(!1),Object(g.a)("login").then(()=>n)),n=>(h(n,t,b(e)),Promise.reject(n)))}}}]);
//# sourceMappingURL=pjs-19-4684ee6304a94cff1698.mjs.map
