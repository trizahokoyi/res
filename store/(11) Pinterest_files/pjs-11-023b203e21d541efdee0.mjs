(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[11],{"/WHw":function(e,t,n){n.d(t,"a",(function(){return v}));var a=n("q1tI"),i=n.n(a),o=n("/MKj"),r=n("JW66"),s=n("Ye/N"),c=n("joD6"),l=n("oN2T"),d=n("5FNA"),h=n("vvax"),p=n("Wer7"),u=n("fArA"),m=n("c50B");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t,n;return n=t=class extends a.Component{constructor(...e){super(...e),g(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[Object(m.e)({message:s.a._("Don't forget to name your board!")}),Object(m.b)({max:r.a.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:Object(h.b)(s.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long"),{maxLength:r.a.MAX_CHARS_FOR_BOARD_TITLE})})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.PROTECTED,saving:!1}),g(this,"handleChangeName",(e,t)=>{const n=Object(m.g)(this.state.nameValidators,e);this.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},()=>{t&&this.handleCreate()})}),g(this,"handleChangePrivacy",()=>{const e=this.state.privacy===r.a.BoardPrivacy.SECRET?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.SECRET;this.setState({privacy:e})}),g(this,"handleCreate",()=>{const{inputName:e,privacy:t}=this.state,{createBoard:n,invalidateResource:a,onCreate:i,isAdAccountOwner:o,advertiser_id:r}=this.props,c={privacy:t,name:e,...!o&&r?{advertiser_id:r}:{}};this.setState({saving:!0,createBoardError:null}),n(c).then(e=>{this.setState({saving:!1}),i(e)}).catch(e=>{let t=s.a._("Uh oh! Something went wrong.");if(e.message){const{message:n,message_detail:a}=e;t=a?`${n} ${a}`:n}else"string"==typeof e&&(t=e);this.setState({saving:!1,createBoardError:t})}),a(t)})}UNSAFE_componentWillReceiveProps(e){e.prefilledName&&this.setState({inputName:e.prefilledName})}render(){const{createBoard:t,invalidateResource:n,...a}=this.props;return i.a.createElement(e,{onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate,...a,...this.state})}},g(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),n}function f(e){const{advertiser:t,viewer:n}=e,a=!t||n.isAuth&&t.owner_user_id===n.id,i=t&&t.id;return{isAdAccountOwner:a,...i?{advertiser_id:i}:{}}}function E(e,t){return{invalidateResource:n=>{e(Object(p.f)("BoardsResource",Object(d.a)(t.viewer.username,n===r.a.BoardPrivacy.SECRET)))},createBoard:t=>e(Object(l.f)(t))}}function v(e){return Object(u.compose)(c.a,Object(o.connect)(f,E),b)(e)}},"3z7j":function(e,t,n){n.d(t,"a",(function(){return i}));var a=n("Wer7");function i(e,t){return n=>n(Object(a.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"6A0I":function(e,t,n){var a=n("q1tI"),i=n("/MKj"),o=n("JW66"),r=n("Sihc"),s=n("Ye/N"),c=n("GBVV"),l=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(i.connect)()(class extends a.Component{constructor(e){super(e),d(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:a}=this.props;return this.setState({isSaving:!0}),t(Object(r.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:a})).then(e=>{this.setState({isSaving:!1,newSection:e}),n(e)}).catch(e=>{this.setState({createError:e.message,isSaving:!1})})}),d(this,"handleKeyDown",({event:e,value:t})=>{const{createError:n,inputName:a}=this.state;[o.a.KeyCode.ENTER,o.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&a.trim()&&this.onCreateSection()}),d(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),d(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:a}=this.state;!a||t.inputRef&&!n||a.focus()}render(){const{onClearModal:e,showTitle:t,positionRelative:n}=this.props,{createError:i,inputName:o,isSaving:r}=this.state,d=!!o.trim()&&!i;return a.createElement(l.c,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:n?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},t&&a.createElement(l.c,{marginTop:3,paddingX:6,paddingY:3},a.createElement(l.K,{size:"xl",weight:"bold"},s.a._("Add section","Title in the add section modal"))),a.createElement(l.c,{padding:3},a.createElement(l.c,{marginBottom:2},a.createElement(l.q,{htmlFor:"sectionEditName"},a.createElement(l.K,{size:"sm",color:i?"red":"gray"},s.a._("Name","Board section name")))),a.createElement(l.c,null,a.createElement(l.c,{ref:this.handleInputRef},a.createElement(l.M,{id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,errorMessage:i||"",placeholder:s.a._('Like "Lighting"',"Placeholder for board section name"),type:"text",value:o})))),a.createElement(l.j,null),a.createElement(l.c,{display:"flex",flex:"grow"}),a.createElement(l.j,null),a.createElement(l.c,{padding:6},a.createElement(l.c,{display:"flex",justifyContent:"between"},a.createElement(l.d,{onClick:e,text:s.a._("Cancel","cancel section add"),inline:!0}),a.createElement(c.b,{disabled:!d||r,onClick:this.onCreateSection,submitting:r,text:s.a._("Add","add a new section")}))))}})},"6G9P":function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n("JW66");const i=(e,t)=>{if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const a=n.exec(t);if(a&&a.length){e=a[0]+e}}return e},o=e=>{const t=a.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:e.length>50?e.slice(0,50).trim()+"…":e,full:e.length>t?e.slice(0,t):e}}},B6Tf:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("b/K5"),r=n("/MKj"),s=n("JW66"),c=n("Ye/N"),l=n("GBVV"),d=n("/WHw"),h=n("fArA"),p=n("n+wb"),u=n("n6mq");var m=Object(h.compose)(d.a)(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=e=>{e.preventDefault(),this.props.onBoardCreate()},(n="handleBoardCreateFormSubmit")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{createBoardError:e,inputName:t,nameValidatorErrors:n,onCancel:a,onChangeBoardName:o,onChangeBoardPrivacy:r,onInvite:d,privacy:h,saving:m,showTitle:g,isAdAccountOwner:b}=this.props,f=0===n.length,E=h===s.a.BoardPrivacy.SECRET;return i.a.createElement(u.c,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},i.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},i.a.createElement(u.c,{direction:"column",display:"flex",height:"100%"},g&&i.a.createElement(u.c,{display:"flex",marginTop:3,paddingX:6,paddingY:3},i.a.createElement(u.K,{size:"xl",weight:"bold"},c.a._("Create board"))),i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"boardEditName"},i.a.createElement(u.K,null,c.a._("Name")))),i.a.createElement(u.c,null,i.a.createElement(u.M,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>o(e),placeholder:c.a._('Like "Places to Go" or "Recipes to Make"'),value:t}))),i.a.createElement(u.j,null),b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"secret"},i.a.createElement(u.K,null,c.a._("Secret","secret board")))),i.a.createElement(u.c,null,i.a.createElement(u.I,{onChange:r,id:"secret",switched:E}))),i.a.createElement(u.j,null),i.a.createElement(u.c,{display:"flex",flex:"grow",overflow:"hidden"},i.a.createElement(u.c,{width:"100%"},i.a.createElement(p.a,{onSelectedCollaboratorsChange:d,inCollabInBoardCreateExperiment:!1}))),i.a.createElement(u.j,null)),!b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"protected"},i.a.createElement(u.K,null,c.a._("Protected board (not listed on user's profile)","protected board")))),i.a.createElement(u.c,null,i.a.createElement(u.I,{onChange:()=>void 0,id:"protected",switched:!0,disabled:!0}))),i.a.createElement(u.j,null)),i.a.createElement(u.c,{padding:6},!!e&&i.a.createElement(u.c,{marginBottom:3},i.a.createElement(u.K,{align:"center",color:"red",size:"sm",weight:"bold"},e)),i.a.createElement(u.c,{display:"flex",justifyContent:"between"},i.a.createElement(u.d,{inline:!0,onClick:a,text:c.a._("Cancel","cancel board create")}),i.a.createElement(l.b,{disabled:!t.trim()||!f||!!e||m,submitting:m,text:c.a._("Create","create a new board")}))))))}}),g=n("6A0I"),b=n("joD6");var f=Object(h.compose)(b.a,d.a)(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=()=>{const{inputName:e,nameValidatorErrors:t,onChangeBoardName:n}=this.props,a=0===t.length;e.trim()&&a?this.props.onBoardCreate():n(e)},(n="handleOnBoardCreate")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{collabInBoardCreateExperimentGroup:e,createBoardError:t,inputName:n,nameValidatorErrors:a,onChangeBoardName:o,onChangeBoardPrivacy:r,onInvite:d,privacy:h,isSavingAvalible:m,setModalFooter:g,showTitle:b,isAdAccountOwner:f}=this.props,E=h===s.a.BoardPrivacy.SECRET;return g(i.a.createElement(u.c,{display:"flex",direction:"row",justifyContent:"end",marginLeft:-1,marginRight:-1},i.a.createElement(u.c,{paddingX:1},i.a.createElement(l.b,{disabled:!!t||m,submitting:m,text:c.a._("Create","create a new board"),onClick:this.handleOnBoardCreate})))),i.a.createElement(u.c,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0,paddingX:3,marginTop:3},i.a.createElement(u.c,{direction:"column",display:"flex",height:"100%"},b&&i.a.createElement(u.c,{display:"flex",marginTop:3,paddingX:6,paddingY:3},i.a.createElement(u.K,{size:"xl",weight:"bold"},c.a._("Create board","Title for create board pane"))),i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"boardEditName"},i.a.createElement(u.K,null,c.a._("Name","Lable for board name input field")))),i.a.createElement(u.c,null,i.a.createElement(u.M,{errorMessage:a.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>o(e),placeholder:c.a._('Like "Places to Go" or "Recipes to Make"',"Placeholder for board name input field"),value:n}))),f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"secret"},i.a.createElement(u.K,null,c.a._("Secret","secret board")))),i.a.createElement(u.c,null,i.a.createElement(u.I,{onChange:r,id:"secret",switched:E}))),i.a.createElement(u.c,{display:"flex",flex:"grow",overflow:"hidden"},i.a.createElement(u.c,{width:"100%"},i.a.createElement(p.a,{onSelectedCollaboratorsChange:d,collabInBoardCreateExperimentGroup:e})))),!f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.c,{padding:3},i.a.createElement(u.c,{marginBottom:2},i.a.createElement(u.q,{htmlFor:"protected"},i.a.createElement(u.K,null,c.a._("Protected board (not listed on user's profile)","protected board")))),i.a.createElement(u.c,null,i.a.createElement(u.I,{onChange:()=>void 0,id:"protected",switched:!0,disabled:!0})))),!!t&&i.a.createElement(u.c,{padding:6},i.a.createElement(u.c,{marginBottom:3},i.a.createElement(u.K,{align:"center",color:"red",size:"sm",weight:"bold"},t)))))}}),E=n("zLLH"),v=n("0BOE"),_=n("qyR9");var S=Object(E.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})})(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=e=>{const{board:t,sectionsResource:{data:n}}=this.props;return e.length>=_.a?[{items:Object(v.a)([t],e),customProps:{inSectionSelection:!0}},{items:Object(v.a)(n,e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:n}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:a,onSectionCreate:o,onSectionSelected:r,pinId:s}=this.props;return i.a.createElement(_.b,{isSelectMode:a,boardSavedTo:n,createButtonLabel:c.a._("Add section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:s})}}),C=n("Wer7"),y=n("U4JR");const w=2,I=3,x=void 0,T=e=>{const t=[],n=[];return e.forEach(e=>{e.name.match(/^\d/)?n.push(e):t.push(e)}),[...t,...n]};function B(e,t,n){return{...e?{pin_id:e}:{},...t?{username:t}:{},...n?{advertiser_id:n,filter:"protected"}:{},field_set_key:"board_picker",limit:x,shortlist_suggestions:w}}var O=Object(h.compose)(Object(r.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}})),Object(E.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>B(e.pinId,e.username,e.advertiser_id)}))(class extends a.Component{constructor(...e){var t,n,a;super(...e),a=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:a}=t,i=T(n);return i.length<=I?[{items:i}]:e.length>=_.a?[{items:Object(v.a)(i,e)}]:[a.length?{items:a,title:c.a._("Top choices")}:{items:[]},{items:i,title:c.a._("All boards","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:a,isSelectMode:o,onBoardCreate:r,onBoardSelected:s,pinId:c}=this.props,l=n&&!!e&&e.all_boards.length<=I;return i.a.createElement(_.b,{isSelectMode:o,boardSavedTo:a,hasLoadError:!!t,hasLowBoardCount:l,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:s,pinId:c})}});function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=Object(r.connect)(null,(function(e,t){return{invalidateResource:()=>{e(Object(C.f)("BoardPickerBoardsResource",B(t.pinId)))},invalidatePinBetterSaveResource:()=>{e(Object(C.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(class extends i.a.Component{constructor(...e){super(...e),j(this,"state",{newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1,inviteQueue:{}}),j(this,"close",()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()}),j(this,"sendInvites",e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach(n=>{t[n].resource(e.id,[n])})}),j(this,"handleInvite",e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}}),j(this,"handleBoardCreate",e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),j(this,"handleBoardSave",(e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:a,invalidatePinBetterSaveResource:i,invalidateResource:o}=this.props;if(o(),i(),n&&"board_section"===e.type){return a(n,e,t)}const r=e,{section_count:s=0}=r;!n&&s>0?this.setState({selectedSectionBoard:r},this.manageModalTitle):(this.sendInvites(e),a(r,void 0,t))}),j(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,a=e?10306:249;Object(y.a)(101,{component:n,element:a})}),j(this,"manageModalTitle",()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?c.a._("Add section","Repin title for making a board section"):n&&!t?c.a._("Create board","Repin title for making a new board"):t&&!n?c.a._("Choose section","Repin title for choosing a board section"):c.a._("Choose board","Repin title for choosing a board"))})}render(){const{collabInBoardCreateExperimentGroup:e,boardSavedTo:t,isRepin:n,isSelectMode:a,pinId:o,setModalTitle:r,setModalFooter:s,suggestedBoardTitle:c}=this.props,{newName:l,selectedSectionBoard:d,showCreate:h}=this.state,p=!!d,b=!r,E=(e||"").startsWith("enabled");return i.a.createElement(u.c,{display:"flex",width:"100%",position:"relative"},!h&&i.a.createElement(u.c,{width:"100%",display:"flex",direction:"column",marginTop:4},d?i.a.createElement(S,{isSelectMode:a,board:d,boardSavedTo:t,onSectionCreate:this.handleCreate(p),onSectionSelected:this.handleBoardSave}):i.a.createElement(O,{isSelectMode:a,boardSavedTo:t,onBoardCreate:this.handleCreate(p),onBoardSelected:this.handleBoardSave,pinId:o})),h&&!d&&(E?i.a.createElement(f,{collabInBoardCreateExperimentGroup:e||"",prefilledName:l||c,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,showTitle:b,setModalFooter:s}):i.a.createElement(m,{prefilledName:l||c,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,showTitle:b})),h&&d&&i.a.createElement(g.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:l,isRepin:n,onClearModal:this.close,showTitle:b}))}}),P=n("c4Fo"),R=n("TiQD"),N=n("v+PR"),A=n("Ev07"),D=n("G35+"),L=n("mBfy");var M=Object(h.compose)(Object(r.connect)(({viewer:e})=>({viewer:e}),()=>({})),Object(E.b)({name:"UserResource",key:"userSocialResource",options:e=>({user_id:e.viewer&&e.viewer.isAuth?e.viewer.id:"",field_set_key:"social_connect"})}))((function({onSocialConnect:e,userSocialResource:{data:t,isLoaded:n}}){const[o,r]=Object(a.useState)(!!(n&&t&&t.facebook_publish_stream_enabled)),[s,l]=Object(a.useState)(!!(n&&t&&t.twitter_publish_enabled));if(Object(a.useEffect)(()=>{n&&t&&(r(!!t.facebook_publish_stream_enabled),l(!!t.twitter_publish_enabled))},[t,n]),!t)return null;const{connected_to_facebook:d,twitter_url:h}=t,p=t=>{r(t),L.default.set("facebook_publish_stream_enabled",t),e(D.a.FACEBOOK,t)};return!(!d&&!h)&&i.a.createElement(u.c,{display:"flex",padding:2},d&&i.a.createElement(u.c,{display:"flex",alignItems:"center",marginLeft:2},i.a.createElement(u.f,{checked:o,id:"share_facebook",onChange:()=>{o?p(!1):A.a.maybeRequestFbTimelinePermission({success:()=>p(!0),error:()=>p(!1)})},size:"sm"}),i.a.createElement(u.q,{htmlFor:"share_facebook"},i.a.createElement(u.c,{marginLeft:2},i.a.createElement(u.K,null,c.a._("Post to Facebook"))))),h&&i.a.createElement(u.c,{display:"flex",alignItems:"center",marginLeft:5},i.a.createElement(u.f,{checked:s,id:"share_twitter",onChange:()=>{const t=!s;l(t),e(D.a.TWITTER,t)},size:"sm"}),i.a.createElement(u.q,{htmlFor:"share_twitter"},i.a.createElement(u.c,{marginLeft:2},i.a.createElement(u.K,null,c.a._("Post to Twitter"))))))})),F=n("Yo6N"),K=(n("PipX"),n("UTsl")),W=n("udob"),H=n("bcvc");function z(e){const{name:t}=e;let n,i,o="-7 -7 30 30";switch(t){case"facebook":i=a.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),n=a.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":i=a.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),n=a.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":o="0 0 16 16",n=a.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":i=a.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),n=a.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:n=null}return a.createElement("svg",{width:"36",height:"36",viewBox:o},i,n)}var U=n("oVol");function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class G extends a.Component{constructor(...e){super(...e),q(this,"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),q(this,"selectText",e=>{e.target.select()}),q(this,"openSocialDialog",(e,t)=>{const{handleShare:n,dismissModal:a,experienceComplete:i}=this.props;let o;switch(e){case"facebook":K.default.logIn(this.state.fb,()=>{W.a.shareFacebookInvite(this.getShareOptions(5))});break;case"messenger":K.default.logIn(this.state.fb,()=>{W.a.shareFbMessengerInvite(this.getShareOptions(6))});break;case"link":o=this.getShareOptions(12),W.a.createAndLogShareInvite(o).then(e=>{const t=e.invite_url;t?this.setState({pinterestProfileLink:t,showShareLink:!0}):n&&n()});break;default:n&&n()}"link"!==e&&(i&&i(),a(!0))}),q(this,"handleShareLinkDismiss",e=>{this.setState({showShareLink:!1})}),q(this,"handleFacebookClick",e=>{this.openSocialDialog("facebook",e)}),q(this,"handleMessengerClick",e=>{this.openSocialDialog("messenger",e)}),q(this,"handlePinterestClick",e=>{this.openSocialDialog("pinterest",e)}),q(this,"handleLinkClick",e=>{this.openSocialDialog("link",e)})}componentDidMount(){K.default.ensureInit(e=>this.setState({fb:e}))}getShareOptions(e){const{pin:t}=this.props;return{invite_channel:e,object_type:U.a.PIN,object_id:t.id,name:"",description:t.description||"",path:`/pin/${t.id}/`,picture:t.images&&t.images["236x"]&&t.images["236x"].url||""}}render(){const{close:e}=this.props,{pinterestProfileLink:t,showShareLink:n}=this.state,a=i.a.createElement(H.a,{link:t,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),o=(e,t,o)=>{const r="share-upsell-label-"+e;let s="";return"facebook"===e?s="#3b5998":"messenger"===e&&(s="#1da1f2"),"link"===e&&n?a:i.a.createElement(u.P,{onTouch:({event:e})=>o(e),fullWidth:!1},i.a.createElement(u.c,{display:"flex",paddingY:2,alignItems:"center"},i.a.createElement(z,{name:e}),i.a.createElement(u.h,{xs:1}),i.a.createElement("div",{id:r},i.a.createElement(u.K,{size:"xl",weight:"bold"},i.a.createElement("span",{style:{color:s}},t)))))};return i.a.createElement(u.c,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},i.a.createElement("div",null,i.a.createElement(u.c,{paddingX:6,flex:"none"},i.a.createElement(u.c,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},i.a.createElement(u.o,{icon:"cancel",onClick:e,accessibilityLabel:c.a._("Cancel"),size:"sm"})),i.a.createElement(u.m,{size:"md"},c.a._("Saved!","Save pin to board")),i.a.createElement(u.c,{paddingY:3,marginRight:8},i.a.createElement(u.K,{size:"xl"},c.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),i.a.createElement(u.c,{paddingY:2,flex:"none"},o("facebook",c.a._("Send on Facebook"),this.handleFacebookClick),o("messenger",c.a._("Send on Messenger"),this.handleMessengerClick),o("pinterest",c.a._("Send on Pinterest"),this.handlePinterestClick),o("link",c.a._("Send a link"),this.handleLinkClick)))),i.a.createElement(u.h,{xs:1}))}}var V=n("XCz/");function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return X})),n.d(t,"c",(function(){return ee})),n.d(t,"b",(function(){return te}));const X=4e3,$=660,Z=236,J=649,Q=588,ee={LOADING:"loading",SUCCESS:"success"};class te extends a.Component{constructor(...e){super(...e),Y(this,"state",{experienceComplete:()=>{},experienceDismiss:()=>{},height:0,modalFooter:null}),Y(this,"pinImageRef",Object(a.createRef)()),Y(this,"unmounted",!1),Y(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),Y(this,"scrollToRelatedPins",()=>{document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:this.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,this.state.height)}),Y(this,"_adjustHeightToPin",()=>{0===this.state.height&&(this.safeSetState({height:$}),this.props.onHeightChange&&this.props.onHeightChange($))}),Y(this,"close",()=>{const{handleAbort:e}=this.props;this.experienceDismiss&&this.experienceDismiss(),e()}),Y(this,"dismissModal",e=>{const{dismissModal:t}=this.props;this.experienceDismiss&&!e&&this.experienceDismiss(),t&&t()}),Y(this,"setModalFooter",e=>{this.setState({modalFooter:e})})}componentDidMount(){this._adjustHeightToPin()}componentDidUpdate(){this._adjustHeightToPin()}componentWillUnmount(){this.unmounted=!0}renderExperimental(e){const{boardSavedTo:t,boardWithSection:n,color:a,displaySuccessAnimation:r,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:l,handleSaveToBoard:d,isInModal:h,newPin:p,pin:m,onCloseAndShare:g,onBoardCreated:b,sensitiveContentNotice:f,setModalTitle:E,showCreate:v,showSharingUpsell:_,shouldRenderContent:S,suggestedBoardTitle:C,updateDescription:y}=this.props;if(!m||!m&&!m.resourceLoaded||!S)return null;const{modalFooter:w}=this.state;let I=null;p&&p.board&&(I=p.board.name);const x=Q,T=f&&f.title||this.props.modalTitle,B=f?i.a.createElement(F.a,{notice:f,inModal:!0}):i.a.createElement(u.c,{position:"relative",height:x,width:"100%",display:"flex",justifyContent:"center"},i.a.createElement(u.c,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},i.a.createElement(u.c,{width:"45%",direction:"column",display:"flex",justifyContent:"between"},i.a.createElement(u.c,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:6},i.a.createElement(N.a,{color:a,pin:m,pinImageRef:this.pinImageRef,updateDescription:y,width:Z})),i.a.createElement(M,{onSocialConnect:l})),_?i.a.createElement(P.a,{placementId:33,experienceIds:[500388]},({complete:e,dismiss:t,display_data:n})=>(this.experienceComplete=e,this.experienceDismiss=t,i.a.createElement(G,{handleShare:g,close:this.close,experienceComplete:e,pin:m,dismissModal:this.dismissModal}))):i.a.createElement(u.c,{display:"flex",width:"60%"},i.a.createElement(k,{boardSavedTo:t,boardWithSection:n,collabInBoardCreateExperimentGroup:e,isRepin:!0,onBoardCreated:b,onBoardSave:d,onClose:this.close,pinId:m.id,showCreate:v,suggestedBoardTitle:C,setModalTitle:h?E:void 0,setModalFooter:this.setModalFooter}))),r&&i.a.createElement(o.b,{onDismiss:()=>{s&&s(),this.dismissModal()},pin:m,pinImageRef:this.pinImageRef,selectedBoardName:I}));return h?i.a.createElement(R.b,{accessibilityCloseLabel:c.a._("Close","Accessibility lable for close pin to board create modal"),accessibilityModalLabel:T,onDismiss:this.close,heading:T,footer:w,size:J},B):B}renderOriginal(){const{boardSavedTo:e,boardWithSection:t,color:n,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:r,handleSocialConnectSet:s,handleSaveToBoard:l,isInModal:d,newPin:h,pin:p,onCloseAndShare:m,onBoardCreated:g,sensitiveContentNotice:b,setModalTitle:f,showCreate:E,showSharingUpsell:v,shouldRenderContent:_,suggestedBoardTitle:S,updateDescription:C}=this.props;if(!p||!p&&!p.resourceLoaded||!_)return null;const{height:y}=this.state;let w=null;h&&h.board&&(w=h.board.name);const I=y||660,x=b&&b.title||this.props.modalTitle,T=b?i.a.createElement(F.a,{notice:b,inModal:!0}):i.a.createElement(u.c,{position:"relative",height:I,width:"100%",display:"flex",justifyContent:"center"},i.a.createElement(u.c,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},i.a.createElement(u.c,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},i.a.createElement(u.c,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},i.a.createElement(N.a,{color:n,pin:p,pinImageRef:this.pinImageRef,updateDescription:C})),i.a.createElement(M,{onSocialConnect:s})),v?i.a.createElement(P.a,{placementId:33,experienceIds:[500388]},({complete:e,dismiss:t,display_data:n})=>(this.experienceComplete=e,this.experienceDismiss=t,i.a.createElement(G,{handleShare:m,close:this.close,experienceComplete:e,pin:p,dismissModal:this.dismissModal}))):i.a.createElement(u.c,{display:"flex",width:"60%"},i.a.createElement(k,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:g,onBoardSave:l,onClose:this.close,pinId:p.id,showCreate:E,suggestedBoardTitle:S,setModalTitle:d?f:void 0}))),a&&i.a.createElement(o.b,{onDismiss:()=>{r(),this.dismissModal()},pin:p,pinImageRef:this.pinImageRef,selectedBoardName:w}));return d?i.a.createElement(R.b,{accessibilityCloseLabel:c.a._("Close"),accessibilityModalLabel:x,onDismiss:this.close,heading:x,size:"lg"},T):T}render(){return i.a.createElement(V.a,{name:"web_collaborators_in_board_create_v3"},({anyEnabled:e,group:t})=>e?this.renderExperimental(t):this.renderOriginal())}}Y(te,"defaultProps",{pwtAuxData:{}})},GBVV:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n("q1tI"),i=n("n6mq");const o={__style:{borderRadius:4}},r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return a.createElement(i.c,{alignItems:"center",color:"red",dangerouslySetInlineStyle:o,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},a.createElement(i.c,{dangerouslySetInlineStyle:r,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}function c({disabled:e,submitting:t,text:n,...o}){return a.createElement(i.c,{display:"flex",position:"relative"},t&&a.createElement(s,null),a.createElement(i.d,{...o,inline:!0,color:"red",type:"submit",text:n,disabled:e||t}))}},PipX:function(e,t,n){},Sihc:function(e,t,n){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var a=n("Pqnw"),i=n("uVIr"),o=n("VqlB"),r=n("eOdZ"),s=n("oN2T"),c=n("KFEb"),l=n("Wer7");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function h({boardId:e,name:t,nameSource:n,pinImport:h}){let p=0;"RECOMMENDATION"===n?p=1:"EDITED_RECOMMENDATION"===n&&(p=2);const u={board_id:e,initial_pins:h&&!h.all?h.pinIds:[],name:t,name_source:p};return t=>r.a.create("BoardSectionResource",u).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(i.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.b)(e,"pin_count")),t(Object(l.f)("BoardSectionsRepinResource",{board_id:e}));const{all:r,pinIds:p}=h||{all:!1,pinIds:[]};return r?new Promise((a,i)=>t(Object(o.a)({inverseSelection:!0,selectedPinIds:p,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>a(n)).catch(i)):(p.length>0&&t(Object(a.a)(c.a.BOARD_PINS,e)),n)})}},VqlB:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var a=n("3z7j"),i=n("Pqnw"),o=n("uVIr"),r=n("MhBu"),s=n("eOdZ"),c=n("oN2T"),l=n("KFEb"),d=n("gzTk");const h=e=>Object(i.a)(e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const{source:n,target:i}=e;i.boardId!==n.boardId?(t(Object(c.b)(n.boardId,"pin_count")),t(Object(c.b)(i.boardId,"pin_count"))):n.sectionId&&i.sectionId||t(Object(c.b)(i.boardId,"pin_count")),n.sectionId&&t(Object(a.a)(n.sectionId)),i.sectionId&&t(Object(a.a)(i.sectionId))}function u(e){return t=>{const{selectedPinIds:n,source:a,target:i}=e;t(Object(r.a)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(o.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function m(e){return t=>(function(e,t){const{inverseSelection:n,selectedPinIds:a,source:i,target:c}=e;if(i.boardId===c.boardId&&(i.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:i.boardId,new_board_id:c.boardId,old_section_id:i.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(h(i)),t(h(c))])).catch(d.a)}{const e=(e,n)=>{t(Object(r.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"})),t(Object(o.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"}))};e(i,c);const n=()=>e(c,i);if(c.boardId===i.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:a};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}{const e={section_id:i.sectionId,pins:a};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}})(e,t).then(()=>p(e,t))}},WnNx:function(e,t,n){function a(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function i(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}))},Yo6N:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("3gA6"),r=n("n6mq");function s({action:e,alignCenter:t}){const{title:n,description:a,button:s}=e,c=n&&n.text,l=a&&a.text,d=s&&s.text||"",h=s&&s.link||"",p=s&&s.link?s.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return s&&d&&h.startsWith("http")?i.a.createElement(r.c,null,i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left",weight:"bold"},""!==d?d:"Visit")),i.a.createElement(r.c,{marginBottom:1},i.a.createElement(o.b,{className:"underlineLink",to:h},i.a.createElement("span",{style:{textDecoration:"underline"}},i.a.createElement(r.K,{align:t?"center":"left",truncate:!0},p))))):i.a.createElement(r.c,null,!!c&&i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left",weight:"bold"},c)),!!l&&i.a.createElement(r.c,{marginBottom:1},i.a.createElement(r.K,{align:t?"center":"left"},l)))}n.d(t,"a",(function(){return d}));const c={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},l={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function d({inModal:e,notice:t}){const{title:n,description:i,actions:o=[]}=t,d=i&&i.text||"",h=i&&i.text_tags||[],p=1===o.length,u=function(e,t){const n=[];let i=0;for(let o=0;o<t.length;o+=1){const s=t[o];if(5===s.tag_type&&s.link){const t=e.substring(s.offset,s.offset+s.length),o=a.createElement(r.t,{inline:!0,target:"blank",href:s.link,key:t},a.createElement(r.K,{inline:!0,weight:"bold"},t));n.push(a.createElement("span",null,e.substring(i,s.offset))),n.push(o),i=s.offset+s.length}}return i>0&&n.push(a.createElement("span",null,e.substring(i))),0===n.length?[a.createElement("span",null,e)]:n}(d,h);return a.createElement(r.c,{shape:"rounded",padding:6,dangerouslySetInlineStyle:{__style:e?l:c}},!!n&&!e&&a.createElement(r.c,{marginBottom:2,display:"flex"},a.createElement(r.m,{size:"xs"},n)),!!d&&a.createElement(r.c,{marginBottom:4},a.createElement("span",{style:{whiteSpace:"pre-wrap"}},a.createElement(r.K,{overflow:"normal",align:e?"center":"left"},u))),!!o.length&&a.createElement(r.c,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row"},o.map(t=>a.createElement(r.c,{column:e||p?12:6,paddingY:1,paddingX:2,key:JSON.stringify(t)},a.createElement(s,{action:t,alignCenter:e||p})))))}},ZtJp:function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),i=n.n(a);const o="#EFEFEF",r="#333333";function s({size:e,iconColor:t,backgroundColor:n,grayscale:a=!1}){const s=t||(a?r:"#8E8E8E"),c=n||(a?o:"#EFEFEF");return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 36 36",version:"1.1"},i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("circle",{fill:c,cx:"18",cy:"18",r:"18"}),i.a.createElement("g",{id:"Icons/link",transform:"translate(9.000000, 9.000000)",fill:s,fillRule:"nonzero"},i.a.createElement("path",{d:"M15.75075,5.43075 L12.711,8.46975 L11.916,7.67475 L12.42,7.17075 C12.8595,6.732 12.8595,6.0195 12.42,5.58 C11.9805,5.14125 11.268,5.14125 10.82925,5.58 L10.326,6.084 L9.53025,5.289 L12.56925,2.25 L15.75075,5.43075 Z M8.46975,12.71175 L5.43075,15.75075 L2.24925,12.57 L5.289,9.53025 L6.08325,10.32525 L5.58,10.82925 C5.14125,11.26875 5.14125,11.9805 5.58,12.42 C6.01875,12.8595 6.732,12.85875 7.17075,12.42 L7.674,11.916 L8.46975,12.71175 Z M10.97925,0.65925 L7.9395,3.69825 C7.06125,4.5765 7.06125,6.00075 7.9395,6.87975 L8.73525,7.67475 L7.674,8.73525 L6.879,7.9395 C6.00075,7.06125 4.5765,7.06125 3.69825,7.9395 L0.65925,10.9785 C-0.21975,11.8575 -0.21975,13.28175 0.65925,14.16 L3.84,17.3415 C4.71825,18.21975 6.1425,18.21975 7.02075,17.3415 L10.0605,14.3025 C10.93875,13.4235 10.93875,11.99925 10.0605,11.121 L9.2655,10.32525 L10.326,9.2655 L11.121,10.0605 C11.99925,10.93875 13.4235,10.93875 14.30175,10.0605 L17.34075,7.0215 C18.21975,6.14325 18.21975,4.719 17.34075,3.84 L14.16,0.65925 C13.28175,-0.21975 11.8575,-0.21975 10.97925,0.65925 Z",id:"path-1"}))))}},"b/K5":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var a=n("q1tI"),i=n.n(a),o=n("aSYl"),r=n("Ye/N"),s=n("vvax"),c=n("n6mq");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=1800,h=800,p=335,u=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}),m=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),g=(e,t,n,a)=>{let i=null,o=null,r={},s={};const c=n.current.getBoundingClientRect();if(a&&a.current){const e=t.current.getBoundingClientRect();s=a.current.getBoundingClientRect(),r={left:c.left-e.left,top:c.top-e.top};const n={x:s.x-c.x,y:s.y-c.y},l={x:(s.width-c.width)/2,y:(s.height-c.height)/2};i=`translate(${n.x}px, ${n.y}px)`,o=`translate(${l.x}px, ${l.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?s.width:c.width,height:e?s.height:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?i:"none",transform:e?i:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:c.width,height:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o:"none",transform:e?o:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}},b=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class f extends a.PureComponent{constructor(...e){super(...e),l(this,"state",{isInitialized:!1}),l(this,"containerRef",Object(a.createRef)()),l(this,"pinDestinationRef",Object(a.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:a}=this.props;n&&a&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(a,d+h))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:l}=this.props,{description:d="",images:h}=t,{height:f=0,width:E=0,url:v=""}=h["236x"]||{},{isInitialized:_}=this.state,{mask:S,imageContainer:C}=g(_,this.containerRef,n,this.pinDestinationRef);return i.a.createElement(a.Fragment,null,i.a.createElement(c.c,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef},i.a.createElement(c.c,{maxHeight:p,overflow:"hidden",dangerouslySetInlineStyle:{__style:S}},i.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:C}},i.a.createElement(c.p,{alt:d,src:v||"",naturalHeight:f||1,naturalWidth:E||1}))),i.a.createElement(c.c,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:u(_)}},i.a.createElement(c.c,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:m(_)}},i.a.createElement(o.a,{delay:1250,startAnimation:_},i.a.createElement(c.u,{shape:"rounded",width:270,height:180},i.a.createElement(c.c,{display:"flex",height:"100%",width:"100%"},i.a.createElement(c.c,{ref:this.pinDestinationRef,color:"transparent",marginRight:1,flex:"grow",height:"100%"}),i.a.createElement(c.c,{display:"flex",width:80,direction:"column"},i.a.createElement(c.c,{color:"lightGray",flex:"grow",marginBottom:1}),i.a.createElement(c.c,{color:"lightGray",flex:"grow"}))))),i.a.createElement(c.c,{paddingX:2,dangerouslySetInlineStyle:{__style:b(_)}},i.a.createElement(c.m,{size:"sm"},e?Object(s.b)(r.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message"),{selectedBoardName:l}):Object(s.b)(r.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message"),{selectedBoardName:l})))))))}}l(f,"defaultProps",{firstRepin:!1})},bcvc:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=(n("nZwL"),n("Ye/N")),r=n("tugL"),s=n("ZtJp"),c=n("n6mq");t.a=({link:e,grayscale:t=!1,handleClick:n,handleFocus:a})=>i.a.createElement("div",{className:"ShareLink"},i.a.createElement("div",{className:"link"},i.a.createElement("div",{className:"icon"},i.a.createElement(s.a,{size:30,grayscale:t})),i.a.createElement(r.a,{ref:e=>e&&e.focus(),className:"Input linkField",value:e,onFocus:a}),i.a.createElement("div",{className:"cancelLink",onClick:n},i.a.createElement(c.n,{accessibilityLabel:o.a._("Close","close copy link"),icon:"cancel",color:"gray"}))))},c50B:function(e,t,n){n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d}));function a(e){return function(t,n){const a=[];t&&/\S/.test(t)||a.push(e.message);const i={errors:a,warnings:[]};return n&&n(i),i}}function i(e){return function(t,n){const a=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i"),i=[];(t=t&&t.trim())&&!t.match(a)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function o(e){return function(t,n){const a=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),i=[],o=!1!==e.checkLength&&a.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!o||i.push(e.message);const r={errors:i,warnings:[]};return n&&n(r),r}}function r(e){return function(t,n){const a=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&a.push(e.message);const i={errors:a,warnings:[]};return n&&n(i),i}}function s(e){return function(t,n){const a=[];(e.should_trim||!1)&&(t=t&&t.trim());const i=t.length;e.min&&i<e.min?a.push(e.minErrorString):e.max&&i>e.max&&a.push(e.maxErrorString);const o={errors:a,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){t=t&&t.trim();const a=[],i=new Date(t);t&&!i.getTime()&&a.push(e.message);const o={errors:a,warnings:[]};return n&&n(o),o}}function l(e){return function(t,n){const a=[];e.pattern.test(t)||a.push(e.message);const i={errors:a,warnings:[]};return n&&n(i),i}}function d(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}},"g/XF":function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),i=n("JW66"),o=n("zwad"),r=n("n6mq");function s({url:e,description:t,color:n}){return n=n||i.a.DEFAULT_IMAGELESS_PIN_COLOR,a.createElement(r.c,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}}},a.createElement(r.c,{maxHeight:200,padding:4,overflow:"hidden"},e&&a.createElement(r.c,{marginBottom:2},a.createElement(r.K,{color:"white",size:"xs"},o.a.parse(e).hostname||e)),a.createElement(r.c,{maxHeight:144},a.createElement(r.K,{color:"white",overflow:"normal",size:"lg",weight:"bold"},t))))}},gzTk:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("1inl"),i=n("Ye/N");const o=2171,r=2172,s=2173;function c(e){a.a.showError(function(e){switch(e.api_error_code){case o:case r:case s:return i.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},lm6u:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("/MKj"),r=n("1inl"),s=n("3z7j"),c=n("ajUs"),l=n("Ye/N");var d=n("TN0d"),h=n("eOdZ"),p=n("G35+"),u=n("CvCA"),m=n("NtFK"),g=n("Wrea"),b=n("fArA"),f=n("xdpg"),E=n("Vzit"),v=n("6G9P"),_=n("WnNx"),S=n("U4JR"),C=n("NjDU"),y=n("B6Tf"),w=n("nGHF"),I=n("oN2T");function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return O}));const T=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,B="236x";const O=Object(b.compose)(Object(o.connect)(e=>{const{advertiser:t,viewer:n,location:a}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return{homeTakeoverExperience:e.experiences.eligibleExperiences[11],location:a,repinTakeoverExperience:e.experiences.eligibleExperiences[33],...i?{advertiser_id:i}:{},...n.isAuth?{viewerUserId:n.id}:{}}}),w.c)(class extends i.a.Component{constructor(...e){super(...e),x(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,experienceComplete:()=>{},experienceDismiss:()=>{},newPin:null,modalTitle:this.props.showCreate?l.a._("Create board"):l.a._("Choose board")||"",pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1},showSharingUpsell:!1}),x(this,"unmounted",!1),x(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),x(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),x(this,"close",()=>{const{onClose:e}=this.props;e&&e(),this.setPWTAbort("boardPickerClose"),Object(S.a)(2502,{component:5,element:610})}),x(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),x(this,"getPinResource",(e,t,n)=>{const{color:a,location:i,pin:o,method:r,guid:s,additionalCreateFields:l,advertiser_id:d}=this.props;let p;o.id&&(p=Object(c.a)(o,i)||`${o.tracking_params}~0`);const u=o.id?"RepinResource":"PinResource",m=!o.id&&o.image_url?Object(v.b)(o.image_url,o.link):"",g={...l,board_id:t||"",color:a||"",clientTrackingParams:p,description:this.state.pinDescription,guid:s||"",link:o.link,image_base64:o.image_base64,image_url:m,is_buyable_pin:!1,is_removable:o.promoted_is_removable,media_upload_id:o.media_upload_id,method:r||"",pin_id:o.id||"",section:n,title:o.title||"",...d?{advertiser_id:d}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;g.share_facebook=e,g.share_twitter=t}return h.a.create(u,g)}),x(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),x(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((n,a)=>{e.then(e=>t?a({isCanceled:!0}):n(e)),e.catch(e=>a(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),x(this,"getSavedToText",(e,t)=>t?[Object(f.c)(l.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:e})]:[l.a._("Saved to"),e]),x(this,"handleLogToastClick",()=>{Object(S.a)(101,{component:20,view:52})}),x(this,"showSuggestedBoardToast",(e,t,n,a)=>{const{toastManagerContext:o,shouldShowToast:r}=this.props;if(r&&!this.state.showSharingUpsell&&e){const{name:t,url:n,image_thumbnail_url:a}=e;o.showOneToast(({onHide:e})=>i.a.createElement(u.a,{duration:y.a,onHide:e,text:[l.a._("You might also like","Post repin suggested board"),t],href:n,imageUrl:a,onClick:this.handleLogToastClick}))}}),x(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:n}=this.props;n.showToast(({onHide:n})=>i.a.createElement(u.a,{duration:y.a,onHide:n,text:this.getSavedToText(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),x(this,"dismissModal",e=>{const{resolve:t,newPin:n}=this.state;t&&t(n)}),x(this,"fetchBoardRecommendation",e=>{return h.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))}),x(this,"handleBoardSaveSuccess",(e,t,n,a)=>{const{action:i,dispatch:o,homeTakeoverExperience:r,pin:c,repinTakeoverExperience:d,setCompletionPromise:h,viewerUserId:p}=this.props;o(Object(E.d)());const u=this.makeCancelablePromise(new Promise((s,c)=>{const h=e.resource_response.data;this.triggerPubSubs(h);const p=this.state.pinDescription.match(T)||[];p.length>0&&Object(S.a)(2,{element:10273,hashtags:JSON.stringify(p),objectId:this.props.pin.id});const u=()=>{this.showBoardSavedToast(t,n),this.safeSetState({displaySuccessAnimation:!0,modalTitle:l.a._("Board created","Modal title after creating a new board"),newPin:h,resolve:s})};"repin"===i?(this.fetchBoardRecommendation(h).then(e=>{this.showSuggestedBoardToast(e,h,n,a)}),d&&500388===d.experience_id?this.safeSetState({showSharingUpsell:!0,newPin:h,resolve:s}):a?u():s(h)):("create"===i&&r&&500840===r.experience_id&&(o(function(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}(!0)),Object(S.a)(7510,{component:13233})),a?u():s(h))}));if(a||o(Object(_.b)(c.id)),h(u),o(Object(I.c)(t)),o(Object(g.d)({boardId:t.id,sectionId:n&&n.id,increment:1})),p&&(o(Object(C.b)({userId:p,increment:1})),o(Object(E.d)())),n||!t.image_cover_url){const{image_url:e,images:n}=c;t.image_cover_url=e||n&&n[B]&&n[B].url||"",o(Object(I.d)({},t))}n&&o(Object(s.a)(n.id)),o(function(e,t){return{type:"PIN_SAVE",payload:{pinId:e,saved:t}}}(c.id,!0))}),x(this,"handleSaveToBoard",(e,t,n)=>{const{onToggleModal:a,shouldShowToast:i}=this.props;this.setPWTAbort("boardPickerSubmit"),i&&!n&&(this.close(),this.showBoardSavedToast(e,t));const o="secret"===(e.privacy||""),s={board:t?t.id:e.id,state:y.c.LOADING};this.safeSetState({boardSavedTo:s},()=>{this.getPinResource(o,e.id,(t||{}).id).callCreate({showError:!1}).then(i=>{this.safeSetState({boardSavedTo:Object.assign(s,{state:y.c.SUCCESS})},()=>this.handleBoardSaveSuccess(i,e,t,n)),a&&!n&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),r.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),a&&a(!1)})})}),x(this,"handleSocialConnectSet",(e,t)=>{const n=Object.assign({},this.state.sharing);e===p.a.FACEBOOK?n.facebook=t:e===p.a.TWITTER&&(n.twitter=t),this.safeSetState({sharing:n})}),x(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(_.b)(t.id))})}UNSAFE_componentWillReceiveProps(e){const{boardWithSection:t,showCreate:n}=this.props;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),t&&n?this.setModalTitle(l.a._("Create section","modal title for create section pane")):t&&!n&&this.setModalTitle(l.a._("Choose section","modal title for choose section"))}componentWillUnmount(){this.unmounted=!0}setPWTAbort(e){Object(m.a)(e,16)}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:n,handleSaveToBoard:a,handleSocialConnectSet:i,setModalTitle:o,updateDescription:r}=this,{boardSavedTo:s,displaySuccessAnimation:c,modalTitle:l,newPin:d,showSharingUpsell:h}=this.state,{color:p,pin:u}=this.props;return this.props.children({boardSavedTo:s,color:p,dismissModal:t,displaySuccessAnimation:c,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:a,handleSocialConnectSet:i,modalTitle:l,newPin:d,pin:u,setModalTitle:o,showSharingUpsell:h,updateDescription:r})}})},nZwL:function(e,t,n){},tugL:function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),i=n.n(a),o=n("17x9"),r=n.n(o);class s extends a.Component{constructor(e,t){var n,a,i;super(e,t),i=e=>{this.props.onChange&&this.props.onChange(e.target.value),this.setState({value:e.target.value,hasChanged:!0})},(a="handleChange")in(n=this)?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,this.state={isFocused:this.props.focused||!1,value:this.props.value,hasChanged:void 0!==this.props.value}}componentDidMount(){this.state.isFocused&&this._input.focus()}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.value})}getId(){return this.props.id}getValue(){return this.state.value}focus(){this._input.focus()}render(){return i.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:e=>{this._input=e},style:this.props.style,type:this.props.type,value:this.state.value||""})}}s.propTypes={autoComplete:r.a.oneOf(["on","off"]),className:r.a.string,disabled:r.a.bool,focused:r.a.bool,id:r.a.string,name:r.a.string,onBlur:r.a.func,onChange:r.a.func,onClick:r.a.func,onFocus:r.a.func,onKeyDown:r.a.func,placeholder:r.a.string,style:r.a.object,type:r.a.oneOf(["url","text","password"]),value:r.a.string},s.defaultProps={type:"text"}},udob:function(e,t,n){var a=n("LqyK"),i=n("eOdZ"),o=n("4dcN"),r=n("zwad"),s=n("mBfy");const c={};c.open=function(e,t,n){const a=function(e,t){const n=screen.width,a=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((n-e)/2)+",top="+(a>t?Math.round((a-t)/2):0)}(t,n);window.open(e,void 0,a)},c.shrinkWrap=function(){!function(e){const t=document.documentElement;let n=t.scrollWidth-t.clientWidth,a=t.scrollHeight-t.clientHeight;e&&(n=Math.max(n,0),a=Math.max(a,0)),s.default.isAuthenticated()||(a=340),window.resizeBy(n,a)}(!1)};var l=c;const d={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog(e){const t=e.ga_category||"share_twitter";o.a.trackEvent(t,"click");const n=d._getWindowUrl(e.tweet_path,e.tweet_text);l.open(n,d.DIALOG_WIDTH,d.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>r.a.appendQueryString("https://twitter.com/intent/tweet",{via:"pinterest",url:e?r.a.absolutify(e):void 0,text:t||void 0})};var h=d;const p={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6},_convertToInviteObject(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite(e,t){const n=this._convertToInviteObject(e.object_type),a=e.invite_channel,o=null==e.invite_category?3:e.invite_category,r=e.object_id;return i.a.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:o,invite_object:n,invite_channel:a},invite_code:t,object_id:r}).callCreate()},createAndLogShareInvite:e=>p.createShareInviteData(e).then(t=>(p._logShareInvite(e,t.invite_code),Promise.resolve(t)),e=>Promise.reject(e)),createShareInviteData(e){const t=this._convertToInviteObject(e.object_type),n=e.invite_channel,a=null==e.invite_category?3:e.invite_category,o=e.object_id;return i.a.create("CreateExternalInviteResource",{invite_type:{invite_category:a,invite_object:t,invite_channel:n},object_id:o}).callCreate().then(e=>Promise.resolve(e.resource_response.data),e=>Promise.reject(e))},logShareInvite(e,t){t&&p._logShareInvite(e,t.invite_code)},shareFacebookInvite:e=>p.createShareInviteData(e).then(t=>{const n=t.invite_url,i=t.invite_code;return n&&a.default.open({type:"share",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback(t){t&&!t.error_message&&p._logShareInvite(e,i)}}),Promise.resolve(t)},e=>Promise.reject(e)),shareTwitterInvite(e){const t=this._convertToInviteObject(e.object_type);return p.createShareInviteData(e).then(n=>{const a=n.invite_url,i=n.invite_code;let o=e.description;return 6===t&&e.name&&(o=e.name),a&&h.openDialog({tweet_path:a,tweet_text:o}),p._logShareInvite(e,i),Promise.resolve(n)},e=>Promise.reject(e))},shareFbMessengerInvite:e=>p.createShareInviteData(e).then(t=>{const n=t.invite_url,i=t.invite_code;return n&&a.default.open({type:"send",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback(t){t&&t.success&&p._logShareInvite(e,i)}}),Promise.resolve(t)},e=>Promise.reject(e))};t.a=p},"v+PR":function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("Ye/N"),r=n("zLLH"),s=n("vvax"),c=n("n6mq");const l=185;var d=Object(r.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:({pin:e})=>({id:e.id})},{allowStale:!1})((function(e){const{saveStatusResource:{data:t}}=e;return t&&t.pinned_to_board?i.a.createElement(c.c,null,i.a.createElement(c.c,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:l},i.a.createElement(c.K,{align:"center",color:"white",size:"sm",weight:"bold"},Object(s.b)(o.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),i.a.createElement(c.c,{display:"flex",justifyContent:"center",marginTop:-3},i.a.createElement(c.n,{accessibilityLabel:"",color:"red",icon:"heart",size:26}))):null})),h=n("P6kd"),p=n("g/XF"),u=n("17x9"),m=n.n(u);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends a.Component{constructor(e,t){super(e,t),g(this,"handleChange",e=>{this.props.onChange&&this.props.onChange.call(this,e.target.value,e.target.selectionStart),this.setState({value:e.target.value})}),g(this,"updateCursor",e=>{this.props.onCursorChange&&this.props.onCursorChange(e.target.selectionStart)}),g(this,"handleKeyUp",e=>{this.props.onKeyUp&&this.props.onKeyUp(e),this.updateCursor(e)}),g(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(e)}),g(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(e),this.updateCursor(e)}),g(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(e)}),g(this,"handleClick",e=>{this.props.onClick&&this.props.onClick(e),this.updateCursor(e)}),this.state={isFocused:this.props.focused||!1,value:this.props.value}}componentDidMount(){this.focusIfNeeded()}UNSAFE_componentWillReceiveProps(e){this.setState({isFocused:e.focused,value:e.value})}componentDidUpdate(){this.focusIfNeeded()}focusIfNeeded(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}select(){this._textArea.select()}render(){const e=this.props;return i.a.createElement("textarea",{className:e.className,cols:e.cols,disabled:e.disabled?"disabled":"",id:e.id,name:e.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:e.placeholder,ref:e=>{this._textArea=e},rows:e.rows,style:e.style,value:this.state.value})}}b.propTypes={className:m.a.string,cols:m.a.number,disabled:m.a.bool,focused:m.a.bool,id:m.a.string,name:m.a.string,onBlur:m.a.func,onChange:m.a.func,onClick:m.a.func,onCursorChange:m.a.func,onFocus:m.a.func,onKeyDown:m.a.func,onKeyUp:m.a.func,placeholder:m.a.string,rows:m.a.number,style:m.a.object,validators:m.a.arrayOf(m.a.func),value:m.a.string},b.defaultProps={validators:[]};var f=e=>{const{allowChange:t,description:n,editing:i,onHandleDescriptionBlur:r,onHandleDescriptionEdit:s,onRefTextArea:l,onChange:d,onCursorChange:h}=e,p=({description:e,editing:t,allowChange:n})=>a.createElement(c.c,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},a.createElement(c.c,{paddingX:1,overflow:"hidden"},a.createElement(c.K,{color:e.clamped?"darkGray":"gray",size:"sm",weight:"bold"},((e,t)=>e.clamped?e.clamped:t?o.a._("Tell us about this Pin..."):"")(e,n))),a.createElement(c.c,{paddingX:1},!t&&n&&a.createElement(c.n,{accessibilityLabel:o.a._("Edit description"),icon:"edit"})));return a.createElement(c.c,{mdDisplay:"flex"},i?a.createElement(b,{focused:!0,onBlur:r,onFocus:t&&s,onChange:d,onCursorChange:h,placeholder:o.a._("Tell us about this Pin..."),style:t&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:l,rows:3,value:n.full}):a.createElement(c.c,{width:"100%"},t?a.createElement(c.P,{onTouch:s},a.createElement(p,{description:n,editing:i,allowChange:t})):a.createElement(p,{description:n,editing:i,allowChange:t})))},E=n("6G9P"),v=n("XCz/"),_=n("U4JR");function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return B}));const C="PinPanePinMeta",y=236,w=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,I=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,x=0,T="g";class B extends a.Component{constructor(...e){super(...e),S(this,"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),S(this,"onDescriptionChange",(e,t)=>{const n=new RegExp(w,T);let a="";if(t<e.length){let i=n.exec(e),o=n.lastIndex<t;for(;i&&o;)i=n.exec(e),o=n.lastIndex<t;const r=!!i&&w.test(e.slice(i.index,t));o=!!i&&i.index<t,i&&r&&o&&(a=i[x])}else{const t=I.exec(e);a=t?t[x]:""}this.updateDescription(e);const i=w.test(a),o=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState({cursorIndex:t,flyoutCursorIndex:o,description:e,hashtagQuery:a,isHashtagFlyoutOpen:i,flyoutOpened:this.state.flyoutOpened||i})}),S(this,"onCursorChange",e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:n}=this.state;t&&e<n&&this.setState({isHashtagFlyoutOpen:!1})}),S(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),S(this,"handleDescriptionBlur",e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})}),S(this,"handleDescriptionEdit",()=>{this.setState({editing:!0,editedBefore:!0})}),S(this,"handleHashtagAddition",e=>{const{pin:t}=this.props;Object(_.a)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const n=this.state.flyoutCursorIndex,a=Number(n+this.state.hashtagQuery.length),i=this.state.description.slice(0,n)+e+" "+this.state.description.slice(a);this.updateDescription(i),this.setState({description:i,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),S(this,"handleRefTextArea",e=>{this._textArea=e})}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:a,width:o}=this.props,{description:r,editing:s,flyoutOpened:l,hashtagQuery:u,isHashtagFlyoutOpen:m}=this.state,{images:g,link:b}=n,_=g&&g[y+"x"],S=_&&_.url||n.image_base64;return i.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:l&&s?{transform:"translateY(-75px)"}:{}}},i.a.createElement(c.c,{display:"flex",direction:"column",alignItems:"center"},n&&n.id&&i.a.createElement(d,{pin:n}),i.a.createElement(c.c,{paddingY:t?9:0,width:o||216},i.a.createElement(c.c,{ref:a,maxHeight:l&&s?220:335,shape:"rounded",overflow:"hidden"},S?i.a.createElement(c.p,{alt:r,src:S,naturalHeight:_.height||1,naturalWidth:_.width||1}):!!b&&i.a.createElement(p.a,{color:e||"",description:r,url:b})),i.a.createElement(c.c,{marginTop:2,paddingX:2,id:C},i.a.createElement("div",{ref:e=>{this.anchor=e}},i.a.createElement(v.a,{name:"web_unified_description_both"},({anyEnabled:e})=>i.a.createElement(v.a,{name:"web_unified_description_both_perf",activate:!1},({anyEnabled:t})=>!(e||t)&&i.a.createElement(f,{allowChange:!n.is_native,description:Object(E.a)(r),editing:s,hashtagFlyoutOpen:m,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))))),this.anchor&&m?i.a.createElement(h.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:s,query:u}):null)}}}}]);
//# sourceMappingURL=pjs-11-023b203e21d541efdee0.mjs.map
